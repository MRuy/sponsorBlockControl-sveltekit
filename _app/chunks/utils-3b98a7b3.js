var c=Object.defineProperty,m=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var i=(e,t,a)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f=(e,t)=>{for(var a in t||(t={}))U.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))I.call(t,a)&&i(e,a,t[a]);return e},u=(e,t)=>m(e,p(t));import{$ as d}from"./vendor-029251f6.js";import{C as g}from"./config-b3d4a71f.js";import{U as l}from"./userInfo-a6af26e4.js";const D=(e,t=!1)=>{const a=Math.floor(e/60/24/365),n=Math.floor(e/60/24)%365,s=Math.floor(e/60)%24;let o="";return o+=`${a>0?a+(t?" years ":"y "):""}`,o+=`${n>0?n+(t?" days ":"d "):""}`,o+=`${s>0?s+(t?" hours ":"h "):""}`,a==0&&(o+=`${(e%60).toFixed(1)}${t?" minutes ":"m "}`),o.trim()},w=e=>/^[a-f0-9]{64}$/.test(e),_=e=>/^([a-f0-9]{64,65}|[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/.test(e),y=async(e=!1)=>{console.log("updateUserInfo","updating data");const t=6e5,a=d(l),n=d(g);if(e===!0||"_lastUpdateTime"in a&&a._lastUpdateTime+t<Date.now()){const s=await fetch(`${n.sponsorBlockApi}/api/getUserInfo?userID=${n.privateUUID}`).then(o=>o.json());a._lastUpdateTime=Date.now(),l.update(o=>u(f({},o),{minutesSaved:s.minutesSaved,viewCount:s.viewCount,vip:s.vip,segmentCount:s.segmentCount,warnings:s.warnings,userName:s.userName,userID:s.userID}))}else console.log("updateUserInfo","using data from cache",a._lastUpdateTime)};export{w as a,_ as i,D as m,y as u};
