var l=Object.defineProperty,m=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var i=(e,a,t)=>a in e?l(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,f=(e,a)=>{for(var t in a||(a={}))U.call(a,t)&&i(e,t,a[t]);if(r)for(var t of r(a))I.call(a,t)&&i(e,t,a[t]);return e},u=(e,a)=>m(e,p(a));import{_ as c}from"./vendor-9fba9fd8.js";import{C as g}from"./config-c3a6b1a1.js";import{U as d}from"./userInfo-65a70c4e.js";const D=(e,a=!1)=>{const t=Math.floor(e/60/24/365),n=Math.floor(e/60/24)%365,s=Math.floor(e/60)%24;let o="";return o+=`${t>0?t+(a?" years ":"y "):""}`,o+=`${n>0?n+(a?" days ":"d "):""}`,o+=`${s>0?s+(a?" hours ":"h "):""}`,t==0&&(o+=`${(e%60).toFixed(1)}${a?" minutes ":"m "}`),o.trim()},_=e=>/^[a-f0-9]{64}$/.test(e),w=e=>/^([a-f0-9]{64,65}|[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/.test(e),y=async(e=!1)=>{console.log("updateUserInfo","updating data");const a=6e5,t=c(d),n=c(g);if(e===!0||"_lastUpdateTime"in t&&t._lastUpdateTime+a<Date.now()){const s=await fetch(`${n.sponsorBlockApi}/api/getUserInfo?userID=${n.privateUUID}`).then(o=>o.json());t._lastUpdateTime=Date.now(),d.update(o=>u(f({},o),{minutesSaved:s.minutesSaved,viewCount:s.viewCount,vip:s.vip,segmentCount:s.segmentCount,warnings:s.warnings,userName:s.userName,userID:s.userID}))}else console.log("updateUserInfo","using data from cache",t._lastUpdateTime)};export{_ as a,w as i,D as m,y as u};
