var l=Object.defineProperty,m=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var i=(e,t,s)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,f=(e,t)=>{for(var s in t||(t={}))U.call(t,s)&&i(e,s,t[s]);if(n)for(var s of n(t))I.call(t,s)&&i(e,s,t[s]);return e},u=(e,t)=>m(e,p(t));import{_ as c}from"./vendor-9fc4b0a7.js";import{U as d,C as g}from"./stores-1663c3e2.js";const C=(e,t=!1)=>{const s=Math.floor(e/60/24/365),r=Math.floor(e/60/24)%365,a=Math.floor(e/60)%24;let o="";return o+=`${s>0?s+(t?" years ":"y "):""}`,o+=`${r>0?r+(t?" days ":"d "):""}`,o+=`${a>0?a+(t?" hours ":"h "):""}`,s==0&&(o+=`${(e%60).toFixed(1)}${t?" minutes ":"m "}`),o.trim()},D=e=>/^[a-f0-9]{64}$/.test(e),_=e=>/^([a-f0-9]{64,65}|[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/.test(e),w=async(e=!1)=>{console.log("updateUserInfo","updating data");const t=6e5,s=c(d),r=c(g);if(e===!0||"_lastUpdateTime"in s&&s._lastUpdateTime+t<Date.now()){const a=await fetch(`${r.sponsorBlockApi}/api/getUserInfo?userID=${r.privateUUID}`).then(o=>o.json());s._lastUpdateTime=Date.now(),d.update(o=>u(f({},o),{minutesSaved:a.minutesSaved,viewCount:a.viewCount,vip:a.vip,segmentCount:a.segmentCount,warnings:a.warnings,userName:a.userName,userID:a.userID}))}else console.log("updateUserInfo","using data from cache",s._lastUpdateTime)};export{D as a,_ as i,C as m,w as u};
