import{V as n}from"./index-57ef3195.js";import{C as f}from"./config-90b35c59.js";import{U as i}from"./userInfo-b63b04e5.js";const m=(e,o=!1)=>{const s=Math.floor(e/60/24/365),r=Math.floor(e/60/24)%365,t=Math.floor(e/60)%24;let a="";return a+=`${s>0?s+(o?" years ":"y "):""}`,a+=`${r>0?r+(o?" days ":"d "):""}`,a+=`${t>0?t+(o?" hours ":"h "):""}`,s==0&&(a+=`${(e%60).toFixed(1)}${o?" minutes ":"m "}`),a.trim()},c=e=>/^[a-f0-9]{64}$/.test(e),p=e=>/^([a-f0-9]{64,65}|[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/.test(e),U=async(e=!1)=>{console.log("updateUserInfo","updating data");const o=6e5,s=n(i),r=n(f);if(e===!0||"_lastUpdateTime"in s&&s._lastUpdateTime+o<Date.now()){const t=await fetch(`${r.sponsorBlockApi}/api/getUserInfo?userID=${r.privateUUID}`).then(a=>a.json());s._lastUpdateTime=Date.now(),i.update(a=>({...a,minutesSaved:t.minutesSaved,viewCount:t.viewCount,vip:t.vip,segmentCount:t.segmentCount,warnings:t.warnings,userName:t.userName,userID:t.userID}))}else console.log("updateUserInfo","using data from cache",s._lastUpdateTime)};export{c as a,p as i,m,U as u};
