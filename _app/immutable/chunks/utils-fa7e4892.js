var m=Object.defineProperty,c=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var i=(e,t,a)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f=(e,t)=>{for(var a in t||(t={}))U.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))I.call(t,a)&&i(e,a,t[a]);return e},u=(e,t)=>c(e,p(t));import{Z as l}from"./index-dfbae117.js";import{C as g}from"./config-fe9b9627.js";import{U as d}from"./userInfo-8e2fd6d8.js";const D=(e,t=!1)=>{const a=Math.floor(e/60/24/365),r=Math.floor(e/60/24)%365,s=Math.floor(e/60)%24;let o="";return o+=`${a>0?a+(t?" years ":"y "):""}`,o+=`${r>0?r+(t?" days ":"d "):""}`,o+=`${s>0?s+(t?" hours ":"h "):""}`,a==0&&(o+=`${(e%60).toFixed(1)}${t?" minutes ":"m "}`),o.trim()},w=e=>/^[a-f0-9]{64}$/.test(e),_=e=>/^([a-f0-9]{64,65}|[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/.test(e),y=async(e=!1)=>{console.log("updateUserInfo","updating data");const t=6e5,a=l(d),r=l(g);if(e===!0||"_lastUpdateTime"in a&&a._lastUpdateTime+t<Date.now()){const s=await fetch(`${r.sponsorBlockApi}/api/getUserInfo?userID=${r.privateUUID}`).then(o=>o.json());a._lastUpdateTime=Date.now(),d.update(o=>u(f({},o),{minutesSaved:s.minutesSaved,viewCount:s.viewCount,vip:s.vip,segmentCount:s.segmentCount,warnings:s.warnings,userName:s.userName,userID:s.userID}))}else console.log("updateUserInfo","using data from cache",a._lastUpdateTime)};export{w as a,_ as i,D as m,y as u};
