import{S as Qe,i as et,s as tt,k as p,q as L,l as g,m,r as R,h as _,n as E,b as X,D as a,g as lt,t as Z,d as st,f as H,F as ye,v as Oe,w as Ae,x as Be,E as nt,y as Ce,u as Se,a as U,W as at,c as N,X as ot,H as He,Y as Ke,Z as ue,I as fe,R as it,G as ct,_ as ut}from"../../../chunks/index-57ef3195.js";import{C as ft}from"../../../chunks/config-90b35c59.js";import{B as rt,S as q}from"../../../chunks/BaseStatus-314ac73e.js";import{w as Me,a as _e}from"../../../chunks/config-6bf174ce.js";function Xe(o,t,l){const s=o.slice();return s[1]=t[l][0],s[2]=t[l][1],s}function _t(o){let t,l,s=o[0],n=[];for(let r=0;r<s.length;r+=1)n[r]=Ze(Xe(o,s,r));const c=r=>Z(n[r],1,1,()=>{n[r]=null});return{c(){t=p("ul");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){t=g(r,"UL",{class:!0});var i=m(t);for(let e=0;e<n.length;e+=1)n[e].l(i);i.forEach(_),this.h()},h(){E(t,"class","svelte-at7oeh")},m(r,i){X(r,t,i);for(let e=0;e<n.length;e+=1)n[e].m(t,null);l=!0},p(r,i){if(i&1){s=r[0];let e;for(e=0;e<s.length;e+=1){const f=Xe(r,s,e);n[e]?(n[e].p(f,i),H(n[e],1)):(n[e]=Ze(f),n[e].c(),H(n[e],1),n[e].m(t,null))}for(lt(),e=s.length;e<n.length;e+=1)c(e);st()}},i(r){if(!l){for(let i=0;i<s.length;i+=1)H(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)Z(n[i]);l=!1},d(r){r&&_(t),ye(n,r)}}}function ht(o){let t,l;return t=new rt({props:{status:q.IDLE}}),{c(){Oe(t.$$.fragment)},l(s){Ae(t.$$.fragment,s)},m(s,n){Be(t,s,n),l=!0},p:nt,i(s){l||(H(t.$$.fragment,s),l=!0)},o(s){Z(t.$$.fragment,s),l=!1},d(s){Ce(t,s)}}}function Ze(o){let t,l=o[1]+"",s,n,c,r;return c=new rt({props:{status:o[2]}}),{c(){t=p("li"),s=L(l),n=L(": "),Oe(c.$$.fragment)},l(i){t=g(i,"LI",{});var e=m(t);s=R(e,l),n=R(e,": "),Ae(c.$$.fragment,e),e.forEach(_)},m(i,e){X(i,t,e),a(t,s),a(t,n),Be(c,t,null),r=!0},p(i,e){(!r||e&1)&&l!==(l=i[1]+"")&&Se(s,l);const f={};e&1&&(f.status=i[2]),c.$set(f)},i(i){r||(H(c.$$.fragment,i),r=!0)},o(i){Z(c.$$.fragment,i),r=!1},d(i){i&&_(t),Ce(c)}}}function dt(o){let t,l,s,n,c,r;const i=[ht,_t],e=[];function f(d,w){return w&1&&(s=null),s==null&&(s=Object.values(d[0]).length==0),s?0:1}return n=f(o,-1),c=e[n]=i[n](o),{c(){t=p("div"),l=L(`Status: 
  `),c.c(),this.h()},l(d){t=g(d,"DIV",{class:!0});var w=m(t);l=R(w,`Status: 
  `),c.l(w),w.forEach(_),this.h()},h(){E(t,"class","status")},m(d,w){X(d,t,w),a(t,l),e[n].m(t,null),r=!0},p(d,[w]){let P=n;n=f(d,w),n===P?e[n].p(d,w):(lt(),Z(e[P],1,1,()=>{e[P]=null}),st(),c=e[n],c?c.p(d,w):(c=e[n]=i[n](d),c.c()),H(c,1),c.m(t,null))},i(d){r||(H(c),r=!0)},o(d){Z(c),r=!1},d(d){d&&_(t),e[n].d()}}}function pt(o,t,l){let{status:s=[]}=t;return o.$$set=n=>{"status"in n&&l(0,s=n.status)},[s]}class gt extends Qe{constructor(t){super(),et(this,t,pt,dt,tt,{status:0})}}function Je(o,t,l){const s=o.slice();return s[13]=t[l],s}function Ye(o,t,l){const s=o.slice();return s[16]=t[l],s[18]=l,s}function $e(o){let t,l=_e[o[18]]+"",s;return{c(){t=p("option"),s=L(l),this.h()},l(n){t=g(n,"OPTION",{});var c=m(t);s=R(c,l),c.forEach(_),this.h()},h(){t.__value=o[16],t.value=t.__value},m(n,c){X(n,t,c),a(t,s)},p:nt,d(n){n&&_(t)}}}function ze(o){let t,l=o[13].userID+"",s,n,c=_e[o[13].type]+"",r,i;return{c(){t=p("li"),s=L(l),n=L(" ("),r=L(c),i=L(")")},l(e){t=g(e,"LI",{});var f=m(t);s=R(f,l),n=R(f," ("),r=R(f,c),i=R(f,")"),f.forEach(_)},m(e,f){X(e,t,f),a(t,s),a(t,n),a(t,r),a(t,i)},p(e,f){f&4&&l!==(l=e[13].userID+"")&&Se(s,l),f&4&&c!==(c=_e[e[13].type]+"")&&Se(r,c)},d(e){e&&_(t)}}}function mt(o){let t,l,s,n,c,r,i,e,f,d,w,P,se,y,W,v,b,D,S,I,ne,he,B,de,J,G,pe,ce,ge,j,re,me,ve,Y,be,K,Ee,x,$,we,Ie,De,C,Te,F,z,ke,Ue,Q=Me,T=[];for(let u=0;u<Q.length;u+=1)T[u]=$e(Ye(o,Q,u));let ee=o[2],k=[];for(let u=0;u<ee.length;u+=1)k[u]=ze(Je(o,ee,u));return F=new gt({props:{status:o[4]}}),{c(){t=U(),l=p("main"),s=p("div"),n=p("fieldset"),c=p("legend"),r=L("Batch warn:"),i=U(),e=p("div"),f=p("div"),d=p("label"),w=L("Default warn target:"),P=p("br"),se=U(),y=p("select"),W=p("option"),v=L("--- Where it applies ---");for(let u=0;u<T.length;u+=1)T[u].c();b=U(),D=p("div"),S=p("label"),I=L("Warn log text:"),ne=p("br"),he=U(),B=p("textarea"),de=U(),J=p("div"),G=p("button"),pe=L("Warn"),ge=U(),j=p("fieldset"),re=p("legend"),me=L("Preview"),ve=U(),Y=p("div"),be=L(`Targetted users:
        `),K=p("ul");for(let u=0;u<k.length;u+=1)k[u].c();Ee=U(),x=p("div"),$=p("label"),we=L("Warn text to be sent to the users:"),Ie=p("br"),De=U(),C=p("textarea"),Te=U(),Oe(F.$$.fragment),this.h()},l(u){at('[data-svelte="svelte-1ffmqlc"]',document.head).forEach(_),t=N(u),l=g(u,"MAIN",{});var A=m(l);s=g(A,"DIV",{class:!0});var h=m(s);n=g(h,"FIELDSET",{});var V=m(n);c=g(V,"LEGEND",{});var Ne=m(c);r=R(Ne,"Batch warn:"),Ne.forEach(_),i=N(V),e=g(V,"DIV",{class:!0});var te=m(e);f=g(te,"DIV",{});var ae=m(f);d=g(ae,"LABEL",{for:!0});var We=m(d);w=R(We,"Default warn target:"),We.forEach(_),P=g(ae,"BR",{}),se=N(ae),y=g(ae,"SELECT",{id:!0,class:!0});var Le=m(y);W=g(Le,"OPTION",{});var Ve=m(W);v=R(Ve,"--- Where it applies ---"),Ve.forEach(_);for(let M=0;M<T.length;M+=1)T[M].l(Le);Le.forEach(_),ae.forEach(_),b=N(te),D=g(te,"DIV",{});var oe=m(D);S=g(oe,"LABEL",{for:!0});var Pe=m(S);I=R(Pe,"Warn log text:"),Pe.forEach(_),ne=g(oe,"BR",{}),he=N(oe),B=g(oe,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0}),m(B).forEach(_),oe.forEach(_),de=N(te),J=g(te,"DIV",{class:!0});var Ge=m(J);G=g(Ge,"BUTTON",{type:!0});var je=m(G);pe=R(je,"Warn"),je.forEach(_),Ge.forEach(_),te.forEach(_),V.forEach(_),ge=N(h),j=g(h,"FIELDSET",{});var le=m(j);re=g(le,"LEGEND",{});var qe=m(re);me=R(qe,"Preview"),qe.forEach(_),ve=N(le),Y=g(le,"DIV",{});var Re=m(Y);be=R(Re,`Targetted users:
        `),K=g(Re,"UL",{class:!0});var xe=m(K);for(let M=0;M<k.length;M+=1)k[M].l(xe);xe.forEach(_),Re.forEach(_),Ee=N(le),x=g(le,"DIV",{});var ie=m(x);$=g(ie,"LABEL",{for:!0});var Fe=m($);we=R(Fe,"Warn text to be sent to the users:"),Fe.forEach(_),Ie=g(ie,"BR",{}),De=N(ie),C=g(ie,"TEXTAREA",{id:!0,cols:!0,rows:!0}),m(C).forEach(_),ie.forEach(_),le.forEach(_),Te=N(h),Ae(F.$$.fragment,h),h.forEach(_),A.forEach(_),this.h()},h(){document.title="Batch warn | SponsorBlockControl",E(d,"for","warning-type"),W.__value="",W.value=W.__value,E(y,"id","warning-type"),E(y,"class","svelte-to26ll"),o[1]===void 0&&ot(()=>o[7].call(y)),E(S,"for","reason"),E(B,"id","reason"),E(B,"cols","80"),E(B,"rows","10"),E(B,"placeholder",`https://sb.ltn.fi/userid/1234...
https://dearrow.minibomba.pro/user_id/5678...
9abc...

Reason...

[vip note: ... (will be removed)]`),E(G,"type","button"),G.disabled=ce=!o[3],E(J,"class","actions"),E(e,"class","form svelte-to26ll"),He(e,"working",Object.values(o[4]).some(o[9])),E(K,"class","svelte-to26ll"),E($,"for","reason-preview"),E(C,"id","reason-preview"),C.disabled=!0,E(C,"cols","80"),E(C,"rows","10"),E(s,"class","container")},m(u,O){X(u,t,O),X(u,l,O),a(l,s),a(s,n),a(n,c),a(c,r),a(n,i),a(n,e),a(e,f),a(f,d),a(d,w),a(f,P),a(f,se),a(f,y),a(y,W),a(W,v);for(let A=0;A<T.length;A+=1)T[A].m(y,null);Ke(y,o[1]),a(e,b),a(e,D),a(D,S),a(S,I),a(D,ne),a(D,he),a(D,B),ue(B,o[0]),a(e,de),a(e,J),a(J,G),a(G,pe),a(s,ge),a(s,j),a(j,re),a(re,me),a(j,ve),a(j,Y),a(Y,be),a(Y,K);for(let A=0;A<k.length;A+=1)k[A].m(K,null);a(j,Ee),a(j,x),a(x,$),a($,we),a(x,Ie),a(x,De),a(x,C),ue(C,o[5]),a(s,Te),Be(F,s,null),z=!0,ke||(Ue=[fe(y,"change",o[7]),fe(B,"input",o[8]),fe(G,"click",o[6]),fe(C,"input",o[10])],ke=!0)},p(u,[O]){if(O&0){Q=Me;let h;for(h=0;h<Q.length;h+=1){const V=Ye(u,Q,h);T[h]?T[h].p(V,O):(T[h]=$e(V),T[h].c(),T[h].m(y,null))}for(;h<T.length;h+=1)T[h].d(1);T.length=Q.length}if(O&2&&Ke(y,u[1]),O&1&&ue(B,u[0]),(!z||O&8&&ce!==(ce=!u[3]))&&(G.disabled=ce),(!z||O&16)&&He(e,"working",Object.values(u[4]).some(u[9])),O&4){ee=u[2];let h;for(h=0;h<ee.length;h+=1){const V=Je(u,ee,h);k[h]?k[h].p(V,O):(k[h]=ze(V),k[h].c(),k[h].m(K,null))}for(;h<k.length;h+=1)k[h].d(1);k.length=ee.length}O&32&&ue(C,u[5]);const A={};O&16&&(A.status=u[4]),F.$set(A)},i(u){z||(H(F.$$.fragment,u),z=!0)},o(u){Z(F.$$.fragment,u),z=!1},d(u){u&&_(t),u&&_(l),ye(T,u),ye(k,u),Ce(F),ke=!1,it(Ue)}}}const vt=/^\s*\**\[[\s\S]+\]\**\s*$/,bt=/sb\.ltn\.fi\/userid\/([0-9a-f]{64})/i,Et=/dearrow\.minibomba\.pro\/user_id\/([0-9a-f]{64})/i,wt=/[0-9a-f]{64}/i;function It(o,t,l){let s;ct(o,ft,v=>l(11,s=v));const n=new RegExp(/\n\s*\n/,"dg");let c=!1,r="",i=0,e=[],f="",d=[];async function w(){l(4,e=d.map(b=>[`${_e[b.type]}/${b.userID}`,q.WORKING]));const v=[];for(const b in d){const D=d[b];v.push((async()=>{const S={issuerUserID:s.privateUUID,userID:D.userID,reason:f,type:D.type,enabled:!0},I=await fetch(`${s.sponsorBlockApi}/api/warnUser`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}).then(function(ne){return ne.status});I===200&&l(4,e[b][1]=q.SUCCESS,e),I===400&&l(4,e[b][1]=q.ERROR_INVALID,e),I===403&&l(4,e[b][1]=q.ERROR_UNAUTHORIZED,e),I===409&&l(4,e[b][1]=q.DUPLICATE,e),e[b][1]===q.WORKING&&l(4,e[b][1]=q.ERROR_OTHER,e)})())}await Promise.allSettled(v)}function P(){i=ut(this),l(1,i)}function se(){r=this.value,l(0,r)}const y=v=>v[1]==q.WORKING;function W(){f=this.value,l(5,f),l(0,r),l(1,i),l(2,d)}return o.$$.update=()=>{if(o.$$.dirty&7){const v=Array.from(r.matchAll(n));let b;switch(v.length){case 0:b=r.trim(),l(5,f="");break;case 1:b=r.slice(0,v[0].indices[0][0]),l(5,f=r.slice(v[0].indices[0][1]).trim());break;default:{b=r.slice(0,v[0].indices[0][0]);let S=r.slice(v[v.length-1].indices[0][1]);vt.test(S)?l(5,f=r.slice(v[0].indices[0][1],v[v.length-1].indices[0][0])):l(5,f=r.slice(v[0].indices[0][1]).trim())}}const D=[];for(const S of b.split(`
`)){let I=bt.exec(S);if(I){D.push({userID:I[1].toLowerCase(),type:0});continue}if(I=Et.exec(S),I){D.push({userID:I[1].toLowerCase(),type:1});continue}if(I=wt.exec(S),I){D.push({userID:I[0].toLowerCase(),type:i});continue}}l(2,d=D),l(3,c=r.length>0&&d.length>0)}},[r,i,d,c,e,f,w,P,se,y,W]}class Rt extends Qe{constructor(t){super(),et(this,t,It,mt,tt,{})}}export{Rt as default};
