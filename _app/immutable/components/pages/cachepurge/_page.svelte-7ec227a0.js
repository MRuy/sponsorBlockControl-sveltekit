import{S as ue,i as de,s as fe,a0 as _e,a1 as pe,a as U,k as _,q as K,v as ee,W as he,h as i,c as T,l as p,m as h,r as L,w as te,n as B,H as se,b as ae,D as s,x as ne,I as le,a5 as me,f as oe,t as re,y as ie,R as ge,G as ve}from"../../../chunks/index-a74698fd.js";import{C as Ie}from"../../../chunks/config-1a541b95.js";import{a as be,S as l}from"../../../chunks/Status-b63e8986.js";import{V as Ee}from"../../../chunks/VideoInput-90c4ce83.js";function Re(o){let D,t,r,a,n,N,k,c,m,S,u,d,g,f,q,H,I,b,Z,P,$,E,j,V,F,R,O,J,M;function ce(e){o[4](e)}let z={id:"videoid"};return o[0]!==void 0&&(z.value=o[0]),f=new Ee({props:z}),_e.push(()=>pe(f,"value",ce)),R=new be({props:{status:o[1]}}),{c(){D=U(),t=_("main"),r=_("div"),a=_("fieldset"),n=_("legend"),N=K("Clear cache / Purge all segments"),k=U(),c=_("div"),m=_("div"),S=_("label"),u=K("VideoID:"),d=_("br"),g=U(),ee(f.$$.fragment),H=U(),I=_("div"),b=_("button"),Z=K("Clear cache"),$=U(),E=_("button"),j=K(`Purge all
            segments`),F=U(),ee(R.$$.fragment),this.h()},l(e){he('[data-svelte="svelte-rncy8k"]',document.head).forEach(i),D=T(e),t=p(e,"MAIN",{});var A=h(t);r=p(A,"DIV",{class:!0});var C=h(r);a=p(C,"FIELDSET",{});var y=h(a);n=p(y,"LEGEND",{});var Q=h(n);N=L(Q,"Clear cache / Purge all segments"),Q.forEach(i),k=T(y),c=p(y,"DIV",{class:!0});var W=h(c);m=p(W,"DIV",{});var G=h(m);S=p(G,"LABEL",{for:!0});var X=h(S);u=L(X,"VideoID:"),X.forEach(i),d=p(G,"BR",{}),g=T(G),te(f.$$.fragment,G),G.forEach(i),H=T(W),I=p(W,"DIV",{class:!0});var w=h(I);b=p(w,"BUTTON",{});var Y=h(b);Z=L(Y,"Clear cache"),Y.forEach(i),$=T(w),E=p(w,"BUTTON",{});var x=h(E);j=L(x,`Purge all
            segments`),x.forEach(i),w.forEach(i),W.forEach(i),y.forEach(i),F=T(C),te(R.$$.fragment,C),C.forEach(i),A.forEach(i),this.h()},h(){document.title="Clear cache / Purge all segments | SponsorBlockControl",B(S,"for","videoid"),b.disabled=P=o[0].length===0||o[1]===l.WORKING,E.disabled=V=o[0].length===0||o[1]===l.WORKING,B(I,"class","actions"),B(c,"class","form svelte-fndrlu"),se(c,"working",o[1]===l.WORKING),B(r,"class","container")},m(e,v){ae(e,D,v),ae(e,t,v),s(t,r),s(r,a),s(a,n),s(n,N),s(a,k),s(a,c),s(c,m),s(m,S),s(S,u),s(m,d),s(m,g),ne(f,m,null),s(c,H),s(c,I),s(I,b),s(b,Z),s(I,$),s(I,E),s(E,j),s(r,F),ne(R,r,null),O=!0,J||(M=[le(b,"click",o[5]),le(E,"click",o[6])],J=!0)},p(e,[v]){const A={};!q&&v&1&&(q=!0,A.value=e[0],me(()=>q=!1)),f.$set(A),(!O||v&3&&P!==(P=e[0].length===0||e[1]===l.WORKING))&&(b.disabled=P),(!O||v&3&&V!==(V=e[0].length===0||e[1]===l.WORKING))&&(E.disabled=V),(!O||v&2)&&se(c,"working",e[1]===l.WORKING);const C={};v&2&&(C.status=e[1]),R.$set(C)},i(e){O||(oe(f.$$.fragment,e),oe(R.$$.fragment,e),O=!0)},o(e){re(f.$$.fragment,e),re(R.$$.fragment,e),O=!1},d(e){e&&i(D),e&&i(t),ie(f),ie(R),J=!1,ge(M)}}}function De(o,D,t){let r;ve(o,Ie,u=>t(7,r=u));let a="",n=l.IDLE;async function N(u=!0){t(1,n=l.WORKING);const d=new URLSearchParams;d.set("videoID",a),d.set("userID",r.privateUUID);const g=await fetch(`${r.sponsorBlockApi}/api/clearCache?${d}`,{method:"POST"}).then(function(f){return f.status});g===200&&(t(1,n=l.SUCCESS),t(0,a="")),g===400&&t(1,n=l.ERROR_INVALID),g===403&&t(1,n=l.ERROR_UNAUTHORIZED)}async function k(){t(1,n=l.WORKING);const u={videoID:a,userID:r.privateUUID},d=await fetch(`${r.sponsorBlockApi}/api/purgeAllSegments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(function(g){return g.status});d===200&&(t(1,n=l.SUCCESS),t(0,a="")),d===400&&t(1,n=l.ERROR_INVALID),d===403&&t(1,n=l.ERROR_UNAUTHORIZED)}function c(u){a=u,t(0,a)}return[a,n,N,k,c,u=>N(),u=>k()]}class ke extends ue{constructor(D){super(),de(this,D,De,Re,fe,{})}}export{ke as default};
