import{S as ue,i as de,s as fe,a4 as _e,a5 as pe,a as T,k as _,q as w,v as ee,W as me,h as i,c as U,l as p,m,r as L,w as te,n as B,H as se,b as ae,D as a,x as ne,I as oe,a7 as he,f as le,t as re,y as ie,R as ge,G as ve}from"../../../chunks/index-57ef3195.js";import{C as Re}from"../../../chunks/config-90b35c59.js";import{S as Ie}from"../../../chunks/Status-26ff45ac.js";import{V as be}from"../../../chunks/VideoInput-2c244d7f.js";import{S as n}from"../../../chunks/BaseStatus-314ac73e.js";function Ee(l){let O,t,r,o,s,C,k,c,h,D,u,d,g,f,H,q,R,I,Z,A,j,b,F,K,J,E,S,M,z;function ce(e){l[4](e)}let Q={id:"videoid"};return l[0]!==void 0&&(Q.value=l[0]),f=new be({props:Q}),_e.push(()=>pe(f,"value",ce)),E=new Ie({props:{status:l[1]}}),{c(){O=T(),t=_("main"),r=_("div"),o=_("fieldset"),s=_("legend"),C=w("Clear cache / Purge all segments"),k=T(),c=_("div"),h=_("div"),D=_("label"),u=w("VideoID:"),d=_("br"),g=T(),ee(f.$$.fragment),q=T(),R=_("div"),I=_("button"),Z=w("Clear cache"),j=T(),b=_("button"),F=w(`Purge all
            segments`),J=T(),ee(E.$$.fragment),this.h()},l(e){me('[data-svelte="svelte-rncy8k"]',document.head).forEach(i),O=U(e),t=p(e,"MAIN",{});var G=m(t);r=p(G,"DIV",{class:!0});var N=m(r);o=p(N,"FIELDSET",{});var P=m(o);s=p(P,"LEGEND",{});var X=m(s);C=L(X,"Clear cache / Purge all segments"),X.forEach(i),k=U(P),c=p(P,"DIV",{class:!0});var V=m(c);h=p(V,"DIV",{});var W=m(h);D=p(W,"LABEL",{for:!0});var Y=m(D);u=L(Y,"VideoID:"),Y.forEach(i),d=p(W,"BR",{}),g=U(W),te(f.$$.fragment,W),W.forEach(i),q=U(V),R=p(V,"DIV",{class:!0});var y=m(R);I=p(y,"BUTTON",{});var $=m(I);Z=L($,"Clear cache"),$.forEach(i),j=U(y),b=p(y,"BUTTON",{});var x=m(b);F=L(x,`Purge all
            segments`),x.forEach(i),y.forEach(i),V.forEach(i),P.forEach(i),J=U(N),te(E.$$.fragment,N),N.forEach(i),G.forEach(i),this.h()},h(){document.title="Clear cache / Purge all segments | SponsorBlockControl",B(D,"for","videoid"),I.disabled=A=l[0].length===0||l[1]===n.WORKING,b.disabled=K=l[0].length===0||l[1]===n.WORKING,B(R,"class","actions"),B(c,"class","form svelte-fndrlu"),se(c,"working",l[1]===n.WORKING),B(r,"class","container")},m(e,v){ae(e,O,v),ae(e,t,v),a(t,r),a(r,o),a(o,s),a(s,C),a(o,k),a(o,c),a(c,h),a(h,D),a(D,u),a(h,d),a(h,g),ne(f,h,null),a(c,q),a(c,R),a(R,I),a(I,Z),a(R,j),a(R,b),a(b,F),a(r,J),ne(E,r,null),S=!0,M||(z=[oe(I,"click",l[5]),oe(b,"click",l[6])],M=!0)},p(e,[v]){const G={};!H&&v&1&&(H=!0,G.value=e[0],he(()=>H=!1)),f.$set(G),(!S||v&3&&A!==(A=e[0].length===0||e[1]===n.WORKING))&&(I.disabled=A),(!S||v&3&&K!==(K=e[0].length===0||e[1]===n.WORKING))&&(b.disabled=K),(!S||v&2)&&se(c,"working",e[1]===n.WORKING);const N={};v&2&&(N.status=e[1]),E.$set(N)},i(e){S||(le(f.$$.fragment,e),le(E.$$.fragment,e),S=!0)},o(e){re(f.$$.fragment,e),re(E.$$.fragment,e),S=!1},d(e){e&&i(O),e&&i(t),ie(f),ie(E),M=!1,ge(z)}}}function Oe(l,O,t){let r;ve(l,Re,u=>t(7,r=u));let o="",s=n.IDLE;async function C(u=!0){t(1,s=n.WORKING);const d=new URLSearchParams;d.set("videoID",o),d.set("userID",r.privateUUID);const g=await fetch(`${r.sponsorBlockApi}/api/clearCache?${d}`,{method:"POST"}).then(function(f){return f.status});g===200&&(t(1,s=n.SUCCESS),t(0,o="")),g===400&&t(1,s=n.ERROR_INVALID),g===403&&t(1,s=n.ERROR_UNAUTHORIZED),s===n.WORKING&&t(1,s=n.ERROR_OTHER)}async function k(){t(1,s=n.WORKING);const u={videoID:o,userID:r.privateUUID},d=await fetch(`${r.sponsorBlockApi}/api/purgeAllSegments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(function(g){return g.status});d===200&&(t(1,s=n.SUCCESS),t(0,o="")),d===400&&t(1,s=n.ERROR_INVALID),d===403&&t(1,s=n.ERROR_UNAUTHORIZED),s===n.WORKING&&t(1,s=n.ERROR_OTHER)}function c(u){o=u,t(0,o)}return[o,s,C,k,c,u=>C(),u=>k()]}class Te extends ue{constructor(O){super(),de(this,O,Oe,Ee,fe,{})}}export{Te as default};
