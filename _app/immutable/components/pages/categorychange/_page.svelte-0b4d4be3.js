import{S as pe,i as ge,s as me,a as R,k as d,q as B,v as ve,W as Ie,h as u,c as T,l as f,m as p,r as K,w as be,n as b,a2 as Ee,b as ae,D as t,a8 as ue,a3 as _e,x as ye,I as te,f as Se,t as De,F as Ue,y as Ce,R as Oe,G as Ne,E as Re,a6 as Te}from"../../../chunks/index-a74698fd.js";import{C as Le}from"../../../chunks/config-1a541b95.js";import{i as Ge}from"../../../chunks/utils-e0c09108.js";import{c as de,a as ke}from"../../../chunks/config-95127e1a.js";import{a as Ve,S as E}from"../../../chunks/Status-b63e8986.js";function fe(a,n,s){const o=a.slice();return o[9]=n[s],o[11]=s,o}function he(a){let n,s=ke[a[11]]+"",o;return{c(){n=d("option"),o=B(s),this.h()},l(l){n=f(l,"OPTION",{});var i=p(n);o=K(i,s),i.forEach(u),this.h()},h(){n.__value=a[9],n.value=n.__value},m(l,i){ae(l,n,i),t(n,o)},p:Re,d(l){l&&u(n)}}}function We(a){let n,s,o,l,i,L,y,g,D,P,w,m,r,G,j,U,k,M,H,J,h,C,Q,X,V,O,Y,F,Z,N,W,$,se,A=de,_=[];for(let e=0;e<A.length;e+=1)_[e]=he(fe(a,A,e));return N=new Ve({props:{status:a[1]}}),{c(){n=R(),s=d("main"),o=d("div"),l=d("fieldset"),i=d("legend"),L=B("Change segment category"),y=R(),g=d("div"),D=d("label"),P=B("Segment UUID:"),w=d("br"),m=R(),r=d("input"),j=R(),U=d("div"),k=d("label"),M=B("Category:"),H=d("br"),J=R(),h=d("select"),C=d("option"),Q=B("--- Select category ---");for(let e=0;e<_.length;e+=1)_[e].c();X=R(),V=d("div"),O=d("button"),Y=B(`Change
          category`),Z=R(),ve(N.$$.fragment),this.h()},l(e){Ie('[data-svelte="svelte-1gjpzbo"]',document.head).forEach(u),n=T(e),s=f(e,"MAIN",{});var S=p(s);o=f(S,"DIV",{class:!0});var c=p(o);l=f(c,"FIELDSET",{});var I=p(l);i=f(I,"LEGEND",{});var le=p(i);L=K(le,"Change segment category"),le.forEach(u),y=T(I),g=f(I,"DIV",{});var q=p(g);D=f(q,"LABEL",{for:!0});var oe=p(D);P=K(oe,"Segment UUID:"),oe.forEach(u),w=f(q,"BR",{}),m=T(q),r=f(q,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),q.forEach(u),j=T(I),U=f(I,"DIV",{});var z=p(U);k=f(z,"LABEL",{for:!0});var ne=p(k);M=K(ne,"Category:"),ne.forEach(u),H=f(z,"BR",{}),J=T(z),h=f(z,"SELECT",{id:!0,class:!0});var x=p(h);C=f(x,"OPTION",{});var re=p(C);Q=K(re,"--- Select category ---"),re.forEach(u);for(let ee=0;ee<_.length;ee+=1)_[ee].l(x);x.forEach(u),z.forEach(u),X=T(I),V=f(I,"DIV",{class:!0});var ie=p(V);O=f(ie,"BUTTON",{});var ce=p(O);Y=K(ce,`Change
          category`),ce.forEach(u),ie.forEach(u),I.forEach(u),Z=T(c),be(N.$$.fragment,c),c.forEach(u),S.forEach(u),this.h()},h(){document.title="Category change | SponsorBlockControl",b(D,"for","uuid"),b(r,"id","uuid"),b(r,"type","text"),b(r,"size","64"),b(r,"pattern","[a-f0-9]{64}"),b(r,"placeholder","Segment UUID ..."),r.disabled=G=a[1]===E.WORKING,b(k,"for","category"),C.__value="",C.value=C.__value,b(h,"id","category"),b(h,"class","svelte-1slb73m"),a[3]===void 0&&Ee(()=>a[6].call(h)),O.disabled=F=a[1]===E.WORKING||!a[2]||a[1]===E.WORKING,b(V,"class","actions"),b(o,"class","container")},m(e,v){ae(e,n,v),ae(e,s,v),t(s,o),t(o,l),t(l,i),t(i,L),t(l,y),t(l,g),t(g,D),t(D,P),t(g,w),t(g,m),t(g,r),ue(r,a[0]),t(l,j),t(l,U),t(U,k),t(k,M),t(U,H),t(U,J),t(U,h),t(h,C),t(C,Q);for(let S=0;S<_.length;S+=1)_[S].m(h,null);_e(h,a[3]),t(l,X),t(l,V),t(V,O),t(O,Y),t(o,Z),ye(N,o,null),W=!0,$||(se=[te(r,"input",a[5]),te(h,"change",a[6]),te(O,"click",a[7])],$=!0)},p(e,[v]){if((!W||v&2&&G!==(G=e[1]===E.WORKING))&&(r.disabled=G),v&1&&r.value!==e[0]&&ue(r,e[0]),v&0){A=de;let c;for(c=0;c<A.length;c+=1){const I=fe(e,A,c);_[c]?_[c].p(I,v):(_[c]=he(I),_[c].c(),_[c].m(h,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=A.length}v&8&&_e(h,e[3]),(!W||v&6&&F!==(F=e[1]===E.WORKING||!e[2]||e[1]===E.WORKING))&&(O.disabled=F);const S={};v&2&&(S.status=e[1]),N.$set(S)},i(e){W||(Se(N.$$.fragment,e),W=!0)},o(e){De(N.$$.fragment,e),W=!1},d(e){e&&u(n),e&&u(s),Ue(_,e),Ce(N),$=!1,Oe(se)}}}function Ae(a,n,s){let o;Ne(a,Le,m=>s(8,o=m));let l=E.IDLE,i="",L=!1,y="";async function g(){s(1,l=E.WORKING);const m=new URLSearchParams;m.set("UUID",i),m.set("userID",o.privateUUID),m.set("category",y);const r=await fetch(`${o.sponsorBlockApi}/api/voteOnSponsorTime?${m}`,{method:"POST"}).then(G=>G.status);r===200&&(s(1,l=E.SUCCESS),s(0,i=""),s(3,y="")),r===400&&s(1,l=E.ERROR_INVALID),r===405&&s(1,l=E.DUPLICATE)}function D(){i=this.value,s(0,i)}function P(){y=Te(this),s(3,y)}const w=m=>{g()};return a.$$.update=()=>{a.$$.dirty&1&&s(2,L=Ge(i))},[i,l,L,y,g,D,P,w]}class ze extends pe{constructor(n){super(),ge(this,n,Ae,We,me,{})}}export{ze as default};
