import{S as pe,i as me,s as ge,a as N,k as d,q as A,v as ve,W as Ie,h as u,c as T,l as f,m as p,r as B,w as be,n as E,X as Ee,b as ae,D as t,Z as ue,Y as _e,x as Se,I as te,f as ye,t as Re,F as De,y as Oe,R as Ue,G as Ce,E as Ne,_ as Te}from"../../../chunks/index-57ef3195.js";import{C as Le}from"../../../chunks/config-90b35c59.js";import{i as Ge}from"../../../chunks/utils-f53755c6.js";import{c as de,b as We}from"../../../chunks/config-6bf174ce.js";import{S as ke}from"../../../chunks/Status-26ff45ac.js";import{S as m}from"../../../chunks/BaseStatus-314ac73e.js";function fe(l,n,s){const o=l.slice();return o[9]=n[s],o[11]=s,o}function he(l){let n,s=We[l[11]]+"",o;return{c(){n=d("option"),o=A(s),this.h()},l(a){n=f(a,"OPTION",{});var i=p(n);o=B(i,s),i.forEach(u),this.h()},h(){n.__value=l[9],n.value=n.__value},m(a,i){ae(a,n,i),t(n,o)},p:Ne,d(a){a&&u(n)}}}function Ke(l){let n,s,o,a,i,L,S,g,R,P,w,v,r,G,j,D,W,H,M,X,h,O,Y,Z,k,U,J,F,Q,C,K,$,se,V=de,_=[];for(let e=0;e<V.length;e+=1)_[e]=he(fe(l,V,e));return C=new ke({props:{status:l[1]}}),{c(){n=N(),s=d("main"),o=d("div"),a=d("fieldset"),i=d("legend"),L=A("Change segment category"),S=N(),g=d("div"),R=d("label"),P=A("Segment UUID:"),w=d("br"),v=N(),r=d("input"),j=N(),D=d("div"),W=d("label"),H=A("Category:"),M=d("br"),X=N(),h=d("select"),O=d("option"),Y=A("--- Select category ---");for(let e=0;e<_.length;e+=1)_[e].c();Z=N(),k=d("div"),U=d("button"),J=A(`Change
          category`),Q=N(),ve(C.$$.fragment),this.h()},l(e){Ie('[data-svelte="svelte-1gjpzbo"]',document.head).forEach(u),n=T(e),s=f(e,"MAIN",{});var y=p(s);o=f(y,"DIV",{class:!0});var c=p(o);a=f(c,"FIELDSET",{});var b=p(a);i=f(b,"LEGEND",{});var le=p(i);L=B(le,"Change segment category"),le.forEach(u),S=T(b),g=f(b,"DIV",{});var q=p(g);R=f(q,"LABEL",{for:!0});var oe=p(R);P=B(oe,"Segment UUID:"),oe.forEach(u),w=f(q,"BR",{}),v=T(q),r=f(q,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),q.forEach(u),j=T(b),D=f(b,"DIV",{});var z=p(D);W=f(z,"LABEL",{for:!0});var ne=p(W);H=B(ne,"Category:"),ne.forEach(u),M=f(z,"BR",{}),X=T(z),h=f(z,"SELECT",{id:!0,class:!0});var x=p(h);O=f(x,"OPTION",{});var re=p(O);Y=B(re,"--- Select category ---"),re.forEach(u);for(let ee=0;ee<_.length;ee+=1)_[ee].l(x);x.forEach(u),z.forEach(u),Z=T(b),k=f(b,"DIV",{class:!0});var ie=p(k);U=f(ie,"BUTTON",{});var ce=p(U);J=B(ce,`Change
          category`),ce.forEach(u),ie.forEach(u),b.forEach(u),Q=T(c),be(C.$$.fragment,c),c.forEach(u),y.forEach(u),this.h()},h(){document.title="Category change | SponsorBlockControl",E(R,"for","uuid"),E(r,"id","uuid"),E(r,"type","text"),E(r,"size","64"),E(r,"pattern","[a-f0-9]{64}"),E(r,"placeholder","Segment UUID ..."),r.disabled=G=l[1]===m.WORKING,E(W,"for","category"),O.__value="",O.value=O.__value,E(h,"id","category"),E(h,"class","svelte-1slb73m"),l[3]===void 0&&Ee(()=>l[6].call(h)),U.disabled=F=l[1]===m.WORKING||!l[2]||l[1]===m.WORKING,E(k,"class","actions"),E(o,"class","container")},m(e,I){ae(e,n,I),ae(e,s,I),t(s,o),t(o,a),t(a,i),t(i,L),t(a,S),t(a,g),t(g,R),t(R,P),t(g,w),t(g,v),t(g,r),ue(r,l[0]),t(a,j),t(a,D),t(D,W),t(W,H),t(D,M),t(D,X),t(D,h),t(h,O),t(O,Y);for(let y=0;y<_.length;y+=1)_[y].m(h,null);_e(h,l[3]),t(a,Z),t(a,k),t(k,U),t(U,J),t(o,Q),Se(C,o,null),K=!0,$||(se=[te(r,"input",l[5]),te(h,"change",l[6]),te(U,"click",l[7])],$=!0)},p(e,[I]){if((!K||I&2&&G!==(G=e[1]===m.WORKING))&&(r.disabled=G),I&1&&r.value!==e[0]&&ue(r,e[0]),I&0){V=de;let c;for(c=0;c<V.length;c+=1){const b=fe(e,V,c);_[c]?_[c].p(b,I):(_[c]=he(b),_[c].c(),_[c].m(h,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=V.length}I&8&&_e(h,e[3]),(!K||I&6&&F!==(F=e[1]===m.WORKING||!e[2]||e[1]===m.WORKING))&&(U.disabled=F);const y={};I&2&&(y.status=e[1]),C.$set(y)},i(e){K||(ye(C.$$.fragment,e),K=!0)},o(e){Re(C.$$.fragment,e),K=!1},d(e){e&&u(n),e&&u(s),De(_,e),Oe(C),$=!1,Ue(se)}}}function Ve(l,n,s){let o;Ce(l,Le,v=>s(8,o=v));let a=m.IDLE,i="",L=!1,S="";async function g(){s(1,a=m.WORKING);const v=new URLSearchParams;v.set("UUID",i),v.set("userID",o.privateUUID),v.set("category",S);const r=await fetch(`${o.sponsorBlockApi}/api/voteOnSponsorTime?${v}`,{method:"POST"}).then(G=>G.status);r===200&&(s(1,a=m.SUCCESS),s(0,i=""),s(3,S="")),r===400&&s(1,a=m.ERROR_INVALID),r===405&&s(1,a=m.DUPLICATE),a===m.WORKING&&s(1,a=m.ERROR_OTHER)}function R(){i=this.value,s(0,i)}function P(){S=Te(this),s(3,S)}const w=v=>{g()};return l.$$.update=()=>{l.$$.dirty&1&&s(2,L=Ge(i))},[i,a,L,S,g,R,P,w]}class Fe extends pe{constructor(n){super(),me(this,n,Ve,Ke,ge,{})}}export{Fe as default};
