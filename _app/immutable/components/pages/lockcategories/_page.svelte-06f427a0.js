import{S as st,i as at,s as nt,a0 as it,a1 as rt,a as E,k as _,q as B,v as Ke,W as ct,h as c,c as I,l as d,m as f,r as G,w as qe,n as m,H as Fe,b as ce,D as s,x as je,a8 as He,I as re,a5 as ut,f as Me,t as Je,y as Xe,F as Oe,R as _t,G as Ze,o as dt,E as ft,aa as ze,u as ht}from"../../../chunks/index-a74698fd.js";import{C as pt}from"../../../chunks/config-1a541b95.js";import{c as ye,b as Ne,a as vt,d as gt}from"../../../chunks/config-95127e1a.js";import{p as mt}from"../../../chunks/stores-46532b94.js";import{a as bt,S as P}from"../../../chunks/Status-b63e8986.js";import{V as kt}from"../../../chunks/VideoInput-90c4ce83.js";function Qe(l,o,e){const a=l.slice();return a[20]=o[e],a}function Ye(l,o,e){const a=l.slice();return a[23]=o[e],a[25]=e,a}function $e(l,o,e){const a=l.slice();return a[26]=o[e],a[25]=e,a}function xe(l){let o=l[4][l[26]].locked===1?"\u{1F512}":"\u2713",e;return{c(){e=B(o)},l(a){e=G(a,o)},m(a,i){ce(a,e,i)},p(a,i){i&16&&o!==(o=a[4][a[26]].locked===1?"\u{1F512}":"\u2713")&&ht(e,o)},d(a){a&&c(e)}}}function et(l){let o,e,a,i,v,h,D=vt[l[25]]+"",u,b,p,r=l[4][l[26]]&&xe(l);return{c(){o=_("div"),e=_("span"),r&&r.c(),a=E(),i=_("input"),v=E(),h=_("label"),u=B(D),this.h()},l(g){o=d(g,"DIV",{class:!0});var k=f(o);e=d(k,"SPAN",{class:!0});var w=f(e);r&&r.l(w),w.forEach(c),a=I(k),i=d(k,"INPUT",{id:!0,type:!0}),v=I(k),h=d(k,"LABEL",{for:!0});var q=f(h);u=G(q,D),q.forEach(c),k.forEach(c),this.h()},h(){m(e,"class","lock svelte-1ei2iwv"),m(i,"id","category_"+l[26]),m(i,"type","checkbox"),i.__value=l[26],i.value=i.__value,l[11][1].push(i),m(h,"for","category_"+l[26]),m(o,"class","category-option svelte-1ei2iwv")},m(g,k){ce(g,o,k),s(o,e),r&&r.m(e,null),s(o,a),s(o,i),i.checked=~l[1].indexOf(i.__value),s(o,v),s(o,h),s(h,u),b||(p=re(i,"change",l[10]),b=!0)},p(g,k){g[4][g[26]]?r?r.p(g,k):(r=xe(g),r.c(),r.m(e,null)):r&&(r.d(1),r=null),k&2&&(i.checked=~g[1].indexOf(i.__value))},d(g){g&&c(o),r&&r.d(),l[11][1].splice(l[11][1].indexOf(i),1),b=!1,p()}}}function tt(l){let o,e,a,i,v=gt[l[25]]+"",h,D,u,b;return{c(){o=_("div"),e=_("input"),a=E(),i=_("label"),h=B(v),D=E(),this.h()},l(p){o=d(p,"DIV",{class:!0});var r=f(o);e=d(r,"INPUT",{id:!0,type:!0}),a=I(r),i=d(r,"LABEL",{for:!0});var g=f(i);h=G(g,v),g.forEach(c),D=I(r),r.forEach(c),this.h()},h(){m(e,"id","actionType_"+l[23]),m(e,"type","checkbox"),e.__value=l[23],e.value=e.__value,l[11][0].push(e),m(i,"for","actionType_"+l[23]),m(o,"class","actionType-option")},m(p,r){ce(p,o,r),s(o,e),e.checked=~l[5].indexOf(e.__value),s(o,a),s(o,i),s(i,h),s(o,D),u||(b=re(e,"change",l[12]),u=!0)},p(p,r){r&32&&(e.checked=~p[5].indexOf(e.__value))},d(p){p&&c(o),l[11][0].splice(l[11][0].indexOf(e),1),u=!1,b()}}}function lt(l){let o;return{c(){o=_("option"),this.h()},l(e){o=d(e,"OPTION",{}),f(o).forEach(c),this.h()},h(){o.__value=l[20],o.value=o.__value},m(e,a){ce(e,o,a)},p:ft,d(e){e&&c(o)}}}function Et(l){let o,e,a,i,v,h,D,u,b,p,r,g,k,w,q,X,S,Z,ue,_e,te,z,R,Q,W,A,le,pe,ve,ge,C,me,Y,be,K,oe,ke,Ee,F,Ie,fe,Te,j,De,he,Re,H,$,Le,Se;function ot(t){l[9](t)}let Ae={id:"videoid"};l[0]!==void 0&&(Ae.value=l[0]),w=new kt({props:Ae}),it.push(()=>rt(w,"value",ot));let se=ye,L=[];for(let t=0;t<se.length;t+=1)L[t]=et($e(l,se,t));let ae=Ne,O=[];for(let t=0;t<ae.length;t+=1)O[t]=tt(Ye(l,ae,t));let ne=l[6],y=[];for(let t=0;t<ne.length;t+=1)y[t]=lt(Qe(l,ne,t));return H=new bt({props:{status:l[2]}}),{c(){o=E(),e=_("main"),a=_("div"),i=_("fieldset"),v=_("legend"),h=B("Lock categories"),D=E(),u=_("div"),b=_("div"),p=_("label"),r=B("VideoID:"),g=_("br"),k=E(),Ke(w.$$.fragment),X=E(),S=_("div"),Z=_("div"),ue=B("Categories:"),_e=E();for(let t=0;t<L.length;t+=1)L[t].c();te=E(),z=_("div"),R=B("Action Types:"),Q=E();for(let t=0;t<O.length;t+=1)O[t].c();W=E(),A=_("div"),le=_("label"),pe=B("Lock Reason:"),ve=_("br"),ge=E(),C=_("textarea"),me=E(),Y=_("datalist");for(let t=0;t<y.length;t+=1)y[t].c();be=E(),K=_("div"),oe=_("button"),ke=B("Check all"),Ee=E(),F=_("button"),Ie=B("Unlock"),Te=E(),j=_("button"),De=B("Lock"),Re=E(),Ke(H.$$.fragment),this.h()},l(t){ct('[data-svelte="svelte-uaxvgn"]',document.head).forEach(c),o=I(t),e=d(t,"MAIN",{});var T=f(e);a=d(T,"DIV",{class:!0});var x=f(a);i=d(x,"FIELDSET",{});var n=f(i);v=d(n,"LEGEND",{});var V=f(v);h=G(V,"Lock categories"),V.forEach(c),D=I(n),u=d(n,"DIV",{class:!0});var M=f(u);b=d(M,"DIV",{});var de=f(b);p=d(de,"LABEL",{for:!0});var we=f(p);r=G(we,"VideoID:"),we.forEach(c),g=d(de,"BR",{}),k=I(de),qe(w.$$.fragment,de),de.forEach(c),X=I(M),S=d(M,"DIV",{});var J=f(S);Z=d(J,"DIV",{});var Ce=f(Z);ue=G(Ce,"Categories:"),Ce.forEach(c),_e=I(J);for(let U=0;U<L.length;U+=1)L[U].l(J);te=I(J),z=d(J,"DIV",{});var Ve=f(z);R=G(Ve,"Action Types:"),Ve.forEach(c),Q=I(J);for(let U=0;U<O.length;U+=1)O[U].l(J);J.forEach(c),W=I(M),A=d(M,"DIV",{});var ee=f(A);le=d(ee,"LABEL",{for:!0});var Ue=f(le);pe=G(Ue,"Lock Reason:"),Ue.forEach(c),ve=d(ee,"BR",{}),ge=I(ee),C=d(ee,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),f(C).forEach(c),me=I(ee),Y=d(ee,"DATALIST",{id:!0});var Be=f(Y);for(let U=0;U<y.length;U+=1)y[U].l(Be);Be.forEach(c),ee.forEach(c),be=I(M),K=d(M,"DIV",{class:!0});var ie=f(K);oe=d(ie,"BUTTON",{});var Ge=f(oe);ke=G(Ge,"Check all"),Ge.forEach(c),Ee=I(ie),F=d(ie,"BUTTON",{});var Pe=f(F);Ie=G(Pe,"Unlock"),Pe.forEach(c),Te=I(ie),j=d(ie,"BUTTON",{});var We=f(j);De=G(We,"Lock"),We.forEach(c),ie.forEach(c),M.forEach(c),n.forEach(c),Re=I(x),qe(H.$$.fragment,x),x.forEach(c),T.forEach(c),this.h()},h(){document.title="Lock categories | SponsorBlockControl",m(p,"for","videoid"),m(le,"for","reason"),m(C,"id","reason"),m(C,"cols","80"),m(C,"rows","3"),m(C,"placeholder","Reason..."),m(C,"list","lockreasonsuggestions"),m(Y,"id","lockreasonsuggestions"),F.disabled=fe=l[0].length===0||l[1].length===0||l[2]===P.WORKING,j.disabled=he=l[0].length===0||l[1].length===0||l[2]===P.WORKING,m(K,"class","actions"),m(u,"class","form svelte-1ei2iwv"),Fe(u,"working",l[2]===P.WORKING),m(a,"class","container")},m(t,N){ce(t,o,N),ce(t,e,N),s(e,a),s(a,i),s(i,v),s(v,h),s(i,D),s(i,u),s(u,b),s(b,p),s(p,r),s(b,g),s(b,k),je(w,b,null),s(u,X),s(u,S),s(S,Z),s(Z,ue),s(S,_e);for(let T=0;T<L.length;T+=1)L[T].m(S,null);s(S,te),s(S,z),s(z,R),s(S,Q);for(let T=0;T<O.length;T+=1)O[T].m(S,null);s(u,W),s(u,A),s(A,le),s(le,pe),s(A,ve),s(A,ge),s(A,C),He(C,l[3]),s(A,me),s(A,Y);for(let T=0;T<y.length;T+=1)y[T].m(Y,null);s(u,be),s(u,K),s(K,oe),s(oe,ke),s(K,Ee),s(K,F),s(F,Ie),s(K,Te),s(K,j),s(j,De),s(a,Re),je(H,a,null),$=!0,Le||(Se=[re(C,"input",l[13]),re(oe,"click",l[8]),re(F,"click",l[14]),re(j,"click",l[15])],Le=!0)},p(t,[N]){const T={};if(!q&&N&1&&(q=!0,T.value=t[0],ut(()=>q=!1)),w.$set(T),N&18){se=ye;let n;for(n=0;n<se.length;n+=1){const V=$e(t,se,n);L[n]?L[n].p(V,N):(L[n]=et(V),L[n].c(),L[n].m(S,te))}for(;n<L.length;n+=1)L[n].d(1);L.length=se.length}if(N&32){ae=Ne;let n;for(n=0;n<ae.length;n+=1){const V=Ye(t,ae,n);O[n]?O[n].p(V,N):(O[n]=tt(V),O[n].c(),O[n].m(S,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=ae.length}if(N&8&&He(C,t[3]),N&64){ne=t[6];let n;for(n=0;n<ne.length;n+=1){const V=Qe(t,ne,n);y[n]?y[n].p(V,N):(y[n]=lt(V),y[n].c(),y[n].m(Y,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=ne.length}(!$||N&7&&fe!==(fe=t[0].length===0||t[1].length===0||t[2]===P.WORKING))&&(F.disabled=fe),(!$||N&7&&he!==(he=t[0].length===0||t[1].length===0||t[2]===P.WORKING))&&(j.disabled=he),(!$||N&4)&&Fe(u,"working",t[2]===P.WORKING);const x={};N&4&&(x.status=t[2]),H.$set(x)},i(t){$||(Me(w.$$.fragment,t),Me(H.$$.fragment,t),$=!0)},o(t){Je(w.$$.fragment,t),Je(H.$$.fragment,t),$=!1},d(t){t&&c(o),t&&c(e),Xe(w),Oe(L,t),Oe(O,t),Oe(y,t),Xe(H),Le=!1,_t(Se)}}}function It(l,o,e){let a,i;Ze(l,pt,R=>e(16,a=R)),Ze(l,mt,R=>e(17,i=R));let v=[],h="",D=P.IDLE,u="",b={},p=[...Ne];const r=[...ye.filter(R=>!["poi_highlight","filler","exclusive_access","chapter"].includes(R))];dt(()=>{e(0,h=i.url.searchParams.has("videoID")?i.url.searchParams.get("videoID"):"")});const g=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function k(R=!0){e(4,b={}),e(2,D=P.WORKING);const Q={videoID:h,userID:a.privateUUID,reason:u,categories:v,actionTypes:p},W=await fetch(`${a.sponsorBlockApi}/api/lockCategories`,{method:R?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}).then(function(A){return A.status});W===200&&(e(2,D=P.SUCCESS),e(0,h=""),e(3,u=""),e(1,v=[])),W===400&&e(2,D=P.ERROR_INVALID),W===403&&e(2,D=P.ERROR_UNAUTHORIZED)}function w(){v.length===0?e(1,v=[...r]):e(1,v=[])}async function q(){const Q=await(await fetch(`${a.sponsorBlockApi}/api/lockReason?videoID=${h}`)).json(),W={};for(const A of Q)W[A.category]=A;e(4,b=W)}const X=[[],[]];function S(R){h=R,e(0,h)}function Z(){v=ze(X[1],this.__value,this.checked),e(1,v)}function ue(){p=ze(X[0],this.__value,this.checked),e(5,p)}function _e(){u=this.value,e(3,u)}const te=R=>k(!1),z=R=>k(!0);return l.$$.update=()=>{l.$$.dirty&1&&h&&q()},[h,v,D,u,b,p,g,k,w,S,Z,X,ue,_e,te,z]}class Nt extends st{constructor(o){super(),at(this,o,It,Et,nt,{})}}export{Nt as default};
