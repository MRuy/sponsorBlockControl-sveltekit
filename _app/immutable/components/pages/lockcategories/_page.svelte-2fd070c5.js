import{S as st,i as at,s as nt,a4 as it,a5 as rt,a as I,k as _,q as G,v as Pe,W as ct,h as c,c as R,l as f,m as d,r as W,w as qe,n as m,H as Fe,b as ce,D as s,x as He,Z as je,I as re,a7 as ut,f as Me,t as Ze,y as Je,F as Le,R as _t,G as Xe,o as ft,E as dt,aa as ze,u as ht}from"../../../chunks/index-57ef3195.js";import{C as pt}from"../../../chunks/config-90b35c59.js";import{c as ye,d as Ne,b as vt,e as gt}from"../../../chunks/config-6bf174ce.js";import{p as mt}from"../../../chunks/stores-91f6b27f.js";import{S as bt}from"../../../chunks/Status-26ff45ac.js";import{V as kt}from"../../../chunks/VideoInput-2c244d7f.js";import{S as C}from"../../../chunks/BaseStatus-314ac73e.js";function Qe(l,o,e){const a=l.slice();return a[20]=o[e],a}function Ye(l,o,e){const a=l.slice();return a[23]=o[e],a[25]=e,a}function $e(l,o,e){const a=l.slice();return a[26]=o[e],a[25]=e,a}function xe(l){let o=l[4][l[26]].locked===1?"\u{1F512}":"\u2713",e;return{c(){e=G(o)},l(a){e=W(a,o)},m(a,i){ce(a,e,i)},p(a,i){i&16&&o!==(o=a[4][a[26]].locked===1?"\u{1F512}":"\u2713")&&ht(e,o)},d(a){a&&c(e)}}}function et(l){let o,e,a,i,v,h,E=vt[l[25]]+"",u,b,p,r=l[4][l[26]]&&xe(l);return{c(){o=_("div"),e=_("span"),r&&r.c(),a=I(),i=_("input"),v=I(),h=_("label"),u=G(E),this.h()},l(g){o=f(g,"DIV",{class:!0});var k=d(o);e=f(k,"SPAN",{class:!0});var w=d(e);r&&r.l(w),w.forEach(c),a=R(k),i=f(k,"INPUT",{id:!0,type:!0}),v=R(k),h=f(k,"LABEL",{for:!0});var q=d(h);u=W(q,E),q.forEach(c),k.forEach(c),this.h()},h(){m(e,"class","lock svelte-1ei2iwv"),m(i,"id","category_"+l[26]),m(i,"type","checkbox"),i.__value=l[26],i.value=i.__value,l[11][1].push(i),m(h,"for","category_"+l[26]),m(o,"class","category-option svelte-1ei2iwv")},m(g,k){ce(g,o,k),s(o,e),r&&r.m(e,null),s(o,a),s(o,i),i.checked=~l[1].indexOf(i.__value),s(o,v),s(o,h),s(h,u),b||(p=re(i,"change",l[10]),b=!0)},p(g,k){g[4][g[26]]?r?r.p(g,k):(r=xe(g),r.c(),r.m(e,null)):r&&(r.d(1),r=null),k&2&&(i.checked=~g[1].indexOf(i.__value))},d(g){g&&c(o),r&&r.d(),l[11][1].splice(l[11][1].indexOf(i),1),b=!1,p()}}}function tt(l){let o,e,a,i,v=gt[l[25]]+"",h,E,u,b;return{c(){o=_("div"),e=_("input"),a=I(),i=_("label"),h=G(v),E=I(),this.h()},l(p){o=f(p,"DIV",{class:!0});var r=d(o);e=f(r,"INPUT",{id:!0,type:!0}),a=R(r),i=f(r,"LABEL",{for:!0});var g=d(i);h=W(g,v),g.forEach(c),E=R(r),r.forEach(c),this.h()},h(){m(e,"id","actionType_"+l[23]),m(e,"type","checkbox"),e.__value=l[23],e.value=e.__value,l[11][0].push(e),m(i,"for","actionType_"+l[23]),m(o,"class","actionType-option")},m(p,r){ce(p,o,r),s(o,e),e.checked=~l[5].indexOf(e.__value),s(o,a),s(o,i),s(i,h),s(o,E),u||(b=re(e,"change",l[12]),u=!0)},p(p,r){r&32&&(e.checked=~p[5].indexOf(e.__value))},d(p){p&&c(o),l[11][0].splice(l[11][0].indexOf(e),1),u=!1,b()}}}function lt(l){let o;return{c(){o=_("option"),this.h()},l(e){o=f(e,"OPTION",{}),d(o).forEach(c),this.h()},h(){o.__value=l[20],o.value=o.__value},m(e,a){ce(e,o,a)},p:dt,d(e){e&&c(o)}}}function Et(l){let o,e,a,i,v,h,E,u,b,p,r,g,k,w,q,J,S,X,ue,_e,te,z,D,Q,K,A,le,pe,ve,ge,V,me,Y,be,P,oe,ke,Ee,F,Ie,de,Re,H,Te,he,De,j,$,Oe,Se;function ot(t){l[9](t)}let Ae={id:"videoid"};l[0]!==void 0&&(Ae.value=l[0]),w=new kt({props:Ae}),it.push(()=>rt(w,"value",ot));let se=ye,O=[];for(let t=0;t<se.length;t+=1)O[t]=et($e(l,se,t));let ae=Ne,L=[];for(let t=0;t<ae.length;t+=1)L[t]=tt(Ye(l,ae,t));let ne=l[6],y=[];for(let t=0;t<ne.length;t+=1)y[t]=lt(Qe(l,ne,t));return j=new bt({props:{status:l[2]}}),{c(){o=I(),e=_("main"),a=_("div"),i=_("fieldset"),v=_("legend"),h=G("Lock categories"),E=I(),u=_("div"),b=_("div"),p=_("label"),r=G("VideoID:"),g=_("br"),k=I(),Pe(w.$$.fragment),J=I(),S=_("div"),X=_("div"),ue=G("Categories:"),_e=I();for(let t=0;t<O.length;t+=1)O[t].c();te=I(),z=_("div"),D=G("Action Types:"),Q=I();for(let t=0;t<L.length;t+=1)L[t].c();K=I(),A=_("div"),le=_("label"),pe=G("Lock Reason:"),ve=_("br"),ge=I(),V=_("textarea"),me=I(),Y=_("datalist");for(let t=0;t<y.length;t+=1)y[t].c();be=I(),P=_("div"),oe=_("button"),ke=G("Check all"),Ee=I(),F=_("button"),Ie=G("Unlock"),Re=I(),H=_("button"),Te=G("Lock"),De=I(),Pe(j.$$.fragment),this.h()},l(t){ct('[data-svelte="svelte-uaxvgn"]',document.head).forEach(c),o=R(t),e=f(t,"MAIN",{});var T=d(e);a=f(T,"DIV",{class:!0});var x=d(a);i=f(x,"FIELDSET",{});var n=d(i);v=f(n,"LEGEND",{});var U=d(v);h=W(U,"Lock categories"),U.forEach(c),E=R(n),u=f(n,"DIV",{class:!0});var M=d(u);b=f(M,"DIV",{});var fe=d(b);p=f(fe,"LABEL",{for:!0});var we=d(p);r=W(we,"VideoID:"),we.forEach(c),g=f(fe,"BR",{}),k=R(fe),qe(w.$$.fragment,fe),fe.forEach(c),J=R(M),S=f(M,"DIV",{});var Z=d(S);X=f(Z,"DIV",{});var Ce=d(X);ue=W(Ce,"Categories:"),Ce.forEach(c),_e=R(Z);for(let B=0;B<O.length;B+=1)O[B].l(Z);te=R(Z),z=f(Z,"DIV",{});var Ve=d(z);D=W(Ve,"Action Types:"),Ve.forEach(c),Q=R(Z);for(let B=0;B<L.length;B+=1)L[B].l(Z);Z.forEach(c),K=R(M),A=f(M,"DIV",{});var ee=d(A);le=f(ee,"LABEL",{for:!0});var Ue=d(le);pe=W(Ue,"Lock Reason:"),Ue.forEach(c),ve=f(ee,"BR",{}),ge=R(ee),V=f(ee,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),d(V).forEach(c),me=R(ee),Y=f(ee,"DATALIST",{id:!0});var Be=d(Y);for(let B=0;B<y.length;B+=1)y[B].l(Be);Be.forEach(c),ee.forEach(c),be=R(M),P=f(M,"DIV",{class:!0});var ie=d(P);oe=f(ie,"BUTTON",{});var Ge=d(oe);ke=W(Ge,"Check all"),Ge.forEach(c),Ee=R(ie),F=f(ie,"BUTTON",{});var We=d(F);Ie=W(We,"Unlock"),We.forEach(c),Re=R(ie),H=f(ie,"BUTTON",{});var Ke=d(H);Te=W(Ke,"Lock"),Ke.forEach(c),ie.forEach(c),M.forEach(c),n.forEach(c),De=R(x),qe(j.$$.fragment,x),x.forEach(c),T.forEach(c),this.h()},h(){document.title="Lock categories | SponsorBlockControl",m(p,"for","videoid"),m(le,"for","reason"),m(V,"id","reason"),m(V,"cols","80"),m(V,"rows","3"),m(V,"placeholder","Reason..."),m(V,"list","lockreasonsuggestions"),m(Y,"id","lockreasonsuggestions"),F.disabled=de=l[0].length===0||l[1].length===0||l[2]===C.WORKING,H.disabled=he=l[0].length===0||l[1].length===0||l[2]===C.WORKING,m(P,"class","actions"),m(u,"class","form svelte-1ei2iwv"),Fe(u,"working",l[2]===C.WORKING),m(a,"class","container")},m(t,N){ce(t,o,N),ce(t,e,N),s(e,a),s(a,i),s(i,v),s(v,h),s(i,E),s(i,u),s(u,b),s(b,p),s(p,r),s(b,g),s(b,k),He(w,b,null),s(u,J),s(u,S),s(S,X),s(X,ue),s(S,_e);for(let T=0;T<O.length;T+=1)O[T].m(S,null);s(S,te),s(S,z),s(z,D),s(S,Q);for(let T=0;T<L.length;T+=1)L[T].m(S,null);s(u,K),s(u,A),s(A,le),s(le,pe),s(A,ve),s(A,ge),s(A,V),je(V,l[3]),s(A,me),s(A,Y);for(let T=0;T<y.length;T+=1)y[T].m(Y,null);s(u,be),s(u,P),s(P,oe),s(oe,ke),s(P,Ee),s(P,F),s(F,Ie),s(P,Re),s(P,H),s(H,Te),s(a,De),He(j,a,null),$=!0,Oe||(Se=[re(V,"input",l[13]),re(oe,"click",l[8]),re(F,"click",l[14]),re(H,"click",l[15])],Oe=!0)},p(t,[N]){const T={};if(!q&&N&1&&(q=!0,T.value=t[0],ut(()=>q=!1)),w.$set(T),N&18){se=ye;let n;for(n=0;n<se.length;n+=1){const U=$e(t,se,n);O[n]?O[n].p(U,N):(O[n]=et(U),O[n].c(),O[n].m(S,te))}for(;n<O.length;n+=1)O[n].d(1);O.length=se.length}if(N&32){ae=Ne;let n;for(n=0;n<ae.length;n+=1){const U=Ye(t,ae,n);L[n]?L[n].p(U,N):(L[n]=tt(U),L[n].c(),L[n].m(S,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=ae.length}if(N&8&&je(V,t[3]),N&64){ne=t[6];let n;for(n=0;n<ne.length;n+=1){const U=Qe(t,ne,n);y[n]?y[n].p(U,N):(y[n]=lt(U),y[n].c(),y[n].m(Y,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=ne.length}(!$||N&7&&de!==(de=t[0].length===0||t[1].length===0||t[2]===C.WORKING))&&(F.disabled=de),(!$||N&7&&he!==(he=t[0].length===0||t[1].length===0||t[2]===C.WORKING))&&(H.disabled=he),(!$||N&4)&&Fe(u,"working",t[2]===C.WORKING);const x={};N&4&&(x.status=t[2]),j.$set(x)},i(t){$||(Me(w.$$.fragment,t),Me(j.$$.fragment,t),$=!0)},o(t){Ze(w.$$.fragment,t),Ze(j.$$.fragment,t),$=!1},d(t){t&&c(o),t&&c(e),Je(w),Le(O,t),Le(L,t),Le(y,t),Je(j),Oe=!1,_t(Se)}}}function It(l,o,e){let a,i;Xe(l,pt,D=>e(16,a=D)),Xe(l,mt,D=>e(17,i=D));let v=[],h="",E=C.IDLE,u="",b={},p=[...Ne];const r=[...ye.filter(D=>!["poi_highlight","filler","exclusive_access","chapter"].includes(D))];ft(()=>{e(0,h=i.url.searchParams.has("videoID")?i.url.searchParams.get("videoID"):"")});const g=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function k(D=!0){e(4,b={}),e(2,E=C.WORKING);const Q={videoID:h,userID:a.privateUUID,reason:u,categories:v,actionTypes:p},K=await fetch(`${a.sponsorBlockApi}/api/lockCategories`,{method:D?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}).then(function(A){return A.status});K===200&&(e(2,E=C.SUCCESS),e(0,h=""),e(3,u=""),e(1,v=[])),K===400&&e(2,E=C.ERROR_INVALID),K===403&&e(2,E=C.ERROR_UNAUTHORIZED),E===C.WORKING&&e(2,E=C.ERROR_OTHER)}function w(){v.length===0?e(1,v=[...r]):e(1,v=[])}async function q(){const Q=await(await fetch(`${a.sponsorBlockApi}/api/lockReason?videoID=${h}`)).json(),K={};for(const A of Q)K[A.category]=A;e(4,b=K)}const J=[[],[]];function S(D){h=D,e(0,h)}function X(){v=ze(J[1],this.__value,this.checked),e(1,v)}function ue(){p=ze(J[0],this.__value,this.checked),e(5,p)}function _e(){u=this.value,e(3,u)}const te=D=>k(!1),z=D=>k(!0);return l.$$.update=()=>{l.$$.dirty&1&&h&&q()},[h,v,E,u,b,p,g,k,w,S,X,J,ue,_e,te,z]}class St extends st{constructor(o){super(),at(this,o,It,Et,nt,{})}}export{St as default};
