import{S as oe,i as le,s as re,a as G,k as _,q as w,v as ie,W as ue,h as i,c as W,l as f,m as h,r as A,w as de,n as S,b as ae,D as t,Z as ne,x as _e,I as F,f as fe,t as pe,y as me,R as ce,G as he}from"../../../chunks/index-57ef3195.js";import{C as Ie}from"../../../chunks/config-90b35c59.js";import{i as be}from"../../../chunks/utils-f53755c6.js";import{S as ve}from"../../../chunks/Status-26ff45ac.js";import{S as a}from"../../../chunks/BaseStatus-314ac73e.js";function Re(s){let D,o,u,n,r,K,b,p,v,k,C,m,l,I,g,d,R,H,y,M,O,Z,P,j,U,J,q,Q,N,E,X,Y;return N=new ve({props:{status:s[1]}}),{c(){D=G(),o=_("main"),u=_("div"),n=_("fieldset"),r=_("legend"),K=w("Vote on segment"),b=G(),p=_("div"),v=_("label"),k=w("Segment UUID:"),C=_("br"),m=G(),l=_("input"),g=G(),d=_("div"),R=_("button"),H=w("Undo Vote"),M=G(),O=_("button"),Z=w("Downvote"),j=G(),U=_("button"),J=w("Upvote"),Q=G(),ie(N.$$.fragment),this.h()},l(e){ue('[data-svelte="svelte-1dn2k8k"]',document.head).forEach(i),D=W(e),o=f(e,"MAIN",{});var L=h(o);u=f(L,"DIV",{class:!0});var z=h(u);n=f(z,"FIELDSET",{});var T=h(n);r=f(T,"LEGEND",{});var $=h(r);K=A($,"Vote on segment"),$.forEach(i),b=W(T),p=f(T,"DIV",{});var B=h(p);v=f(B,"LABEL",{for:!0});var x=h(v);k=A(x,"Segment UUID:"),x.forEach(i),C=f(B,"BR",{}),m=W(B),l=f(B,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),B.forEach(i),g=W(T),d=f(T,"DIV",{class:!0});var V=h(d);R=f(V,"BUTTON",{});var ee=h(R);H=A(ee,"Undo Vote"),ee.forEach(i),M=W(V),O=f(V,"BUTTON",{});var te=h(O);Z=A(te,"Downvote"),te.forEach(i),j=W(V),U=f(V,"BUTTON",{});var se=h(U);J=A(se,"Upvote"),se.forEach(i),V.forEach(i),T.forEach(i),Q=W(z),de(N.$$.fragment,z),z.forEach(i),L.forEach(i),this.h()},h(){document.title="Vote on segment | SponsorBlockControl",S(v,"for","uuid"),S(l,"id","uuid"),S(l,"type","text"),S(l,"size","64"),S(l,"pattern","[a-f0-9]{64}"),S(l,"placeholder","Segment UUID ..."),l.disabled=I=s[1]===a.WORKING,R.disabled=y=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,O.disabled=P=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,U.disabled=q=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,S(d,"class","actions"),S(u,"class","container")},m(e,c){ae(e,D,c),ae(e,o,c),t(o,u),t(u,n),t(n,r),t(r,K),t(n,b),t(n,p),t(p,v),t(v,k),t(p,C),t(p,m),t(p,l),ne(l,s[0]),t(n,g),t(n,d),t(d,R),t(R,H),t(d,M),t(d,O),t(O,Z),t(d,j),t(d,U),t(U,J),t(u,Q),_e(N,u,null),E=!0,X||(Y=[F(l,"input",s[4]),F(R,"click",s[5]),F(O,"click",s[6]),F(U,"click",s[7])],X=!0)},p(e,[c]){(!E||c&2&&I!==(I=e[1]===a.WORKING))&&(l.disabled=I),c&1&&l.value!==e[0]&&ne(l,e[0]),(!E||c&6&&y!==(y=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(R.disabled=y),(!E||c&6&&P!==(P=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(O.disabled=P),(!E||c&6&&q!==(q=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(U.disabled=q);const L={};c&2&&(L.status=e[1]),N.$set(L)},i(e){E||(fe(N.$$.fragment,e),E=!0)},o(e){pe(N.$$.fragment,e),E=!1},d(e){e&&i(D),e&&i(o),me(N),X=!1,ce(Y)}}}function Oe(s,D,o){let u;he(s,Ie,m=>o(8,u=m));let n=a.IDLE,r="",K=!1;async function b(m,l=0){o(1,n=a.WORKING);const I=new URLSearchParams;I.set("UUID",m),I.set("userID",u.privateUUID),I.set("type",l.toString());const g=await fetch(`${u.sponsorBlockApi}/api/voteOnSponsorTime?${I}`,{method:"POST"}).then(d=>d.status);g===200&&(o(1,n=a.SUCCESS),o(0,r="")),g===400&&o(1,n=a.ERROR_INVALID),g===405&&o(1,n=a.DUPLICATE),n===a.WORKING&&o(1,n=a.ERROR_OTHER)}function p(){r=this.value,o(0,r)}const v=m=>{b(r,20)},k=m=>{b(r,0)},C=m=>{b(r,1)};return s.$$.update=()=>{s.$$.dirty&1&&o(2,K=be(r))},[r,n,K,b,p,v,k,C]}class ge extends oe{constructor(D){super(),le(this,D,Oe,Re,re,{})}}export{ge as default};
