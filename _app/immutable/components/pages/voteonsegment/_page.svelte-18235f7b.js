import{S as oe,i as le,s as re,a as G,k as _,q as w,v as ie,W as ue,h as i,c as W,l as f,m as h,r as A,w as de,n as D,b as ae,D as t,a8 as ne,x as _e,I as F,f as fe,t as pe,y as ce,R as me,G as he}from"../../../chunks/index-a74698fd.js";import{C as Ie}from"../../../chunks/config-1a541b95.js";import{i as be}from"../../../chunks/utils-e0c09108.js";import{a as ve,S as a}from"../../../chunks/Status-b63e8986.js";function Ue(s){let S,o,u,l,r,K,b,p,v,k,C,c,n,I,g,d,U,M,y,j,N,H,P,J,O,Q,q,X,R,E,Y,Z;return R=new ve({props:{status:s[1]}}),{c(){S=G(),o=_("main"),u=_("div"),l=_("fieldset"),r=_("legend"),K=w("Vote on segment"),b=G(),p=_("div"),v=_("label"),k=w("Segment UUID:"),C=_("br"),c=G(),n=_("input"),g=G(),d=_("div"),U=_("button"),M=w("Undo Vote"),j=G(),N=_("button"),H=w("Downvote"),J=G(),O=_("button"),Q=w("Upvote"),X=G(),ie(R.$$.fragment),this.h()},l(e){ue('[data-svelte="svelte-1dn2k8k"]',document.head).forEach(i),S=W(e),o=f(e,"MAIN",{});var L=h(o);u=f(L,"DIV",{class:!0});var z=h(u);l=f(z,"FIELDSET",{});var T=h(l);r=f(T,"LEGEND",{});var $=h(r);K=A($,"Vote on segment"),$.forEach(i),b=W(T),p=f(T,"DIV",{});var B=h(p);v=f(B,"LABEL",{for:!0});var x=h(v);k=A(x,"Segment UUID:"),x.forEach(i),C=f(B,"BR",{}),c=W(B),n=f(B,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),B.forEach(i),g=W(T),d=f(T,"DIV",{class:!0});var V=h(d);U=f(V,"BUTTON",{});var ee=h(U);M=A(ee,"Undo Vote"),ee.forEach(i),j=W(V),N=f(V,"BUTTON",{});var te=h(N);H=A(te,"Downvote"),te.forEach(i),J=W(V),O=f(V,"BUTTON",{});var se=h(O);Q=A(se,"Upvote"),se.forEach(i),V.forEach(i),T.forEach(i),X=W(z),de(R.$$.fragment,z),z.forEach(i),L.forEach(i),this.h()},h(){document.title="Vote on segment | SponsorBlockControl",D(v,"for","uuid"),D(n,"id","uuid"),D(n,"type","text"),D(n,"size","64"),D(n,"pattern","[a-f0-9]{64}"),D(n,"placeholder","Segment UUID ..."),n.disabled=I=s[1]===a.WORKING,U.disabled=y=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,N.disabled=P=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,O.disabled=q=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,D(d,"class","actions"),D(u,"class","container")},m(e,m){ae(e,S,m),ae(e,o,m),t(o,u),t(u,l),t(l,r),t(r,K),t(l,b),t(l,p),t(p,v),t(v,k),t(p,C),t(p,c),t(p,n),ne(n,s[0]),t(l,g),t(l,d),t(d,U),t(U,M),t(d,j),t(d,N),t(N,H),t(d,J),t(d,O),t(O,Q),t(u,X),_e(R,u,null),E=!0,Y||(Z=[F(n,"input",s[4]),F(U,"click",s[5]),F(N,"click",s[6]),F(O,"click",s[7])],Y=!0)},p(e,[m]){(!E||m&2&&I!==(I=e[1]===a.WORKING))&&(n.disabled=I),m&1&&n.value!==e[0]&&ne(n,e[0]),(!E||m&6&&y!==(y=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(U.disabled=y),(!E||m&6&&P!==(P=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(N.disabled=P),(!E||m&6&&q!==(q=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(O.disabled=q);const L={};m&2&&(L.status=e[1]),R.$set(L)},i(e){E||(fe(R.$$.fragment,e),E=!0)},o(e){pe(R.$$.fragment,e),E=!1},d(e){e&&i(S),e&&i(o),ce(R),Y=!1,me(Z)}}}function Ne(s,S,o){let u;he(s,Ie,c=>o(8,u=c));let l=a.IDLE,r="",K=!1;async function b(c,n=0){o(1,l=a.WORKING);const I=new URLSearchParams;I.set("UUID",c),I.set("userID",u.privateUUID),I.set("type",n.toString());const g=await fetch(`${u.sponsorBlockApi}/api/voteOnSponsorTime?${I}`,{method:"POST"}).then(d=>d.status);g===200&&(o(1,l=a.SUCCESS),o(0,r="")),g===400&&o(1,l=a.ERROR_INVALID),g===405&&o(1,l=a.DUPLICATE)}function p(){r=this.value,o(0,r)}const v=c=>{b(r,20)},k=c=>{b(r,0)},C=c=>{b(r,1)};return s.$$.update=()=>{s.$$.dirty&1&&o(2,K=be(r))},[r,l,K,b,p,v,k,C]}class Se extends oe{constructor(S){super(),le(this,S,Ne,Ue,re,{})}}export{Se as default};
