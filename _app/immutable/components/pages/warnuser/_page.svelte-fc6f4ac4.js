import{S as fe,i as pe,s as he,a as y,k as r,q as P,v as me,W as be,h as n,c as S,l as o,m as d,r as q,w as Ue,n as u,H as ie,b as ce,D as e,a8 as X,x as Ee,I as z,f as Ie,t as ve,y as De,R as ge,G as de,o as Re}from"../../../chunks/index-a74698fd.js";import{C as we}from"../../../chunks/config-1a541b95.js";import{a as _e}from"../../../chunks/utils-e0c09108.js";import{a as Te,S as k}from"../../../chunks/Status-b63e8986.js";import{p as ye}from"../../../chunks/stores-fda28953.js";function Se(l){let A,t,_,h,i,g,I,a,f,R,C,L,K,c,p,U,m,O,Z,Q,b,Y,w,v,x,H,$,D,ee,M,te,T,N,se,ae;return T=new Te({props:{status:l[3]}}),{c(){A=y(),t=r("main"),_=r("div"),h=r("fieldset"),i=r("legend"),g=P("Warn user:"),I=y(),a=r("div"),f=r("div"),R=r("label"),C=P("User UUID:"),L=r("br"),K=y(),c=r("input"),p=y(),U=r("div"),m=r("label"),O=P("Warn Reason:"),Z=r("br"),Q=y(),b=r("textarea"),Y=y(),w=r("div"),v=r("button"),x=P("Unwarn"),$=y(),D=r("button"),ee=P("Warn"),te=y(),me(T.$$.fragment),this.h()},l(s){be('[data-svelte="svelte-1exmmzl"]',document.head).forEach(n),A=S(s),t=o(s,"MAIN",{});var B=d(t);_=o(B,"DIV",{class:!0});var j=d(_);h=o(j,"FIELDSET",{});var F=d(h);i=o(F,"LEGEND",{});var re=d(i);g=q(re,"Warn user:"),re.forEach(n),I=S(F),a=o(F,"DIV",{class:!0});var W=d(a);f=o(W,"DIV",{});var V=d(f);R=o(V,"LABEL",{for:!0});var ne=d(R);C=q(ne,"User UUID:"),ne.forEach(n),L=o(V,"BR",{}),K=S(V),c=o(V,"INPUT",{id:!0,type:!0,size:!0,placeholder:!0}),V.forEach(n),p=S(W),U=o(W,"DIV",{});var G=d(U);m=o(G,"LABEL",{for:!0});var oe=d(m);O=q(oe,"Warn Reason:"),oe.forEach(n),Z=o(G,"BR",{}),Q=S(G),b=o(G,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0}),d(b).forEach(n),G.forEach(n),Y=S(W),w=o(W,"DIV",{class:!0});var J=d(w);v=o(J,"BUTTON",{type:!0});var le=d(v);x=q(le,"Unwarn"),le.forEach(n),$=S(J),D=o(J,"BUTTON",{type:!0});var ue=d(D);ee=q(ue,"Warn"),ue.forEach(n),J.forEach(n),W.forEach(n),F.forEach(n),te=S(j),Ue(T.$$.fragment,j),j.forEach(n),B.forEach(n),this.h()},h(){document.title="Warn user | SponsorBlockControl",u(R,"for","uuid"),u(c,"id","uuid"),u(c,"type","text"),u(c,"size","64"),u(c,"placeholder","User UUID..."),u(m,"for","reason"),u(b,"id","reason"),u(b,"cols","80"),u(b,"rows","3"),u(b,"placeholder","Reason..."),u(v,"type","button"),v.disabled=H=!l[1],u(D,"type","button"),D.disabled=M=!l[1],u(w,"class","actions"),u(a,"class","form svelte-fndrlu"),ie(a,"working",l[3]===k.WORKING),u(_,"class","container")},m(s,E){ce(s,A,E),ce(s,t,E),e(t,_),e(_,h),e(h,i),e(i,g),e(h,I),e(h,a),e(a,f),e(f,R),e(R,C),e(f,L),e(f,K),e(f,c),X(c,l[0]),e(a,p),e(a,U),e(U,m),e(m,O),e(U,Z),e(U,Q),e(U,b),X(b,l[2]),e(a,Y),e(a,w),e(w,v),e(v,x),e(w,$),e(w,D),e(D,ee),e(_,te),Ee(T,_,null),N=!0,se||(ae=[z(c,"input",l[5]),z(c,"input",l[6]),z(b,"input",l[7]),z(v,"click",l[8]),z(D,"click",l[9])],se=!0)},p(s,[E]){E&1&&c.value!==s[0]&&X(c,s[0]),E&4&&X(b,s[2]),(!N||E&2&&H!==(H=!s[1]))&&(v.disabled=H),(!N||E&2&&M!==(M=!s[1]))&&(D.disabled=M),(!N||E&8)&&ie(a,"working",s[3]===k.WORKING);const B={};E&8&&(B.status=s[3]),T.$set(B)},i(s){N||(Ie(T.$$.fragment,s),N=!0)},o(s){ve(T.$$.fragment,s),N=!1},d(s){s&&n(A),s&&n(t),De(T),se=!1,ge(ae)}}}function ke(l,A,t){let _,h;de(l,we,p=>t(10,_=p)),de(l,ye,p=>t(11,h=p));let i="",g=!1,I="",a=k.IDLE;Re(()=>{t(0,i=h.url.searchParams.has("userID")?h.url.searchParams.get("userID"):""),t(1,g=_e(i))});async function f(p="warn"){t(3,a=k.WORKING);const U={issuerUserID:_.privateUUID,userID:i,reason:I,enabled:p==="warn"},m=await fetch(`${_.sponsorBlockApi}/api/warnUser`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)}).then(function(O){return O.status});m===200&&(t(3,a=k.SUCCESS),t(0,i=""),t(1,g=!1),t(2,I="")),m===400&&t(3,a=k.ERROR_INVALID),m===403&&t(3,a=k.ERROR_UNAUTHORIZED),m===409&&t(3,a=k.DUPLICATE)}function R(){i=this.value,t(0,i)}const C=p=>{t(1,g=_e(i))};function L(){I=this.value,t(2,I)}return[i,g,I,a,f,R,C,L,p=>{f("unwarn")},p=>{f("warn")}]}class Oe extends fe{constructor(A){super(),pe(this,A,ke,Se,he,{})}}export{Oe as default};
