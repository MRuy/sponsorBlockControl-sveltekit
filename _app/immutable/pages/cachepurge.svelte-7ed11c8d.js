import{S as ue,i as de,s as fe,a3 as _e,a4 as pe,k as U,e as _,t as w,w as ee,R as he,d as i,m as T,c as p,a as h,h as B,x as te,b as K,I as se,g as ae,H as s,y as ne,J as le,a8 as me,q as oe,o as re,B as ie,W as ge,L as ve}from"../chunks/index-dfbae117.js";import{C as Ie}from"../chunks/config-fe9b9627.js";import{S as be,a as l}from"../chunks/Status-73b605ec.js";import{V as Ee}from"../chunks/VideoInput-ffca314c.js";import"../chunks/index-9cf52d15.js";function Re(o){let D,t,r,a,n,O,N,c,m,S,u,d,g,f,q,H,I,b,J,y,Z,E,$,G,j,R,k,F,M;function ce(e){o[4](e)}let z={id:"videoid"};return o[0]!==void 0&&(z.value=o[0]),f=new Ee({props:z}),_e.push(()=>pe(f,"value",ce)),R=new be({props:{status:o[1]}}),{c(){D=U(),t=_("main"),r=_("div"),a=_("fieldset"),n=_("legend"),O=w("Clear cache / Purge all segments"),N=U(),c=_("div"),m=_("div"),S=_("label"),u=w("VideoID:"),d=_("br"),g=U(),ee(f.$$.fragment),H=U(),I=_("div"),b=_("button"),J=w("Clear cache"),Z=U(),E=_("button"),$=w(`Purge all
            segments`),j=U(),ee(R.$$.fragment),this.h()},l(e){he('[data-svelte="svelte-rncy8k"]',document.head).forEach(i),D=T(e),t=p(e,"MAIN",{});var A=h(t);r=p(A,"DIV",{class:!0});var C=h(r);a=p(C,"FIELDSET",{});var L=h(a);n=p(L,"LEGEND",{});var Q=h(n);O=B(Q,"Clear cache / Purge all segments"),Q.forEach(i),N=T(L),c=p(L,"DIV",{class:!0});var P=h(c);m=p(P,"DIV",{});var V=h(m);S=p(V,"LABEL",{for:!0});var X=h(S);u=B(X,"VideoID:"),X.forEach(i),d=p(V,"BR",{}),g=T(V),te(f.$$.fragment,V),V.forEach(i),H=T(P),I=p(P,"DIV",{class:!0});var W=h(I);b=p(W,"BUTTON",{});var Y=h(b);J=B(Y,"Clear cache"),Y.forEach(i),Z=T(W),E=p(W,"BUTTON",{});var x=h(E);$=B(x,`Purge all
            segments`),x.forEach(i),W.forEach(i),P.forEach(i),L.forEach(i),j=T(C),te(R.$$.fragment,C),C.forEach(i),A.forEach(i),this.h()},h(){document.title="Clear cache / Purge all segments | SponsorBlockControl",K(S,"for","videoid"),b.disabled=y=o[0].length===0||o[1]===l.WORKING,E.disabled=G=o[0].length===0||o[1]===l.WORKING,K(I,"class","actions"),K(c,"class","form svelte-fndrlu"),se(c,"working",o[1]===l.WORKING),K(r,"class","container")},m(e,v){ae(e,D,v),ae(e,t,v),s(t,r),s(r,a),s(a,n),s(n,O),s(a,N),s(a,c),s(c,m),s(m,S),s(S,u),s(m,d),s(m,g),ne(f,m,null),s(c,H),s(c,I),s(I,b),s(b,J),s(I,Z),s(I,E),s(E,$),s(r,j),ne(R,r,null),k=!0,F||(M=[le(b,"click",o[5]),le(E,"click",o[6])],F=!0)},p(e,[v]){const A={};!q&&v&1&&(q=!0,A.value=e[0],me(()=>q=!1)),f.$set(A),(!k||v&3&&y!==(y=e[0].length===0||e[1]===l.WORKING))&&(b.disabled=y),(!k||v&3&&G!==(G=e[0].length===0||e[1]===l.WORKING))&&(E.disabled=G),v&2&&se(c,"working",e[1]===l.WORKING);const C={};v&2&&(C.status=e[1]),R.$set(C)},i(e){k||(oe(f.$$.fragment,e),oe(R.$$.fragment,e),k=!0)},o(e){re(f.$$.fragment,e),re(R.$$.fragment,e),k=!1},d(e){e&&i(D),e&&i(t),ie(f),ie(R),F=!1,ge(M)}}}function De(o,D,t){let r;ve(o,Ie,u=>t(7,r=u));let a="",n=l.IDLE;async function O(u=!0){t(1,n=l.WORKING);const d=new URLSearchParams;d.set("videoID",a),d.set("userID",r.privateUUID);const g=await fetch(`${r.sponsorBlockApi}/api/clearCache?${d}`,{method:"POST"}).then(function(f){return f.status});g===200&&(t(1,n=l.SUCCESS),t(0,a="")),g===400&&t(1,n=l.ERROR_INVALID),g===403&&t(1,n=l.ERROR_UNAUTHORIZED)}async function N(){t(1,n=l.WORKING);const u={videoID:a,userID:r.privateUUID},d=await fetch(`${r.sponsorBlockApi}/api/purgeAllSegments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(function(g){return g.status});d===200&&(t(1,n=l.SUCCESS),t(0,a="")),d===400&&t(1,n=l.ERROR_INVALID),d===403&&t(1,n=l.ERROR_UNAUTHORIZED)}function c(u){a=u,t(0,a)}return[a,n,O,N,c,u=>O(),u=>N()]}class Ue extends ue{constructor(D){super(),de(this,D,De,Re,fe,{})}}export{Ue as default};
