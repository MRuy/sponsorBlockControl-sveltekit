import{S as at,i as st,s as nt,a3 as it,a4 as rt,e as _,k as I,t as K,c as d,a as f,d as u,m as T,h as W,b as g,g as ce,H as a,J as re,j as ct,E as ut,w as Pe,R as _t,x as qe,I as je,y as Fe,ab as He,a8 as dt,q as Je,o as Me,B as Xe,K as Oe,W as ft,L as Ze,v as ht,ac as ze}from"../chunks/index-dfbae117.js";import{C as pt}from"../chunks/config-fe9b9627.js";import{c as ye,b as Ne,a as vt,d as gt}from"../chunks/config-89b2e777.js";import{p as mt}from"../chunks/stores-357ca5e2.js";import{S as bt,a as P}from"../chunks/Status-73b605ec.js";import{V as kt}from"../chunks/VideoInput-ffca314c.js";import"../chunks/index-9cf52d15.js";function Qe(l,o,e){const s=l.slice();return s[20]=o[e],s}function Ye(l,o,e){const s=l.slice();return s[23]=o[e],s[25]=e,s}function $e(l,o,e){const s=l.slice();return s[26]=o[e],s[25]=e,s}function xe(l){let o=l[4][l[26]].locked===1?"\u{1F512}":"\u2713",e;return{c(){e=K(o)},l(s){e=W(s,o)},m(s,r){ce(s,e,r)},p(s,r){r&16&&o!==(o=s[4][s[26]].locked===1?"\u{1F512}":"\u2713")&&ct(e,o)},d(s){s&&u(e)}}}function et(l){let o,e,s,r,p,h,L,c,R=vt[l[25]]+"",m,U,C,k,i=l[4][l[26]]&&xe(l);return{c(){o=_("div"),e=_("span"),i&&i.c(),s=I(),r=_("input"),L=I(),c=_("label"),m=K(R),this.h()},l(v){o=d(v,"DIV",{class:!0});var b=f(o);e=d(b,"SPAN",{class:!0});var E=f(e);i&&i.l(E),E.forEach(u),s=T(b),r=d(b,"INPUT",{id:!0,type:!0}),L=T(b),c=d(b,"LABEL",{for:!0});var q=f(c);m=W(q,R),q.forEach(u),b.forEach(u),this.h()},h(){g(e,"class","lock svelte-1ei2iwv"),g(r,"id",p="category_"+l[26]),g(r,"type","checkbox"),r.__value=h=l[26],r.value=r.__value,l[11][1].push(r),g(c,"for",U="category_"+l[26]),g(o,"class","category-option svelte-1ei2iwv")},m(v,b){ce(v,o,b),a(o,e),i&&i.m(e,null),a(o,s),a(o,r),r.checked=~l[1].indexOf(r.__value),a(o,L),a(o,c),a(c,m),C||(k=re(r,"change",l[10]),C=!0)},p(v,b){v[4][v[26]]?i?i.p(v,b):(i=xe(v),i.c(),i.m(e,null)):i&&(i.d(1),i=null),b&2&&(r.checked=~v[1].indexOf(r.__value))},d(v){v&&u(o),i&&i.d(),l[11][1].splice(l[11][1].indexOf(r),1),C=!1,k()}}}function tt(l){let o,e,s,r,p,h,L=gt[l[25]]+"",c,R,m,U,C;return{c(){o=_("div"),e=_("input"),p=I(),h=_("label"),c=K(L),m=I(),this.h()},l(k){o=d(k,"DIV",{class:!0});var i=f(o);e=d(i,"INPUT",{id:!0,type:!0}),p=T(i),h=d(i,"LABEL",{for:!0});var v=f(h);c=W(v,L),v.forEach(u),m=T(i),i.forEach(u),this.h()},h(){g(e,"id",s="actionType_"+l[23]),g(e,"type","checkbox"),e.__value=r=l[23],e.value=e.__value,l[11][0].push(e),g(h,"for",R="actionType_"+l[23]),g(o,"class","actionType-option")},m(k,i){ce(k,o,i),a(o,e),e.checked=~l[5].indexOf(e.__value),a(o,p),a(o,h),a(h,c),a(o,m),U||(C=re(e,"change",l[12]),U=!0)},p(k,i){i&32&&(e.checked=~k[5].indexOf(e.__value))},d(k){k&&u(o),l[11][0].splice(l[11][0].indexOf(e),1),U=!1,C()}}}function lt(l){let o,e;return{c(){o=_("option"),this.h()},l(s){o=d(s,"OPTION",{}),f(o).forEach(u),this.h()},h(){o.__value=e=l[20],o.value=o.__value},m(s,r){ce(s,o,r)},p:ut,d(s){s&&u(o)}}}function Et(l){let o,e,s,r,p,h,L,c,R,m,U,C,k,i,v,b,E,q,ue,_e,ee,z,O,Q,j,w,te,pe,ve,ge,V,me,Y,be,F,le,ke,Ee,H,Ie,fe,Te,J,Re,he,De,M,oe,Le,Se;function ot(t){l[9](t)}let Ae={id:"videoid"};l[0]!==void 0&&(Ae.value=l[0]),i=new kt({props:Ae}),it.push(()=>rt(i,"value",ot));let ae=ye,y=[];for(let t=0;t<ae.length;t+=1)y[t]=et($e(l,ae,t));let se=Ne,N=[];for(let t=0;t<se.length;t+=1)N[t]=tt(Ye(l,se,t));let ne=l[6],S=[];for(let t=0;t<ne.length;t+=1)S[t]=lt(Qe(l,ne,t));return M=new bt({props:{status:l[2]}}),{c(){o=I(),e=_("main"),s=_("div"),r=_("fieldset"),p=_("legend"),h=K("Lock categories"),L=I(),c=_("div"),R=_("div"),m=_("label"),U=K("VideoID:"),C=_("br"),k=I(),Pe(i.$$.fragment),b=I(),E=_("div"),q=_("div"),ue=K("Categories:"),_e=I();for(let t=0;t<y.length;t+=1)y[t].c();ee=I(),z=_("div"),O=K("Action Types:"),Q=I();for(let t=0;t<N.length;t+=1)N[t].c();j=I(),w=_("div"),te=_("label"),pe=K("Lock Reason:"),ve=_("br"),ge=I(),V=_("textarea"),me=I(),Y=_("datalist");for(let t=0;t<S.length;t+=1)S[t].c();be=I(),F=_("div"),le=_("button"),ke=K("Check all"),Ee=I(),H=_("button"),Ie=K("Unlock"),Te=I(),J=_("button"),Re=K("Lock"),De=I(),Pe(M.$$.fragment),this.h()},l(t){_t('[data-svelte="svelte-uaxvgn"]',document.head).forEach(u),o=T(t),e=d(t,"MAIN",{});var D=f(e);s=d(D,"DIV",{class:!0});var $=f(s);r=d($,"FIELDSET",{});var n=f(r);p=d(n,"LEGEND",{});var B=f(p);h=W(B,"Lock categories"),B.forEach(u),L=T(n),c=d(n,"DIV",{class:!0});var X=f(c);R=d(X,"DIV",{});var de=f(R);m=d(de,"LABEL",{for:!0});var we=f(m);U=W(we,"VideoID:"),we.forEach(u),C=d(de,"BR",{}),k=T(de),qe(i.$$.fragment,de),de.forEach(u),b=T(X),E=d(X,"DIV",{});var Z=f(E);q=d(Z,"DIV",{});var Ce=f(q);ue=W(Ce,"Categories:"),Ce.forEach(u),_e=T(Z);for(let G=0;G<y.length;G+=1)y[G].l(Z);ee=T(Z),z=d(Z,"DIV",{});var Ve=f(z);O=W(Ve,"Action Types:"),Ve.forEach(u),Q=T(Z);for(let G=0;G<N.length;G+=1)N[G].l(Z);Z.forEach(u),j=T(X),w=d(X,"DIV",{});var x=f(w);te=d(x,"LABEL",{for:!0});var Ue=f(te);pe=W(Ue,"Lock Reason:"),Ue.forEach(u),ve=d(x,"BR",{}),ge=T(x),V=d(x,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),f(V).forEach(u),me=T(x),Y=d(x,"DATALIST",{id:!0});var Be=f(Y);for(let G=0;G<S.length;G+=1)S[G].l(Be);Be.forEach(u),x.forEach(u),be=T(X),F=d(X,"DIV",{class:!0});var ie=f(F);le=d(ie,"BUTTON",{});var Ge=f(le);ke=W(Ge,"Check all"),Ge.forEach(u),Ee=T(ie),H=d(ie,"BUTTON",{});var Ke=f(H);Ie=W(Ke,"Unlock"),Ke.forEach(u),Te=T(ie),J=d(ie,"BUTTON",{});var We=f(J);Re=W(We,"Lock"),We.forEach(u),ie.forEach(u),X.forEach(u),n.forEach(u),De=T($),qe(M.$$.fragment,$),$.forEach(u),D.forEach(u),this.h()},h(){document.title="Lock categories | SponsorBlockControl",g(m,"for","videoid"),g(te,"for","reason"),g(V,"id","reason"),g(V,"cols","80"),g(V,"rows","3"),g(V,"placeholder","Reason..."),g(V,"list","lockreasonsuggestions"),g(Y,"id","lockreasonsuggestions"),H.disabled=fe=l[0].length===0||l[1].length===0||l[2]===P.WORKING,J.disabled=he=l[0].length===0||l[1].length===0||l[2]===P.WORKING,g(F,"class","actions"),g(c,"class","form svelte-1ei2iwv"),je(c,"working",l[2]===P.WORKING),g(s,"class","container")},m(t,A){ce(t,o,A),ce(t,e,A),a(e,s),a(s,r),a(r,p),a(p,h),a(r,L),a(r,c),a(c,R),a(R,m),a(m,U),a(R,C),a(R,k),Fe(i,R,null),a(c,b),a(c,E),a(E,q),a(q,ue),a(E,_e);for(let D=0;D<y.length;D+=1)y[D].m(E,null);a(E,ee),a(E,z),a(z,O),a(E,Q);for(let D=0;D<N.length;D+=1)N[D].m(E,null);a(c,j),a(c,w),a(w,te),a(te,pe),a(w,ve),a(w,ge),a(w,V),He(V,l[3]),a(w,me),a(w,Y);for(let D=0;D<S.length;D+=1)S[D].m(Y,null);a(c,be),a(c,F),a(F,le),a(le,ke),a(F,Ee),a(F,H),a(H,Ie),a(F,Te),a(F,J),a(J,Re),a(s,De),Fe(M,s,null),oe=!0,Le||(Se=[re(V,"input",l[13]),re(le,"click",l[8]),re(H,"click",l[14]),re(J,"click",l[15])],Le=!0)},p(t,[A]){const D={};if(!v&&A&1&&(v=!0,D.value=t[0],dt(()=>v=!1)),i.$set(D),A&18){ae=ye;let n;for(n=0;n<ae.length;n+=1){const B=$e(t,ae,n);y[n]?y[n].p(B,A):(y[n]=et(B),y[n].c(),y[n].m(E,ee))}for(;n<y.length;n+=1)y[n].d(1);y.length=ae.length}if(A&32){se=Ne;let n;for(n=0;n<se.length;n+=1){const B=Ye(t,se,n);N[n]?N[n].p(B,A):(N[n]=tt(B),N[n].c(),N[n].m(E,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=se.length}if(A&8&&He(V,t[3]),A&64){ne=t[6];let n;for(n=0;n<ne.length;n+=1){const B=Qe(t,ne,n);S[n]?S[n].p(B,A):(S[n]=lt(B),S[n].c(),S[n].m(Y,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=ne.length}(!oe||A&7&&fe!==(fe=t[0].length===0||t[1].length===0||t[2]===P.WORKING))&&(H.disabled=fe),(!oe||A&7&&he!==(he=t[0].length===0||t[1].length===0||t[2]===P.WORKING))&&(J.disabled=he),A&4&&je(c,"working",t[2]===P.WORKING);const $={};A&4&&($.status=t[2]),M.$set($)},i(t){oe||(Je(i.$$.fragment,t),Je(M.$$.fragment,t),oe=!0)},o(t){Me(i.$$.fragment,t),Me(M.$$.fragment,t),oe=!1},d(t){t&&u(o),t&&u(e),Xe(i),Oe(y,t),Oe(N,t),Oe(S,t),Xe(M),Le=!1,ft(Se)}}}function It(l,o,e){let s,r;Ze(l,pt,O=>e(16,s=O)),Ze(l,mt,O=>e(17,r=O));let p=[],h="",L=P.IDLE,c="",R={},m=[...Ne];const U=[...ye.filter(O=>!["poi_highlight","filler","exclusive_access"].includes(O))];ht(()=>{e(0,h=r.url.searchParams.has("videoID")?r.url.searchParams.get("videoID"):"")});const C=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function k(O=!0){e(4,R={}),e(2,L=P.WORKING);const Q={videoID:h,userID:s.privateUUID,reason:c,categories:p,actionTypes:m},j=await fetch(`${s.sponsorBlockApi}/api/lockCategories`,{method:O?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}).then(function(w){return w.status});j===200&&(e(2,L=P.SUCCESS),e(0,h=""),e(3,c=""),e(1,p=[])),j===400&&e(2,L=P.ERROR_INVALID),j===403&&e(2,L=P.ERROR_UNAUTHORIZED)}function i(){p.length===0?e(1,p=[...U]):e(1,p=[])}async function v(){const Q=await(await fetch(`${s.sponsorBlockApi}/api/lockReason?videoID=${h}`)).json(),j={};for(const w of Q)j[w.category]=w;e(4,R=j)}const b=[[],[]];function E(O){h=O,e(0,h)}function q(){p=ze(b[1],this.__value,this.checked),e(1,p)}function ue(){m=ze(b[0],this.__value,this.checked),e(5,m)}function _e(){c=this.value,e(3,c)}const ee=O=>k(!1),z=O=>k(!0);return l.$$.update=()=>{l.$$.dirty&1&&h&&v()},[h,p,L,c,R,m,C,k,i,E,q,b,ue,_e,ee,z]}class St extends at{constructor(o){super(),st(this,o,It,Et,nt,{})}}export{St as default};
