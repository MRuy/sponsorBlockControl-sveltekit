import{S as oe,i as le,s as re,k as G,e as _,t as w,w as ie,R as ue,d as i,m as W,c as f,a as h,h as A,x as de,b as g,g as ae,H as t,ab as ne,y as _e,J as F,q as fe,o as pe,B as me,W as ce,L as he}from"../chunks/index-dfbae117.js";import{C as be}from"../chunks/config-fe9b9627.js";import{i as Ie}from"../chunks/utils-fa7e4892.js";import{S as ve,a}from"../chunks/Status-73b605ec.js";import"../chunks/index-9cf52d15.js";import"../chunks/userInfo-8e2fd6d8.js";function Ue(s){let S,o,u,l,r,K,I,p,v,k,L,m,n,b,D,d,U,H,y,J,N,M,P,j,O,Q,q,X,R,E,Y,Z;return R=new ve({props:{status:s[1]}}),{c(){S=G(),o=_("main"),u=_("div"),l=_("fieldset"),r=_("legend"),K=w("Vote on segment"),I=G(),p=_("div"),v=_("label"),k=w("Segment UUID:"),L=_("br"),m=G(),n=_("input"),D=G(),d=_("div"),U=_("button"),H=w("Undo Vote"),J=G(),N=_("button"),M=w("Downvote"),j=G(),O=_("button"),Q=w("Upvote"),X=G(),ie(R.$$.fragment),this.h()},l(e){ue('[data-svelte="svelte-1dn2k8k"]',document.head).forEach(i),S=W(e),o=f(e,"MAIN",{});var B=h(o);u=f(B,"DIV",{class:!0});var z=h(u);l=f(z,"FIELDSET",{});var T=h(l);r=f(T,"LEGEND",{});var $=h(r);K=A($,"Vote on segment"),$.forEach(i),I=W(T),p=f(T,"DIV",{});var C=h(p);v=f(C,"LABEL",{for:!0});var x=h(v);k=A(x,"Segment UUID:"),x.forEach(i),L=f(C,"BR",{}),m=W(C),n=f(C,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),C.forEach(i),D=W(T),d=f(T,"DIV",{class:!0});var V=h(d);U=f(V,"BUTTON",{});var ee=h(U);H=A(ee,"Undo Vote"),ee.forEach(i),J=W(V),N=f(V,"BUTTON",{});var te=h(N);M=A(te,"Downvote"),te.forEach(i),j=W(V),O=f(V,"BUTTON",{});var se=h(O);Q=A(se,"Upvote"),se.forEach(i),V.forEach(i),T.forEach(i),X=W(z),de(R.$$.fragment,z),z.forEach(i),B.forEach(i),this.h()},h(){document.title="Vote on segment | SponsorBlockControl",g(v,"for","uuid"),g(n,"id","uuid"),g(n,"type","text"),g(n,"size","64"),g(n,"pattern","[a-f0-9]{64}"),g(n,"placeholder","Segment UUID ..."),n.disabled=b=s[1]===a.WORKING,U.disabled=y=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,N.disabled=P=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,O.disabled=q=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,g(d,"class","actions"),g(u,"class","container")},m(e,c){ae(e,S,c),ae(e,o,c),t(o,u),t(u,l),t(l,r),t(r,K),t(l,I),t(l,p),t(p,v),t(v,k),t(p,L),t(p,m),t(p,n),ne(n,s[0]),t(l,D),t(l,d),t(d,U),t(U,H),t(d,J),t(d,N),t(N,M),t(d,j),t(d,O),t(O,Q),t(u,X),_e(R,u,null),E=!0,Y||(Z=[F(n,"input",s[4]),F(U,"click",s[5]),F(N,"click",s[6]),F(O,"click",s[7])],Y=!0)},p(e,[c]){(!E||c&2&&b!==(b=e[1]===a.WORKING))&&(n.disabled=b),c&1&&n.value!==e[0]&&ne(n,e[0]),(!E||c&6&&y!==(y=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(U.disabled=y),(!E||c&6&&P!==(P=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(N.disabled=P),(!E||c&6&&q!==(q=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(O.disabled=q);const B={};c&2&&(B.status=e[1]),R.$set(B)},i(e){E||(fe(R.$$.fragment,e),E=!0)},o(e){pe(R.$$.fragment,e),E=!1},d(e){e&&i(S),e&&i(o),me(R),Y=!1,ce(Z)}}}function Ne(s,S,o){let u;he(s,be,m=>o(8,u=m));let l=a.IDLE,r="",K=!1;async function I(m,n=0){o(1,l=a.WORKING);const b=new URLSearchParams;b.set("UUID",m),b.set("userID",u.privateUUID),b.set("type",n.toString());const D=await fetch(`${u.sponsorBlockApi}/api/voteOnSponsorTime?${b}`,{method:"POST"}).then(d=>d.status);D===200&&(o(1,l=a.SUCCESS),o(0,r="")),D===400&&o(1,l=a.ERROR_INVALID),D===405&&o(1,l=a.DUPLICATE)}function p(){r=this.value,o(0,r)}const v=m=>{I(r,20)},k=m=>{I(r,0)},L=m=>{I(r,1)};return s.$$.update=()=>{s.$$.dirty&1&&o(2,K=Ie(r))},[r,l,K,I,p,v,k,L]}class Ge extends oe{constructor(S){super(),le(this,S,Ne,Ue,re,{})}}export{Ge as default};
