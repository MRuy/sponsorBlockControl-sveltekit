import{S as ue,i as de,s as fe,a4 as _e,a5 as he,k as U,e as _,t as w,w as ee,R as pe,d as i,m as T,c as h,a as p,h as B,x as te,b as K,I as se,g as ae,G as s,y as ne,J as oe,a6 as me,q as le,o as re,B as ie,W as ge,L as ve}from"../chunks/vendor-029251f6.js";import{C as Ie}from"../chunks/config-b3d4a71f.js";import{a as be,S as o}from"../chunks/Status-95729226.js";import{V as Ee}from"../chunks/VideoInput-269e9c3d.js";function Re(l){let D,t,r,a,n,C,O,c,m,S,u,d,g,f,j,q,I,b,H,G,J,E,Z,y,$,R,N,F,M;function ce(e){l[4](e)}let z={id:"videoid"};return l[0]!==void 0&&(z.value=l[0]),f=new Ee({props:z}),_e.push(()=>he(f,"value",ce)),R=new be({props:{status:l[1]}}),{c(){D=U(),t=_("main"),r=_("div"),a=_("fieldset"),n=_("legend"),C=w("Clear cache / Purge all segments"),O=U(),c=_("div"),m=_("div"),S=_("label"),u=w("VideoID:"),d=_("br"),g=U(),ee(f.$$.fragment),q=U(),I=_("div"),b=_("button"),H=w("Clear cache"),J=U(),E=_("button"),Z=w(`Purge all
            segments`),$=U(),ee(R.$$.fragment),this.h()},l(e){pe('[data-svelte="svelte-rncy8k"]',document.head).forEach(i),D=T(e),t=h(e,"MAIN",{});var V=p(t);r=h(V,"DIV",{class:!0});var k=p(r);a=h(k,"FIELDSET",{});var L=p(a);n=h(L,"LEGEND",{});var Q=p(n);C=B(Q,"Clear cache / Purge all segments"),Q.forEach(i),O=T(L),c=h(L,"DIV",{class:!0});var P=p(c);m=h(P,"DIV",{});var A=p(m);S=h(A,"LABEL",{for:!0});var X=p(S);u=B(X,"VideoID:"),X.forEach(i),d=h(A,"BR",{}),g=T(A),te(f.$$.fragment,A),A.forEach(i),q=T(P),I=h(P,"DIV",{class:!0});var W=p(I);b=h(W,"BUTTON",{});var Y=p(b);H=B(Y,"Clear cache"),Y.forEach(i),J=T(W),E=h(W,"BUTTON",{});var x=p(E);Z=B(x,`Purge all
            segments`),x.forEach(i),W.forEach(i),P.forEach(i),L.forEach(i),$=T(k),te(R.$$.fragment,k),k.forEach(i),V.forEach(i),this.h()},h(){document.title="Clear cache / Purge all segments | SponsorBlockControl",K(S,"for","videoid"),b.disabled=G=l[0].length===0||l[1]===o.WORKING,E.disabled=y=l[0].length===0||l[1]===o.WORKING,K(I,"class","actions"),K(c,"class","form svelte-fndrlu"),se(c,"working",l[1]===o.WORKING),K(r,"class","container")},m(e,v){ae(e,D,v),ae(e,t,v),s(t,r),s(r,a),s(a,n),s(n,C),s(a,O),s(a,c),s(c,m),s(m,S),s(S,u),s(m,d),s(m,g),ne(f,m,null),s(c,q),s(c,I),s(I,b),s(b,H),s(I,J),s(I,E),s(E,Z),s(r,$),ne(R,r,null),N=!0,F||(M=[oe(b,"click",l[5]),oe(E,"click",l[6])],F=!0)},p(e,[v]){const V={};!j&&v&1&&(j=!0,V.value=e[0],me(()=>j=!1)),f.$set(V),(!N||v&3&&G!==(G=e[0].length===0||e[1]===o.WORKING))&&(b.disabled=G),(!N||v&3&&y!==(y=e[0].length===0||e[1]===o.WORKING))&&(E.disabled=y),v&2&&se(c,"working",e[1]===o.WORKING);const k={};v&2&&(k.status=e[1]),R.$set(k)},i(e){N||(le(f.$$.fragment,e),le(R.$$.fragment,e),N=!0)},o(e){re(f.$$.fragment,e),re(R.$$.fragment,e),N=!1},d(e){e&&i(D),e&&i(t),ie(f),ie(R),F=!1,ge(M)}}}function De(l,D,t){let r;ve(l,Ie,u=>t(7,r=u));let a="",n=o.IDLE;async function C(u=!0){t(1,n=o.WORKING);const d=new URLSearchParams;d.set("videoID",a),d.set("userID",r.privateUUID);const g=await fetch(`${r.sponsorBlockApi}/api/clearCache?${d}`,{method:"POST"}).then(function(f){return f.status});g===200&&(t(1,n=o.SUCCESS),t(0,a="")),g===400&&t(1,n=o.ERROR_INVALID),g===403&&t(1,n=o.ERROR_UNAUTHORIZED)}async function O(){t(1,n=o.WORKING);const u={videoID:a,userID:r.privateUUID},d=await fetch(`${r.sponsorBlockApi}/api/purgeAllSegments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(function(g){return g.status});d===200&&(t(1,n=o.SUCCESS),t(0,a="")),d===400&&t(1,n=o.ERROR_INVALID),d===403&&t(1,n=o.ERROR_UNAUTHORIZED)}function c(u){a=u,t(0,a)}return[a,n,C,O,c,u=>C(),u=>O()]}class Ne extends ue{constructor(D){super();de(this,D,De,Re,fe,{})}}export{Ne as default};
