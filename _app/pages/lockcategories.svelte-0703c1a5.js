import{S as Xe,i as Ze,s as ze,a3 as Qe,a4 as Ye,e as u,k as R,t as K,c as d,a as h,d as c,n as D,g as W,b as k,f as se,E as o,H as ae,h as $e,F as xe,j as we,P as et,m as ye,G as Ce,o as Ue,a0 as Ve,a5 as tt,x as Be,u as je,v as Ge,I as Ke,U as lt,J as We,a6 as ot}from"../chunks/vendor-9fba9fd8.js";import{C as st}from"../chunks/config-c3a6b1a1.js";import{c as Ee,a as at}from"../chunks/config-8bce724e.js";import{p as nt}from"../chunks/stores-3abfd37d.js";import{a as it,S as C}from"../chunks/Status-de6d2c9d.js";import{V as rt}from"../chunks/VideoInput-cd7417ae.js";function qe(t,s,l){const a=t.slice();return a[17]=s[l],a}function Pe(t,s,l){const a=t.slice();return a[20]=s[l],a[22]=l,a}function Fe(t){let s=(t[4][t[20]].locked===1?"\u{1F512}":"\u2713")+"",l;return{c(){l=K(s)},l(a){l=W(a,s)},m(a,n){se(a,l,n)},p(a,n){n&16&&s!==(s=(a[4][a[20]].locked===1?"\u{1F512}":"\u2713")+"")&&$e(l,s)},d(a){a&&c(l)}}}function He(t){let s,l,a,n,g,O,T,r,E=at[t[22]]+"",A,B,j,G,I,_=t[4][t[20]]&&Fe(t);return{c(){s=u("div"),l=u("span"),_&&_.c(),a=R(),n=u("input"),T=R(),r=u("label"),A=K(E),j=R(),this.h()},l(p){s=d(p,"DIV",{class:!0});var f=h(s);l=d(f,"SPAN",{class:!0});var U=h(l);_&&_.l(U),U.forEach(c),a=D(f),n=d(f,"INPUT",{id:!0,type:!0}),T=D(f),r=d(f,"LABEL",{for:!0});var q=h(r);A=W(q,E),q.forEach(c),j=D(f),f.forEach(c),this.h()},h(){k(l,"class","lock svelte-1ei2iwv"),k(n,"id",g="category_"+t[20]),k(n,"type","checkbox"),n.__value=O=t[20],n.value=n.__value,t[10][0].push(n),k(r,"for",B="category_"+t[20]),k(s,"class","category-option svelte-1ei2iwv")},m(p,f){se(p,s,f),o(s,l),_&&_.m(l,null),o(s,a),o(s,n),n.checked=~t[1].indexOf(n.__value),o(s,T),o(s,r),o(r,A),o(s,j),G||(I=ae(n,"change",t[9]),G=!0)},p(p,f){p[4][p[20]]?_?_.p(p,f):(_=Fe(p),_.c(),_.m(l,null)):_&&(_.d(1),_=null),f&2&&(n.checked=~p[1].indexOf(n.__value))},d(p){p&&c(s),_&&_.d(),t[10][0].splice(t[10][0].indexOf(n),1),G=!1,I()}}}function Je(t){let s,l;return{c(){s=u("option"),this.h()},l(a){s=d(a,"OPTION",{}),h(s).forEach(c),this.h()},h(){s.__value=l=t[17],s.value=s.__value},m(a,n){se(a,s,n)},p:xe,d(a){a&&c(s)}}}function ct(t){let s,l,a,n,g,O,T,r,E,A,B,j,G,I,_,p,f,U,q,L,X,v,y,ce,ue,de,w,fe,Z,_e,V,$,he,pe,P,ve,ne,ge,F,me,ie,be,H,x,ke,Ie;function Me(e){t[8](e)}let Re={id:"videoid"};t[0]!==void 0&&(Re.value=t[0]),I=new rt({props:Re}),Qe.push(()=>Ye(I,"value",Me));let ee=Ee,m=[];for(let e=0;e<ee.length;e+=1)m[e]=He(Pe(t,ee,e));let te=t[5],b=[];for(let e=0;e<te.length;e+=1)b[e]=Je(qe(t,te,e));return H=new it({props:{status:t[2]}}),{c(){s=R(),l=u("main"),a=u("div"),n=u("fieldset"),g=u("legend"),O=K("Lock categories"),T=R(),r=u("div"),E=u("div"),A=u("label"),B=K("VideoID:"),j=u("br"),G=R(),we(I.$$.fragment),p=R(),f=u("div"),U=u("div"),q=K("Categories:"),L=R();for(let e=0;e<m.length;e+=1)m[e].c();X=R(),v=u("div"),y=u("label"),ce=K("Lock Reason:"),ue=u("br"),de=R(),w=u("textarea"),fe=R(),Z=u("datalist");for(let e=0;e<b.length;e+=1)b[e].c();_e=R(),V=u("div"),$=u("button"),he=K("Check all"),pe=R(),P=u("button"),ve=K("Unlock"),ge=R(),F=u("button"),me=K("Lock"),be=R(),we(H.$$.fragment),this.h()},l(e){et('[data-svelte="svelte-uaxvgn"]',document.head).forEach(c),s=D(e),l=d(e,"MAIN",{});var N=h(l);a=d(N,"DIV",{class:!0});var z=h(a);n=d(z,"FIELDSET",{});var i=h(n);g=d(i,"LEGEND",{});var J=h(g);O=W(J,"Lock categories"),J.forEach(c),T=D(i),r=d(i,"DIV",{class:!0});var M=h(r);E=d(M,"DIV",{});var oe=h(E);A=d(oe,"LABEL",{for:!0});var De=h(A);B=W(De,"VideoID:"),De.forEach(c),j=d(oe,"BR",{}),G=D(oe),ye(I.$$.fragment,oe),oe.forEach(c),p=D(M),f=d(M,"DIV",{});var re=h(f);U=d(re,"DIV",{});var Le=h(U);q=W(Le,"Categories:"),Le.forEach(c),L=D(re);for(let Y=0;Y<m.length;Y+=1)m[Y].l(re);re.forEach(c),X=D(M),v=d(M,"DIV",{});var Q=h(v);y=d(Q,"LABEL",{for:!0});var Se=h(y);ce=W(Se,"Lock Reason:"),Se.forEach(c),ue=d(Q,"BR",{}),de=D(Q),w=d(Q,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),h(w).forEach(c),fe=D(Q),Z=d(Q,"DATALIST",{id:!0});var Oe=h(Z);for(let Y=0;Y<b.length;Y+=1)b[Y].l(Oe);Oe.forEach(c),Q.forEach(c),_e=D(M),V=d(M,"DIV",{class:!0});var le=h(V);$=d(le,"BUTTON",{});var Te=h($);he=W(Te,"Check all"),Te.forEach(c),pe=D(le),P=d(le,"BUTTON",{});var Ne=h(P);ve=W(Ne,"Unlock"),Ne.forEach(c),ge=D(le),F=d(le,"BUTTON",{});var Ae=h(F);me=W(Ae,"Lock"),Ae.forEach(c),le.forEach(c),M.forEach(c),i.forEach(c),be=D(z),ye(H.$$.fragment,z),z.forEach(c),N.forEach(c),this.h()},h(){document.title="Lock categories | SponsorBlockControl",k(A,"for","videoid"),k(y,"for","reason"),k(w,"id","reason"),k(w,"cols","80"),k(w,"rows","3"),k(w,"placeholder","Reason..."),k(w,"list","lockreasonsuggestions"),k(Z,"id","lockreasonsuggestions"),P.disabled=ne=t[0].length===0||t[1].length===0||t[2]===C.WORKING,F.disabled=ie=t[0].length===0||t[1].length===0||t[2]===C.WORKING,k(V,"class","actions"),k(r,"class","form svelte-1ei2iwv"),Ce(r,"working",t[2]===C.WORKING),k(a,"class","container")},m(e,S){se(e,s,S),se(e,l,S),o(l,a),o(a,n),o(n,g),o(g,O),o(n,T),o(n,r),o(r,E),o(E,A),o(A,B),o(E,j),o(E,G),Ue(I,E,null),o(r,p),o(r,f),o(f,U),o(U,q),o(f,L);for(let N=0;N<m.length;N+=1)m[N].m(f,null);o(r,X),o(r,v),o(v,y),o(y,ce),o(v,ue),o(v,de),o(v,w),Ve(w,t[3]),o(v,fe),o(v,Z);for(let N=0;N<b.length;N+=1)b[N].m(Z,null);o(r,_e),o(r,V),o(V,$),o($,he),o(V,pe),o(V,P),o(P,ve),o(V,ge),o(V,F),o(F,me),o(a,be),Ue(H,a,null),x=!0,ke||(Ie=[ae(w,"input",t[11]),ae($,"click",t[7]),ae(P,"click",t[12]),ae(F,"click",t[13])],ke=!0)},p(e,[S]){const N={};if(!_&&S&1&&(_=!0,N.value=e[0],tt(()=>_=!1)),I.$set(N),S&18){ee=Ee;let i;for(i=0;i<ee.length;i+=1){const J=Pe(e,ee,i);m[i]?m[i].p(J,S):(m[i]=He(J),m[i].c(),m[i].m(f,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=ee.length}if(S&8&&Ve(w,e[3]),S&32){te=e[5];let i;for(i=0;i<te.length;i+=1){const J=qe(e,te,i);b[i]?b[i].p(J,S):(b[i]=Je(J),b[i].c(),b[i].m(Z,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=te.length}(!x||S&7&&ne!==(ne=e[0].length===0||e[1].length===0||e[2]===C.WORKING))&&(P.disabled=ne),(!x||S&7&&ie!==(ie=e[0].length===0||e[1].length===0||e[2]===C.WORKING))&&(F.disabled=ie),S&4&&Ce(r,"working",e[2]===C.WORKING);const z={};S&4&&(z.status=e[2]),H.$set(z)},i(e){x||(Be(I.$$.fragment,e),Be(H.$$.fragment,e),x=!0)},o(e){je(I.$$.fragment,e),je(H.$$.fragment,e),x=!1},d(e){e&&c(s),e&&c(l),Ge(I),Ke(m,e),Ke(b,e),Ge(H),ke=!1,lt(Ie)}}}function ut(t,s,l){let a,n;We(t,st,L=>l(14,a=L)),We(t,nt,L=>l(15,n=L));let g=[],O=n.query.has("videoID")?n.query.get("videoID"):"",T=C.IDLE,r="",E={};const A=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function B(L=!0){l(4,E={}),l(2,T=C.WORKING);const X={videoID:O,userID:a.privateUUID,reason:r,categories:g},v=await fetch(`${a.sponsorBlockApi}/api/lockCategories`,{method:L?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(function(y){return y.status});v===200&&(l(2,T=C.SUCCESS),l(0,O=""),l(3,r=""),l(1,g=[])),v===400&&l(2,T=C.ERROR_INVALID),v===403&&l(2,T=C.ERROR_UNAUTHORIZED)}function j(){g.length===0?l(1,g=[...Ee]):l(1,g=[])}async function G(){const X=await(await fetch(`${a.sponsorBlockApi}/api/lockReason?videoID=${O}`)).json(),v={};for(const y of X)v[y.category]=y;l(4,E=v)}const I=[[]];function _(L){O=L,l(0,O)}function p(){g=ot(I[0],this.__value,this.checked),l(1,g)}function f(){r=this.value,l(3,r)}const U=L=>B(!1),q=L=>B(!0);return t.$$.update=()=>{t.$$.dirty&1&&O&&G()},[O,g,T,r,E,A,B,j,_,p,I,f,U,q]}class gt extends Xe{constructor(s){super();Ze(this,s,ut,ct,ze,{})}}export{gt as default};
