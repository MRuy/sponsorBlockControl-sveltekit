import{S as Xe,i as Ze,s as ze,a4 as Qe,a5 as Ye,e as u,k as R,t as K,c as d,a as h,d as c,m as D,h as W,b,g as se,G as o,J as ae,j as $e,H as xe,w as Ae,R as et,x as Ce,I as Ve,y as ye,a1 as Ue,a6 as tt,q as Be,o as je,B as Ge,K as Ke,W as lt,L as We,v as ot,a7 as st}from"../chunks/vendor-029251f6.js";import{C as at}from"../chunks/config-b3d4a71f.js";import{c as Ee,a as nt}from"../chunks/config-8bce724e.js";import{p as it}from"../chunks/stores-4307d1b5.js";import{a as rt,S as V}from"../chunks/Status-95729226.js";import{V as ct}from"../chunks/VideoInput-269e9c3d.js";function Pe(t,s,l){const a=t.slice();return a[17]=s[l],a}function qe(t,s,l){const a=t.slice();return a[20]=s[l],a[22]=l,a}function Fe(t){let s=(t[4][t[20]].locked===1?"\u{1F512}":"\u2713")+"",l;return{c(){l=K(s)},l(a){l=W(a,s)},m(a,n){se(a,l,n)},p(a,n){n&16&&s!==(s=(a[4][a[20]].locked===1?"\u{1F512}":"\u2713")+"")&&$e(l,s)},d(a){a&&c(l)}}}function He(t){let s,l,a,n,g,L,T,r,E=nt[t[22]]+"",w,B,j,G,I,f=t[4][t[20]]&&Fe(t);return{c(){s=u("div"),l=u("span"),f&&f.c(),a=R(),n=u("input"),T=R(),r=u("label"),w=K(E),j=R(),this.h()},l(p){s=d(p,"DIV",{class:!0});var _=h(s);l=d(_,"SPAN",{class:!0});var y=h(l);f&&f.l(y),y.forEach(c),a=D(_),n=d(_,"INPUT",{id:!0,type:!0}),T=D(_),r=d(_,"LABEL",{for:!0});var P=h(r);w=W(P,E),P.forEach(c),j=D(_),_.forEach(c),this.h()},h(){b(l,"class","lock svelte-1ei2iwv"),b(n,"id",g="category_"+t[20]),b(n,"type","checkbox"),n.__value=L=t[20],n.value=n.__value,t[10][0].push(n),b(r,"for",B="category_"+t[20]),b(s,"class","category-option svelte-1ei2iwv")},m(p,_){se(p,s,_),o(s,l),f&&f.m(l,null),o(s,a),o(s,n),n.checked=~t[1].indexOf(n.__value),o(s,T),o(s,r),o(r,w),o(s,j),G||(I=ae(n,"change",t[9]),G=!0)},p(p,_){p[4][p[20]]?f?f.p(p,_):(f=Fe(p),f.c(),f.m(l,null)):f&&(f.d(1),f=null),_&2&&(n.checked=~p[1].indexOf(n.__value))},d(p){p&&c(s),f&&f.d(),t[10][0].splice(t[10][0].indexOf(n),1),G=!1,I()}}}function Je(t){let s,l;return{c(){s=u("option"),this.h()},l(a){s=d(a,"OPTION",{}),h(s).forEach(c),this.h()},h(){s.__value=l=t[17],s.value=s.__value},m(a,n){se(a,s,n)},p:xe,d(a){a&&c(s)}}}function ut(t){let s,l,a,n,g,L,T,r,E,w,B,j,G,I,f,p,_,y,P,S,X,v,C,ce,ue,de,A,_e,Z,fe,U,$,he,pe,q,ve,ne,ge,F,me,ie,ke,H,x,be,Ie;function Me(e){t[8](e)}let Re={id:"videoid"};t[0]!==void 0&&(Re.value=t[0]),I=new ct({props:Re}),Qe.push(()=>Ye(I,"value",Me));let ee=Ee,m=[];for(let e=0;e<ee.length;e+=1)m[e]=He(qe(t,ee,e));let te=t[5],k=[];for(let e=0;e<te.length;e+=1)k[e]=Je(Pe(t,te,e));return H=new rt({props:{status:t[2]}}),{c(){s=R(),l=u("main"),a=u("div"),n=u("fieldset"),g=u("legend"),L=K("Lock categories"),T=R(),r=u("div"),E=u("div"),w=u("label"),B=K("VideoID:"),j=u("br"),G=R(),Ae(I.$$.fragment),p=R(),_=u("div"),y=u("div"),P=K("Categories:"),S=R();for(let e=0;e<m.length;e+=1)m[e].c();X=R(),v=u("div"),C=u("label"),ce=K("Lock Reason:"),ue=u("br"),de=R(),A=u("textarea"),_e=R(),Z=u("datalist");for(let e=0;e<k.length;e+=1)k[e].c();fe=R(),U=u("div"),$=u("button"),he=K("Check all"),pe=R(),q=u("button"),ve=K("Unlock"),ge=R(),F=u("button"),me=K("Lock"),ke=R(),Ae(H.$$.fragment),this.h()},l(e){et('[data-svelte="svelte-uaxvgn"]',document.head).forEach(c),s=D(e),l=d(e,"MAIN",{});var N=h(l);a=d(N,"DIV",{class:!0});var z=h(a);n=d(z,"FIELDSET",{});var i=h(n);g=d(i,"LEGEND",{});var J=h(g);L=W(J,"Lock categories"),J.forEach(c),T=D(i),r=d(i,"DIV",{class:!0});var M=h(r);E=d(M,"DIV",{});var oe=h(E);w=d(oe,"LABEL",{for:!0});var De=h(w);B=W(De,"VideoID:"),De.forEach(c),j=d(oe,"BR",{}),G=D(oe),Ce(I.$$.fragment,oe),oe.forEach(c),p=D(M),_=d(M,"DIV",{});var re=h(_);y=d(re,"DIV",{});var Le=h(y);P=W(Le,"Categories:"),Le.forEach(c),S=D(re);for(let Y=0;Y<m.length;Y+=1)m[Y].l(re);re.forEach(c),X=D(M),v=d(M,"DIV",{});var Q=h(v);C=d(Q,"LABEL",{for:!0});var Se=h(C);ce=W(Se,"Lock Reason:"),Se.forEach(c),ue=d(Q,"BR",{}),de=D(Q),A=d(Q,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),h(A).forEach(c),_e=D(Q),Z=d(Q,"DATALIST",{id:!0});var Oe=h(Z);for(let Y=0;Y<k.length;Y+=1)k[Y].l(Oe);Oe.forEach(c),Q.forEach(c),fe=D(M),U=d(M,"DIV",{class:!0});var le=h(U);$=d(le,"BUTTON",{});var Te=h($);he=W(Te,"Check all"),Te.forEach(c),pe=D(le),q=d(le,"BUTTON",{});var Ne=h(q);ve=W(Ne,"Unlock"),Ne.forEach(c),ge=D(le),F=d(le,"BUTTON",{});var we=h(F);me=W(we,"Lock"),we.forEach(c),le.forEach(c),M.forEach(c),i.forEach(c),ke=D(z),Ce(H.$$.fragment,z),z.forEach(c),N.forEach(c),this.h()},h(){document.title="Lock categories | SponsorBlockControl",b(w,"for","videoid"),b(C,"for","reason"),b(A,"id","reason"),b(A,"cols","80"),b(A,"rows","3"),b(A,"placeholder","Reason..."),b(A,"list","lockreasonsuggestions"),b(Z,"id","lockreasonsuggestions"),q.disabled=ne=t[0].length===0||t[1].length===0||t[2]===V.WORKING,F.disabled=ie=t[0].length===0||t[1].length===0||t[2]===V.WORKING,b(U,"class","actions"),b(r,"class","form svelte-1ei2iwv"),Ve(r,"working",t[2]===V.WORKING),b(a,"class","container")},m(e,O){se(e,s,O),se(e,l,O),o(l,a),o(a,n),o(n,g),o(g,L),o(n,T),o(n,r),o(r,E),o(E,w),o(w,B),o(E,j),o(E,G),ye(I,E,null),o(r,p),o(r,_),o(_,y),o(y,P),o(_,S);for(let N=0;N<m.length;N+=1)m[N].m(_,null);o(r,X),o(r,v),o(v,C),o(C,ce),o(v,ue),o(v,de),o(v,A),Ue(A,t[3]),o(v,_e),o(v,Z);for(let N=0;N<k.length;N+=1)k[N].m(Z,null);o(r,fe),o(r,U),o(U,$),o($,he),o(U,pe),o(U,q),o(q,ve),o(U,ge),o(U,F),o(F,me),o(a,ke),ye(H,a,null),x=!0,be||(Ie=[ae(A,"input",t[11]),ae($,"click",t[7]),ae(q,"click",t[12]),ae(F,"click",t[13])],be=!0)},p(e,[O]){const N={};if(!f&&O&1&&(f=!0,N.value=e[0],tt(()=>f=!1)),I.$set(N),O&18){ee=Ee;let i;for(i=0;i<ee.length;i+=1){const J=qe(e,ee,i);m[i]?m[i].p(J,O):(m[i]=He(J),m[i].c(),m[i].m(_,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=ee.length}if(O&8&&Ue(A,e[3]),O&32){te=e[5];let i;for(i=0;i<te.length;i+=1){const J=Pe(e,te,i);k[i]?k[i].p(J,O):(k[i]=Je(J),k[i].c(),k[i].m(Z,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=te.length}(!x||O&7&&ne!==(ne=e[0].length===0||e[1].length===0||e[2]===V.WORKING))&&(q.disabled=ne),(!x||O&7&&ie!==(ie=e[0].length===0||e[1].length===0||e[2]===V.WORKING))&&(F.disabled=ie),O&4&&Ve(r,"working",e[2]===V.WORKING);const z={};O&4&&(z.status=e[2]),H.$set(z)},i(e){x||(Be(I.$$.fragment,e),Be(H.$$.fragment,e),x=!0)},o(e){je(I.$$.fragment,e),je(H.$$.fragment,e),x=!1},d(e){e&&c(s),e&&c(l),Ge(I),Ke(m,e),Ke(k,e),Ge(H),be=!1,lt(Ie)}}}function dt(t,s,l){let a,n;We(t,at,S=>l(14,a=S)),We(t,it,S=>l(15,n=S));let g=[],L="",T=V.IDLE,r="",E={};ot(()=>{l(0,L=n.url.searchParams.has("videoID")?n.url.searchParams.get("videoID"):"")});const w=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function B(S=!0){l(4,E={}),l(2,T=V.WORKING);const X={videoID:L,userID:a.privateUUID,reason:r,categories:g},v=await fetch(`${a.sponsorBlockApi}/api/lockCategories`,{method:S?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(function(C){return C.status});v===200&&(l(2,T=V.SUCCESS),l(0,L=""),l(3,r=""),l(1,g=[])),v===400&&l(2,T=V.ERROR_INVALID),v===403&&l(2,T=V.ERROR_UNAUTHORIZED)}function j(){g.length===0?l(1,g=[...Ee]):l(1,g=[])}async function G(){const X=await(await fetch(`${a.sponsorBlockApi}/api/lockReason?videoID=${L}`)).json(),v={};for(const C of X)v[C.category]=C;l(4,E=v)}const I=[[]];function f(S){L=S,l(0,L)}function p(){g=st(I[0],this.__value,this.checked),l(1,g)}function _(){r=this.value,l(3,r)}const y=S=>B(!1),P=S=>B(!0);return t.$$.update=()=>{t.$$.dirty&1&&L&&G()},[L,g,T,r,E,w,B,j,f,p,I,_,y,P]}class mt extends Xe{constructor(s){super();Ze(this,s,dt,ut,ze,{})}}export{mt as default};
