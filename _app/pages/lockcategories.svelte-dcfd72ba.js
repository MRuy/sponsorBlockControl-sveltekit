import{S as st,i as at,s as nt,a4 as it,a5 as rt,e as _,k as I,t as G,c as d,a as f,d as u,m as T,h as K,b as g,g as re,G as s,J as ce,j as ct,H as ut,w as We,R as _t,x as Pe,I as qe,y as Fe,a1 as He,a6 as dt,q as Je,o as Me,B as Xe,K as Oe,W as ft,L as Ze,v as ht,a7 as ze}from"../chunks/vendor-029251f6.js";import{C as pt}from"../chunks/config-b3d4a71f.js";import{c as ye,b as Se,a as vt,d as gt}from"../chunks/config-6a454163.js";import{p as mt}from"../chunks/stores-4307d1b5.js";import{a as kt,S as W}from"../chunks/Status-95729226.js";import{V as bt}from"../chunks/VideoInput-269e9c3d.js";function Qe(l,o,e){const a=l.slice();return a[20]=o[e],a}function Ye(l,o,e){const a=l.slice();return a[23]=o[e],a[25]=e,a}function $e(l,o,e){const a=l.slice();return a[26]=o[e],a[25]=e,a}function xe(l){let o=(l[4][l[26]].locked===1?"\u{1F512}":"\u2713")+"",e;return{c(){e=G(o)},l(a){e=K(a,o)},m(a,r){re(a,e,r)},p(a,r){r&16&&o!==(o=(a[4][a[26]].locked===1?"\u{1F512}":"\u2713")+"")&&ct(e,o)},d(a){a&&u(e)}}}function et(l){let o,e,a,r,p,h,L,c,R=vt[l[25]]+"",m,U,w,b,i=l[4][l[26]]&&xe(l);return{c(){o=_("div"),e=_("span"),i&&i.c(),a=I(),r=_("input"),L=I(),c=_("label"),m=G(R),this.h()},l(v){o=d(v,"DIV",{class:!0});var k=f(o);e=d(k,"SPAN",{class:!0});var E=f(e);i&&i.l(E),E.forEach(u),a=T(k),r=d(k,"INPUT",{id:!0,type:!0}),L=T(k),c=d(k,"LABEL",{for:!0});var P=f(c);m=K(P,R),P.forEach(u),k.forEach(u),this.h()},h(){g(e,"class","lock svelte-1ei2iwv"),g(r,"id",p="category_"+l[26]),g(r,"type","checkbox"),r.__value=h=l[26],r.value=r.__value,l[11][1].push(r),g(c,"for",U="category_"+l[26]),g(o,"class","category-option svelte-1ei2iwv")},m(v,k){re(v,o,k),s(o,e),i&&i.m(e,null),s(o,a),s(o,r),r.checked=~l[1].indexOf(r.__value),s(o,L),s(o,c),s(c,m),w||(b=ce(r,"change",l[10]),w=!0)},p(v,k){v[4][v[26]]?i?i.p(v,k):(i=xe(v),i.c(),i.m(e,null)):i&&(i.d(1),i=null),k&2&&(r.checked=~v[1].indexOf(r.__value))},d(v){v&&u(o),i&&i.d(),l[11][1].splice(l[11][1].indexOf(r),1),w=!1,b()}}}function tt(l){let o,e,a,r,p,h,L=gt[l[25]]+"",c,R,m,U,w;return{c(){o=_("div"),e=_("input"),p=I(),h=_("label"),c=G(L),m=I(),this.h()},l(b){o=d(b,"DIV",{class:!0});var i=f(o);e=d(i,"INPUT",{id:!0,type:!0}),p=T(i),h=d(i,"LABEL",{for:!0});var v=f(h);c=K(v,L),v.forEach(u),m=T(i),i.forEach(u),this.h()},h(){g(e,"id",a="actionType_"+l[23]),g(e,"type","checkbox"),e.__value=r=l[23],e.value=e.__value,l[11][0].push(e),g(h,"for",R="actionType_"+l[23]),g(o,"class","actionType-option")},m(b,i){re(b,o,i),s(o,e),e.checked=~l[5].indexOf(e.__value),s(o,p),s(o,h),s(h,c),s(o,m),U||(w=ce(e,"change",l[12]),U=!0)},p(b,i){i&32&&(e.checked=~b[5].indexOf(e.__value))},d(b){b&&u(o),l[11][0].splice(l[11][0].indexOf(e),1),U=!1,w()}}}function lt(l){let o,e;return{c(){o=_("option"),this.h()},l(a){o=d(a,"OPTION",{}),f(o).forEach(u),this.h()},h(){o.__value=e=l[20],o.value=o.__value},m(a,r){re(a,o,r)},p:ut,d(a){a&&u(o)}}}function Et(l){let o,e,a,r,p,h,L,c,R,m,U,w,b,i,v,k,E,P,ue,_e,ee,z,O,Q,q,V,te,pe,ve,ge,C,me,Y,ke,F,le,be,Ee,H,Ie,fe,Te,J,Re,he,De,M,oe,Le,Ne;function ot(t){l[9](t)}let Ae={id:"videoid"};l[0]!==void 0&&(Ae.value=l[0]),i=new bt({props:Ae}),it.push(()=>rt(i,"value",ot));let se=ye,y=[];for(let t=0;t<se.length;t+=1)y[t]=et($e(l,se,t));let ae=Se,S=[];for(let t=0;t<ae.length;t+=1)S[t]=tt(Ye(l,ae,t));let ne=l[6],N=[];for(let t=0;t<ne.length;t+=1)N[t]=lt(Qe(l,ne,t));return M=new kt({props:{status:l[2]}}),{c(){o=I(),e=_("main"),a=_("div"),r=_("fieldset"),p=_("legend"),h=G("Lock categories"),L=I(),c=_("div"),R=_("div"),m=_("label"),U=G("VideoID:"),w=_("br"),b=I(),We(i.$$.fragment),k=I(),E=_("div"),P=_("div"),ue=G("Categories:"),_e=I();for(let t=0;t<y.length;t+=1)y[t].c();ee=I(),z=_("div"),O=G("Action Types:"),Q=I();for(let t=0;t<S.length;t+=1)S[t].c();q=I(),V=_("div"),te=_("label"),pe=G("Lock Reason:"),ve=_("br"),ge=I(),C=_("textarea"),me=I(),Y=_("datalist");for(let t=0;t<N.length;t+=1)N[t].c();ke=I(),F=_("div"),le=_("button"),be=G("Check all"),Ee=I(),H=_("button"),Ie=G("Unlock"),Te=I(),J=_("button"),Re=G("Lock"),De=I(),We(M.$$.fragment),this.h()},l(t){_t('[data-svelte="svelte-uaxvgn"]',document.head).forEach(u),o=T(t),e=d(t,"MAIN",{});var D=f(e);a=d(D,"DIV",{class:!0});var $=f(a);r=d($,"FIELDSET",{});var n=f(r);p=d(n,"LEGEND",{});var B=f(p);h=K(B,"Lock categories"),B.forEach(u),L=T(n),c=d(n,"DIV",{class:!0});var X=f(c);R=d(X,"DIV",{});var de=f(R);m=d(de,"LABEL",{for:!0});var Ve=f(m);U=K(Ve,"VideoID:"),Ve.forEach(u),w=d(de,"BR",{}),b=T(de),Pe(i.$$.fragment,de),de.forEach(u),k=T(X),E=d(X,"DIV",{});var Z=f(E);P=d(Z,"DIV",{});var we=f(P);ue=K(we,"Categories:"),we.forEach(u),_e=T(Z);for(let j=0;j<y.length;j+=1)y[j].l(Z);ee=T(Z),z=d(Z,"DIV",{});var Ce=f(z);O=K(Ce,"Action Types:"),Ce.forEach(u),Q=T(Z);for(let j=0;j<S.length;j+=1)S[j].l(Z);Z.forEach(u),q=T(X),V=d(X,"DIV",{});var x=f(V);te=d(x,"LABEL",{for:!0});var Ue=f(te);pe=K(Ue,"Lock Reason:"),Ue.forEach(u),ve=d(x,"BR",{}),ge=T(x),C=d(x,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),f(C).forEach(u),me=T(x),Y=d(x,"DATALIST",{id:!0});var Be=f(Y);for(let j=0;j<N.length;j+=1)N[j].l(Be);Be.forEach(u),x.forEach(u),ke=T(X),F=d(X,"DIV",{class:!0});var ie=f(F);le=d(ie,"BUTTON",{});var je=f(le);be=K(je,"Check all"),je.forEach(u),Ee=T(ie),H=d(ie,"BUTTON",{});var Ge=f(H);Ie=K(Ge,"Unlock"),Ge.forEach(u),Te=T(ie),J=d(ie,"BUTTON",{});var Ke=f(J);Re=K(Ke,"Lock"),Ke.forEach(u),ie.forEach(u),X.forEach(u),n.forEach(u),De=T($),Pe(M.$$.fragment,$),$.forEach(u),D.forEach(u),this.h()},h(){document.title="Lock categories | SponsorBlockControl",g(m,"for","videoid"),g(te,"for","reason"),g(C,"id","reason"),g(C,"cols","80"),g(C,"rows","3"),g(C,"placeholder","Reason..."),g(C,"list","lockreasonsuggestions"),g(Y,"id","lockreasonsuggestions"),H.disabled=fe=l[0].length===0||l[1].length===0||l[2]===W.WORKING,J.disabled=he=l[0].length===0||l[1].length===0||l[2]===W.WORKING,g(F,"class","actions"),g(c,"class","form svelte-1ei2iwv"),qe(c,"working",l[2]===W.WORKING),g(a,"class","container")},m(t,A){re(t,o,A),re(t,e,A),s(e,a),s(a,r),s(r,p),s(p,h),s(r,L),s(r,c),s(c,R),s(R,m),s(m,U),s(R,w),s(R,b),Fe(i,R,null),s(c,k),s(c,E),s(E,P),s(P,ue),s(E,_e);for(let D=0;D<y.length;D+=1)y[D].m(E,null);s(E,ee),s(E,z),s(z,O),s(E,Q);for(let D=0;D<S.length;D+=1)S[D].m(E,null);s(c,q),s(c,V),s(V,te),s(te,pe),s(V,ve),s(V,ge),s(V,C),He(C,l[3]),s(V,me),s(V,Y);for(let D=0;D<N.length;D+=1)N[D].m(Y,null);s(c,ke),s(c,F),s(F,le),s(le,be),s(F,Ee),s(F,H),s(H,Ie),s(F,Te),s(F,J),s(J,Re),s(a,De),Fe(M,a,null),oe=!0,Le||(Ne=[ce(C,"input",l[13]),ce(le,"click",l[8]),ce(H,"click",l[14]),ce(J,"click",l[15])],Le=!0)},p(t,[A]){const D={};if(!v&&A&1&&(v=!0,D.value=t[0],dt(()=>v=!1)),i.$set(D),A&18){se=ye;let n;for(n=0;n<se.length;n+=1){const B=$e(t,se,n);y[n]?y[n].p(B,A):(y[n]=et(B),y[n].c(),y[n].m(E,ee))}for(;n<y.length;n+=1)y[n].d(1);y.length=se.length}if(A&32){ae=Se;let n;for(n=0;n<ae.length;n+=1){const B=Ye(t,ae,n);S[n]?S[n].p(B,A):(S[n]=tt(B),S[n].c(),S[n].m(E,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=ae.length}if(A&8&&He(C,t[3]),A&64){ne=t[6];let n;for(n=0;n<ne.length;n+=1){const B=Qe(t,ne,n);N[n]?N[n].p(B,A):(N[n]=lt(B),N[n].c(),N[n].m(Y,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=ne.length}(!oe||A&7&&fe!==(fe=t[0].length===0||t[1].length===0||t[2]===W.WORKING))&&(H.disabled=fe),(!oe||A&7&&he!==(he=t[0].length===0||t[1].length===0||t[2]===W.WORKING))&&(J.disabled=he),A&4&&qe(c,"working",t[2]===W.WORKING);const $={};A&4&&($.status=t[2]),M.$set($)},i(t){oe||(Je(i.$$.fragment,t),Je(M.$$.fragment,t),oe=!0)},o(t){Me(i.$$.fragment,t),Me(M.$$.fragment,t),oe=!1},d(t){t&&u(o),t&&u(e),Xe(i),Oe(y,t),Oe(S,t),Oe(N,t),Xe(M),Le=!1,ft(Ne)}}}function It(l,o,e){let a,r;Ze(l,pt,O=>e(16,a=O)),Ze(l,mt,O=>e(17,r=O));let p=[],h="",L=W.IDLE,c="",R={},m=[...Se];const U=[...ye.filter(O=>!["poi_highlight","filler","exclusive_access"].includes(O))];ht(()=>{e(0,h=r.url.searchParams.has("videoID")?r.url.searchParams.get("videoID"):"")});const w=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function b(O=!0){e(4,R={}),e(2,L=W.WORKING);const Q={videoID:h,userID:a.privateUUID,reason:c,categories:p,actionTypes:m},q=await fetch(`${a.sponsorBlockApi}/api/lockCategories`,{method:O?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}).then(function(V){return V.status});q===200&&(e(2,L=W.SUCCESS),e(0,h=""),e(3,c=""),e(1,p=[])),q===400&&e(2,L=W.ERROR_INVALID),q===403&&e(2,L=W.ERROR_UNAUTHORIZED)}function i(){p.length===0?e(1,p=[...U]):e(1,p=[])}async function v(){const Q=await(await fetch(`${a.sponsorBlockApi}/api/lockReason?videoID=${h}`)).json(),q={};for(const V of Q)q[V.category]=V;e(4,R=q)}const k=[[],[]];function E(O){h=O,e(0,h)}function P(){p=ze(k[1],this.__value,this.checked),e(1,p)}function ue(){m=ze(k[0],this.__value,this.checked),e(5,m)}function _e(){c=this.value,e(3,c)}const ee=O=>b(!1),z=O=>b(!0);return l.$$.update=()=>{l.$$.dirty&1&&h&&v()},[h,p,L,c,R,m,w,b,i,E,P,k,ue,_e,ee,z]}class St extends st{constructor(o){super();at(this,o,It,Et,nt,{})}}export{St as default};
