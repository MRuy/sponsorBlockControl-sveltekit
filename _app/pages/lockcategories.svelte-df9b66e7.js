import{S as Xe,i as Ze,s as ze,a3 as Qe,a4 as Ye,e as u,k as R,t as K,c as d,a as h,d as c,n as D,g as W,b,f as se,E as l,H as ae,h as $e,F as xe,j as we,P as et,m as ye,G as Ce,o as Ue,a0 as Ve,a5 as tt,x as Be,u as je,v as Ge,I as Ke,U as ot,J as We,a6 as lt}from"../chunks/vendor-9fc4b0a7.js";import{c as Ee,a as st}from"../chunks/config-8bce724e.js";import{C as at}from"../chunks/stores-1663c3e2.js";import{p as nt}from"../chunks/stores-219cd492.js";import{a as it,S as C}from"../chunks/Status-10cd6735.js";import{V as rt}from"../chunks/VideoInput-c3824c4c.js";function qe(t,s,o){const a=t.slice();return a[17]=s[o],a}function Pe(t,s,o){const a=t.slice();return a[20]=s[o],a[22]=o,a}function Fe(t){let s=(t[4][t[20]].locked===1?"\u{1F512}":"\u2713")+"",o;return{c(){o=K(s)},l(a){o=W(a,s)},m(a,n){se(a,o,n)},p(a,n){n&16&&s!==(s=(a[4][a[20]].locked===1?"\u{1F512}":"\u2713")+"")&&$e(o,s)},d(a){a&&c(o)}}}function He(t){let s,o,a,n,g,O,T,r,E=st[t[22]]+"",A,B,j,G,I,f=t[4][t[20]]&&Fe(t);return{c(){s=u("div"),o=u("span"),f&&f.c(),a=R(),n=u("input"),T=R(),r=u("label"),A=K(E),j=R(),this.h()},l(p){s=d(p,"DIV",{class:!0});var _=h(s);o=d(_,"SPAN",{class:!0});var U=h(o);f&&f.l(U),U.forEach(c),a=D(_),n=d(_,"INPUT",{id:!0,type:!0}),T=D(_),r=d(_,"LABEL",{for:!0});var q=h(r);A=W(q,E),q.forEach(c),j=D(_),_.forEach(c),this.h()},h(){b(o,"class","lock svelte-1ei2iwv"),b(n,"id",g="category_"+t[20]),b(n,"type","checkbox"),n.__value=O=t[20],n.value=n.__value,t[10][0].push(n),b(r,"for",B="category_"+t[20]),b(s,"class","category-option svelte-1ei2iwv")},m(p,_){se(p,s,_),l(s,o),f&&f.m(o,null),l(s,a),l(s,n),n.checked=~t[1].indexOf(n.__value),l(s,T),l(s,r),l(r,A),l(s,j),G||(I=ae(n,"change",t[9]),G=!0)},p(p,_){p[4][p[20]]?f?f.p(p,_):(f=Fe(p),f.c(),f.m(o,null)):f&&(f.d(1),f=null),_&2&&(n.checked=~p[1].indexOf(n.__value))},d(p){p&&c(s),f&&f.d(),t[10][0].splice(t[10][0].indexOf(n),1),G=!1,I()}}}function Je(t){let s,o;return{c(){s=u("option"),this.h()},l(a){s=d(a,"OPTION",{}),h(s).forEach(c),this.h()},h(){s.__value=o=t[17],s.value=s.__value},m(a,n){se(a,s,n)},p:xe,d(a){a&&c(s)}}}function ct(t){let s,o,a,n,g,O,T,r,E,A,B,j,G,I,f,p,_,U,q,S,X,v,y,ce,ue,de,w,_e,Z,fe,V,$,he,pe,P,ve,ne,ge,F,me,ie,ke,H,x,be,Ie;function Me(e){t[8](e)}let Re={id:"videoid"};t[0]!==void 0&&(Re.value=t[0]),I=new rt({props:Re}),Qe.push(()=>Ye(I,"value",Me));let ee=Ee,m=[];for(let e=0;e<ee.length;e+=1)m[e]=He(Pe(t,ee,e));let te=t[5],k=[];for(let e=0;e<te.length;e+=1)k[e]=Je(qe(t,te,e));return H=new it({props:{status:t[2]}}),{c(){s=R(),o=u("main"),a=u("div"),n=u("fieldset"),g=u("legend"),O=K("Lock categories"),T=R(),r=u("div"),E=u("div"),A=u("label"),B=K("VideoID:"),j=u("br"),G=R(),we(I.$$.fragment),p=R(),_=u("div"),U=u("div"),q=K("Categories:"),S=R();for(let e=0;e<m.length;e+=1)m[e].c();X=R(),v=u("div"),y=u("label"),ce=K("Lock Reason:"),ue=u("br"),de=R(),w=u("textarea"),_e=R(),Z=u("datalist");for(let e=0;e<k.length;e+=1)k[e].c();fe=R(),V=u("div"),$=u("button"),he=K("Check all"),pe=R(),P=u("button"),ve=K("Unlock"),ge=R(),F=u("button"),me=K("Lock"),ke=R(),we(H.$$.fragment),this.h()},l(e){et('[data-svelte="svelte-uaxvgn"]',document.head).forEach(c),s=D(e),o=d(e,"MAIN",{});var N=h(o);a=d(N,"DIV",{class:!0});var z=h(a);n=d(z,"FIELDSET",{});var i=h(n);g=d(i,"LEGEND",{});var J=h(g);O=W(J,"Lock categories"),J.forEach(c),T=D(i),r=d(i,"DIV",{class:!0});var M=h(r);E=d(M,"DIV",{});var le=h(E);A=d(le,"LABEL",{for:!0});var De=h(A);B=W(De,"VideoID:"),De.forEach(c),j=d(le,"BR",{}),G=D(le),ye(I.$$.fragment,le),le.forEach(c),p=D(M),_=d(M,"DIV",{});var re=h(_);U=d(re,"DIV",{});var Se=h(U);q=W(Se,"Categories:"),Se.forEach(c),S=D(re);for(let Y=0;Y<m.length;Y+=1)m[Y].l(re);re.forEach(c),X=D(M),v=d(M,"DIV",{});var Q=h(v);y=d(Q,"LABEL",{for:!0});var Le=h(y);ce=W(Le,"Lock Reason:"),Le.forEach(c),ue=d(Q,"BR",{}),de=D(Q),w=d(Q,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0,list:!0}),h(w).forEach(c),_e=D(Q),Z=d(Q,"DATALIST",{id:!0});var Oe=h(Z);for(let Y=0;Y<k.length;Y+=1)k[Y].l(Oe);Oe.forEach(c),Q.forEach(c),fe=D(M),V=d(M,"DIV",{class:!0});var oe=h(V);$=d(oe,"BUTTON",{});var Te=h($);he=W(Te,"Check all"),Te.forEach(c),pe=D(oe),P=d(oe,"BUTTON",{});var Ne=h(P);ve=W(Ne,"Unlock"),Ne.forEach(c),ge=D(oe),F=d(oe,"BUTTON",{});var Ae=h(F);me=W(Ae,"Lock"),Ae.forEach(c),oe.forEach(c),M.forEach(c),i.forEach(c),ke=D(z),ye(H.$$.fragment,z),z.forEach(c),N.forEach(c),this.h()},h(){document.title="Lock categories | SponsorBlockControl",b(A,"for","videoid"),b(y,"for","reason"),b(w,"id","reason"),b(w,"cols","80"),b(w,"rows","3"),b(w,"placeholder","Reason..."),b(w,"list","lockreasonsuggestions"),b(Z,"id","lockreasonsuggestions"),P.disabled=ne=t[0].length===0||t[1].length===0||t[2]===C.WORKING,F.disabled=ie=t[0].length===0||t[1].length===0||t[2]===C.WORKING,b(V,"class","actions"),b(r,"class","form svelte-1ei2iwv"),Ce(r,"working",t[2]===C.WORKING),b(a,"class","container")},m(e,L){se(e,s,L),se(e,o,L),l(o,a),l(a,n),l(n,g),l(g,O),l(n,T),l(n,r),l(r,E),l(E,A),l(A,B),l(E,j),l(E,G),Ue(I,E,null),l(r,p),l(r,_),l(_,U),l(U,q),l(_,S);for(let N=0;N<m.length;N+=1)m[N].m(_,null);l(r,X),l(r,v),l(v,y),l(y,ce),l(v,ue),l(v,de),l(v,w),Ve(w,t[3]),l(v,_e),l(v,Z);for(let N=0;N<k.length;N+=1)k[N].m(Z,null);l(r,fe),l(r,V),l(V,$),l($,he),l(V,pe),l(V,P),l(P,ve),l(V,ge),l(V,F),l(F,me),l(a,ke),Ue(H,a,null),x=!0,be||(Ie=[ae(w,"input",t[11]),ae($,"click",t[7]),ae(P,"click",t[12]),ae(F,"click",t[13])],be=!0)},p(e,[L]){const N={};if(!f&&L&1&&(f=!0,N.value=e[0],tt(()=>f=!1)),I.$set(N),L&18){ee=Ee;let i;for(i=0;i<ee.length;i+=1){const J=Pe(e,ee,i);m[i]?m[i].p(J,L):(m[i]=He(J),m[i].c(),m[i].m(_,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=ee.length}if(L&8&&Ve(w,e[3]),L&32){te=e[5];let i;for(i=0;i<te.length;i+=1){const J=qe(e,te,i);k[i]?k[i].p(J,L):(k[i]=Je(J),k[i].c(),k[i].m(Z,null))}for(;i<k.length;i+=1)k[i].d(1);k.length=te.length}(!x||L&7&&ne!==(ne=e[0].length===0||e[1].length===0||e[2]===C.WORKING))&&(P.disabled=ne),(!x||L&7&&ie!==(ie=e[0].length===0||e[1].length===0||e[2]===C.WORKING))&&(F.disabled=ie),L&4&&Ce(r,"working",e[2]===C.WORKING);const z={};L&4&&(z.status=e[2]),H.$set(z)},i(e){x||(Be(I.$$.fragment,e),Be(H.$$.fragment,e),x=!0)},o(e){je(I.$$.fragment,e),je(H.$$.fragment,e),x=!1},d(e){e&&c(s),e&&c(o),Ge(I),Ke(m,e),Ke(k,e),Ge(H),be=!1,ot(Ie)}}}function ut(t,s,o){let a,n;We(t,at,S=>o(14,a=S)),We(t,nt,S=>o(15,n=S));let g=[],O=n.query.has("videoID")?n.query.get("videoID"):"",T=C.IDLE,r="",E={};const A=["There are already several well-timed Sponsor submissions.","Unique skits should not be skipped.","Preview is not for spoken summaries."];async function B(S=!0){o(4,E={}),o(2,T=C.WORKING);const X={videoID:O,userID:a.privateUUID,reason:r,categories:g},v=await fetch(`${a.sponsorBlockApi}/api/lockCategories`,{method:S?"post":"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then(function(y){return y.status});v===200&&(o(2,T=C.SUCCESS),o(0,O=""),o(3,r=""),o(1,g=[])),v===400&&o(2,T=C.ERROR_INVALID),v===403&&o(2,T=C.ERROR_UNAUTHORIZED)}function j(){g.length===0?o(1,g=[...Ee]):o(1,g=[])}async function G(){const X=await(await fetch(`${a.sponsorBlockApi}/api/lockReason?videoID=${O}`)).json(),v={};for(const y of X)v[y.category]=y;o(4,E=v)}const I=[[]];function f(S){O=S,o(0,O)}function p(){g=lt(I[0],this.__value,this.checked),o(1,g)}function _(){r=this.value,o(3,r)}const U=S=>B(!1),q=S=>B(!0);return t.$$.update=()=>{t.$$.dirty&1&&O&&G()},[O,g,T,r,E,A,B,j,f,p,I,_,U,q]}class gt extends Xe{constructor(s){super();Ze(this,s,ut,ct,ze,{})}}export{gt as default};
