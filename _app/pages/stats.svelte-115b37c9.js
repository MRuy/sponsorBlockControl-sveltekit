import{_ as kt,S as gt,i as wt,s as It,e as o,t as b,k as E,c as r,a as i,h as T,d as n,m as C,b as k,g as G,G as t,J as Rt,j as F,w as Dt,R as yt,x as Lt,y as Ut,q as jt,o as At,B as Bt,L as bt,v as Ht,Y as Et}from"../chunks/vendor-029251f6.js";import{C as Nt}from"../chunks/config-b3d4a71f.js";import{S as q,a as Ot}from"../chunks/Status-95729226.js";import{m as Tt}from"../chunks/utils-3b98a7b3.js";import"../chunks/userInfo-a6af26e4.js";const it=kt("cache",{totalstats:{apiUsers:0,userCount:0,viewCount:0,totalSubmissions:0,minutesSaved:0},totalstats_time:0});function Ct(d){let _,a,e,h,c,v,l,s=d[1].apiUsers.toLocaleString()+"",p,f,m,y,Q,X,I,H=d[1].viewCount.toLocaleString()+"",K,Z,x,R,L,tt,st,U,N=d[1].totalSubmissions.toLocaleString()+"",M,et,D,j,at,lt,A,O=Tt(d[1].minutesSaved,!0)+"",W,P,B,g,nt,V,ot,ut;return{c(){_=o("table"),a=o("tbody"),e=o("tr"),h=o("th"),c=b("API Users:"),v=E(),l=o("td"),p=b(s),f=E(),m=o("tr"),y=o("th"),Q=b("Skip Count:"),X=E(),I=o("td"),K=b(H),Z=b(" skips"),x=E(),R=o("tr"),L=o("th"),tt=b("Submissions:"),st=E(),U=o("td"),M=b(N),et=E(),D=o("tr"),j=o("th"),at=b("Time Saved:"),lt=E(),A=o("td"),W=b(O),P=E(),B=o("div"),g=o("button"),nt=b("Refresh"),this.h()},l(u){_=r(u,"TABLE",{class:!0});var S=i(_);a=r(S,"TBODY",{});var w=i(a);e=r(w,"TR",{});var Y=i(e);h=r(Y,"TH",{class:!0});var ct=i(h);c=T(ct,"API Users:"),ct.forEach(n),v=C(Y),l=r(Y,"TD",{class:!0});var ft=i(l);p=T(ft,s),ft.forEach(n),Y.forEach(n),f=C(w),m=r(w,"TR",{});var $=i(m);y=r($,"TH",{class:!0});var _t=i(y);Q=T(_t,"Skip Count:"),_t.forEach(n),X=C($),I=r($,"TD",{class:!0});var rt=i(I);K=T(rt,H),Z=T(rt," skips"),rt.forEach(n),$.forEach(n),x=C(w),R=r(w,"TR",{});var z=i(R);L=r(z,"TH",{class:!0});var dt=i(L);tt=T(dt,"Submissions:"),dt.forEach(n),st=C(z),U=r(z,"TD",{class:!0});var ht=i(U);M=T(ht,N),ht.forEach(n),z.forEach(n),et=C(w),D=r(w,"TR",{});var J=i(D);j=r(J,"TH",{class:!0});var mt=i(j);at=T(mt,"Time Saved:"),mt.forEach(n),lt=C(J),A=r(J,"TD",{class:!0});var vt=i(A);W=T(vt,O),vt.forEach(n),J.forEach(n),w.forEach(n),S.forEach(n),P=C(u),B=r(u,"DIV",{});var pt=i(B);g=r(pt,"BUTTON",{});var St=i(g);nt=T(St,"Refresh"),St.forEach(n),pt.forEach(n),this.h()},h(){k(h,"class","svelte-n43nsu"),k(l,"class","svelte-n43nsu"),k(y,"class","svelte-n43nsu"),k(I,"class","svelte-n43nsu"),k(L,"class","svelte-n43nsu"),k(U,"class","svelte-n43nsu"),k(j,"class","svelte-n43nsu"),k(A,"class","svelte-n43nsu"),k(_,"class","stats-table svelte-n43nsu"),g.disabled=V=d[0]===q.WORKING},m(u,S){G(u,_,S),t(_,a),t(a,e),t(e,h),t(h,c),t(e,v),t(e,l),t(l,p),t(a,f),t(a,m),t(m,y),t(y,Q),t(m,X),t(m,I),t(I,K),t(I,Z),t(a,x),t(a,R),t(R,L),t(L,tt),t(R,st),t(R,U),t(U,M),t(a,et),t(a,D),t(D,j),t(j,at),t(D,lt),t(D,A),t(A,W),G(u,P,S),G(u,B,S),t(B,g),t(g,nt),ot||(ut=Rt(g,"click",d[3]),ot=!0)},p(u,S){S&2&&s!==(s=u[1].apiUsers.toLocaleString()+"")&&F(p,s),S&2&&H!==(H=u[1].viewCount.toLocaleString()+"")&&F(K,H),S&2&&N!==(N=u[1].totalSubmissions.toLocaleString()+"")&&F(M,N),S&2&&O!==(O=Tt(u[1].minutesSaved,!0)+"")&&F(W,O),S&1&&V!==(V=u[0]===q.WORKING)&&(g.disabled=V)},d(u){u&&n(_),u&&n(P),u&&n(B),ot=!1,ut()}}}function Gt(d){let _,a,e,h,c,v,l=d[1]&&Ct(d);return c=new Ot({props:{status:d[0]}}),{c(){_=E(),a=o("main"),e=o("div"),l&&l.c(),h=E(),Dt(c.$$.fragment),this.h()},l(s){yt('[data-svelte="svelte-15xz8eh"]',document.head).forEach(n),_=C(s),a=r(s,"MAIN",{});var f=i(a);e=r(f,"DIV",{class:!0});var m=i(e);l&&l.l(m),h=C(m),Lt(c.$$.fragment,m),m.forEach(n),f.forEach(n),this.h()},h(){document.title="Stats | SponsorBlockControl",k(e,"class","container")},m(s,p){G(s,_,p),G(s,a,p),t(a,e),l&&l.m(e,null),t(e,h),Ut(c,e,null),v=!0},p(s,[p]){s[1]?l?l.p(s,p):(l=Ct(s),l.c(),l.m(e,h)):l&&(l.d(1),l=null);const f={};p&1&&(f.status=s[0]),c.$set(f)},i(s){v||(jt(c.$$.fragment,s),v=!0)},o(s){At(c.$$.fragment,s),v=!1},d(s){s&&n(_),s&&n(a),l&&l.d(),Bt(c)}}}const qt=6e5;function Kt(d,_,a){let e,h;bt(d,it,f=>a(4,e=f)),bt(d,Nt,f=>a(5,h=f));let c=q.IDLE,v={apiUsers:0,userCount:0,viewCount:0,totalSubmissions:0,minutesSaved:0};async function l(){a(0,c=q.WORKING);const f=await fetch(`${h.sponsorBlockApi}/api/getTotalStats`).then(m=>m.json());return a(0,c=q.SUCCESS),f}async function s(){a(1,v=await l()),Et(it,e.totalstats=v,e),Et(it,e.totalstats_time=Date.now(),e)}return Ht(async()=>{"totalstats"in e&&e.totalstats_time+qt>Date.now()?a(1,v=e.totalstats):await s()}),[c,v,s,async f=>{await s()}]}class $t extends gt{constructor(_){super();wt(this,_,Kt,Gt,It,{})}}export{$t as default};
