import{Y as kt,S as gt,i as wt,s as It,e as o,t as b,k as E,c as r,a as i,g as T,d as n,n as C,b as k,f as W,E as t,H as Dt,h as F,j as Rt,P as Ut,m as yt,o as At,x as Lt,u as jt,v as Ht,J as bt,A as Bt,W as Et}from"../chunks/vendor-9fba9fd8.js";import{C as Nt}from"../chunks/config-c3a6b1a1.js";import{S as G,a as Ot}from"../chunks/Status-de6d2c9d.js";import{m as Tt}from"../chunks/utils-5593b12d.js";import"../chunks/userInfo-65a70c4e.js";const it=kt("cache",{totalstats:{apiUsers:0,userCount:0,viewCount:0,totalSubmissions:0,minutesSaved:0},totalstats_time:0});function Ct(_){let d,a,e,h,c,v,l,s=_[1].apiUsers.toLocaleString()+"",p,f,m,U,Q,X,I,B=_[1].viewCount.toLocaleString()+"",K,Z,x,D,y,tt,st,A,N=_[1].totalSubmissions.toLocaleString()+"",M,et,R,L,at,lt,j,O=Tt(_[1].minutesSaved,!0)+"",P,q,H,g,nt,V,ot,ut;return{c(){d=o("table"),a=o("tbody"),e=o("tr"),h=o("th"),c=b("API Users:"),v=E(),l=o("td"),p=b(s),f=E(),m=o("tr"),U=o("th"),Q=b("Skip Count:"),X=E(),I=o("td"),K=b(B),Z=b(" skips"),x=E(),D=o("tr"),y=o("th"),tt=b("Submissions:"),st=E(),A=o("td"),M=b(N),et=E(),R=o("tr"),L=o("th"),at=b("Time Saved:"),lt=E(),j=o("td"),P=b(O),q=E(),H=o("div"),g=o("button"),nt=b("Refresh"),this.h()},l(u){d=r(u,"TABLE",{class:!0});var S=i(d);a=r(S,"TBODY",{});var w=i(a);e=r(w,"TR",{});var Y=i(e);h=r(Y,"TH",{class:!0});var ct=i(h);c=T(ct,"API Users:"),ct.forEach(n),v=C(Y),l=r(Y,"TD",{class:!0});var ft=i(l);p=T(ft,s),ft.forEach(n),Y.forEach(n),f=C(w),m=r(w,"TR",{});var $=i(m);U=r($,"TH",{class:!0});var dt=i(U);Q=T(dt,"Skip Count:"),dt.forEach(n),X=C($),I=r($,"TD",{class:!0});var rt=i(I);K=T(rt,B),Z=T(rt," skips"),rt.forEach(n),$.forEach(n),x=C(w),D=r(w,"TR",{});var z=i(D);y=r(z,"TH",{class:!0});var _t=i(y);tt=T(_t,"Submissions:"),_t.forEach(n),st=C(z),A=r(z,"TD",{class:!0});var ht=i(A);M=T(ht,N),ht.forEach(n),z.forEach(n),et=C(w),R=r(w,"TR",{});var J=i(R);L=r(J,"TH",{class:!0});var mt=i(L);at=T(mt,"Time Saved:"),mt.forEach(n),lt=C(J),j=r(J,"TD",{class:!0});var vt=i(j);P=T(vt,O),vt.forEach(n),J.forEach(n),w.forEach(n),S.forEach(n),q=C(u),H=r(u,"DIV",{});var pt=i(H);g=r(pt,"BUTTON",{});var St=i(g);nt=T(St,"Refresh"),St.forEach(n),pt.forEach(n),this.h()},h(){k(h,"class","svelte-n43nsu"),k(l,"class","svelte-n43nsu"),k(U,"class","svelte-n43nsu"),k(I,"class","svelte-n43nsu"),k(y,"class","svelte-n43nsu"),k(A,"class","svelte-n43nsu"),k(L,"class","svelte-n43nsu"),k(j,"class","svelte-n43nsu"),k(d,"class","stats-table svelte-n43nsu"),g.disabled=V=_[0]===G.WORKING},m(u,S){W(u,d,S),t(d,a),t(a,e),t(e,h),t(h,c),t(e,v),t(e,l),t(l,p),t(a,f),t(a,m),t(m,U),t(U,Q),t(m,X),t(m,I),t(I,K),t(I,Z),t(a,x),t(a,D),t(D,y),t(y,tt),t(D,st),t(D,A),t(A,M),t(a,et),t(a,R),t(R,L),t(L,at),t(R,lt),t(R,j),t(j,P),W(u,q,S),W(u,H,S),t(H,g),t(g,nt),ot||(ut=Dt(g,"click",_[3]),ot=!0)},p(u,S){S&2&&s!==(s=u[1].apiUsers.toLocaleString()+"")&&F(p,s),S&2&&B!==(B=u[1].viewCount.toLocaleString()+"")&&F(K,B),S&2&&N!==(N=u[1].totalSubmissions.toLocaleString()+"")&&F(M,N),S&2&&O!==(O=Tt(u[1].minutesSaved,!0)+"")&&F(P,O),S&1&&V!==(V=u[0]===G.WORKING)&&(g.disabled=V)},d(u){u&&n(d),u&&n(q),u&&n(H),ot=!1,ut()}}}function Wt(_){let d,a,e,h,c,v,l=_[1]&&Ct(_);return c=new Ot({props:{status:_[0]}}),{c(){d=E(),a=o("main"),e=o("div"),l&&l.c(),h=E(),Rt(c.$$.fragment),this.h()},l(s){Ut('[data-svelte="svelte-15xz8eh"]',document.head).forEach(n),d=C(s),a=r(s,"MAIN",{});var f=i(a);e=r(f,"DIV",{class:!0});var m=i(e);l&&l.l(m),h=C(m),yt(c.$$.fragment,m),m.forEach(n),f.forEach(n),this.h()},h(){document.title="Stats | SponsorBlockControl",k(e,"class","container")},m(s,p){W(s,d,p),W(s,a,p),t(a,e),l&&l.m(e,null),t(e,h),At(c,e,null),v=!0},p(s,[p]){s[1]?l?l.p(s,p):(l=Ct(s),l.c(),l.m(e,h)):l&&(l.d(1),l=null);const f={};p&1&&(f.status=s[0]),c.$set(f)},i(s){v||(Lt(c.$$.fragment,s),v=!0)},o(s){jt(c.$$.fragment,s),v=!1},d(s){s&&n(d),s&&n(a),l&&l.d(),Ht(c)}}}const Gt=6e5;function Kt(_,d,a){let e,h;bt(_,it,f=>a(4,e=f)),bt(_,Nt,f=>a(5,h=f));let c=G.IDLE,v={apiUsers:0,userCount:0,viewCount:0,totalSubmissions:0,minutesSaved:0};async function l(){a(0,c=G.WORKING);const f=await fetch(`${h.sponsorBlockApi}/api/getTotalStats`).then(m=>m.json());return a(0,c=G.SUCCESS),f}async function s(){a(1,v=await l()),Et(it,e.totalstats=v,e),Et(it,e.totalstats_time=Date.now(),e)}return Bt(async()=>{"totalstats"in e&&e.totalstats_time+Gt>Date.now()?a(1,v=e.totalstats):await s()}),[c,v,s,async f=>{await s()}]}class $t extends gt{constructor(d){super();wt(this,d,Kt,Wt,It,{})}}export{$t as default};
