import{S as kt,i as gt,s as wt,e as n,t as b,k as E,c as r,a as i,g as T,d as o,n as C,b as k,f as W,E as t,H as Dt,h as F,j as It,P as Rt,m as yt,o as At,x as Lt,u as Ut,v as jt,J as bt,A as Ht,W as Et}from"../chunks/vendor-9fc4b0a7.js";import{a as it,C as Bt}from"../chunks/stores-1663c3e2.js";import{S as G,a as Nt}from"../chunks/Status-10cd6735.js";import{m as Tt}from"../chunks/utils-dd30e544.js";function Ct(_){let d,a,s,h,u,v,l,e=_[1].apiUsers.toLocaleString()+"",S,f,m,y,Q,X,D,B=_[1].viewCount.toLocaleString()+"",K,Z,x,I,A,tt,et,L,N=_[1].totalSubmissions.toLocaleString()+"",M,st,R,U,at,lt,j,O=Tt(_[1].minutesSaved,!0)+"",P,q,H,g,ot,V,nt,ct;return{c(){d=n("table"),a=n("tbody"),s=n("tr"),h=n("th"),u=b("API Users:"),v=E(),l=n("td"),S=b(e),f=E(),m=n("tr"),y=n("th"),Q=b("Skip Count:"),X=E(),D=n("td"),K=b(B),Z=b(" skips"),x=E(),I=n("tr"),A=n("th"),tt=b("Submissions:"),et=E(),L=n("td"),M=b(N),st=E(),R=n("tr"),U=n("th"),at=b("Time Saved:"),lt=E(),j=n("td"),P=b(O),q=E(),H=n("div"),g=n("button"),ot=b("Refresh"),this.h()},l(c){d=r(c,"TABLE",{class:!0});var p=i(d);a=r(p,"TBODY",{});var w=i(a);s=r(w,"TR",{});var $=i(s);h=r($,"TH",{class:!0});var ut=i(h);u=T(ut,"API Users:"),ut.forEach(o),v=C($),l=r($,"TD",{class:!0});var ft=i(l);S=T(ft,e),ft.forEach(o),$.forEach(o),f=C(w),m=r(w,"TR",{});var z=i(m);y=r(z,"TH",{class:!0});var dt=i(y);Q=T(dt,"Skip Count:"),dt.forEach(o),X=C(z),D=r(z,"TD",{class:!0});var rt=i(D);K=T(rt,B),Z=T(rt," skips"),rt.forEach(o),z.forEach(o),x=C(w),I=r(w,"TR",{});var J=i(I);A=r(J,"TH",{class:!0});var _t=i(A);tt=T(_t,"Submissions:"),_t.forEach(o),et=C(J),L=r(J,"TD",{class:!0});var ht=i(L);M=T(ht,N),ht.forEach(o),J.forEach(o),st=C(w),R=r(w,"TR",{});var Y=i(R);U=r(Y,"TH",{class:!0});var mt=i(U);at=T(mt,"Time Saved:"),mt.forEach(o),lt=C(Y),j=r(Y,"TD",{class:!0});var vt=i(j);P=T(vt,O),vt.forEach(o),Y.forEach(o),w.forEach(o),p.forEach(o),q=C(c),H=r(c,"DIV",{});var St=i(H);g=r(St,"BUTTON",{});var pt=i(g);ot=T(pt,"Refresh"),pt.forEach(o),St.forEach(o),this.h()},h(){k(h,"class","svelte-n43nsu"),k(l,"class","svelte-n43nsu"),k(y,"class","svelte-n43nsu"),k(D,"class","svelte-n43nsu"),k(A,"class","svelte-n43nsu"),k(L,"class","svelte-n43nsu"),k(U,"class","svelte-n43nsu"),k(j,"class","svelte-n43nsu"),k(d,"class","stats-table svelte-n43nsu"),g.disabled=V=_[0]===G.WORKING},m(c,p){W(c,d,p),t(d,a),t(a,s),t(s,h),t(h,u),t(s,v),t(s,l),t(l,S),t(a,f),t(a,m),t(m,y),t(y,Q),t(m,X),t(m,D),t(D,K),t(D,Z),t(a,x),t(a,I),t(I,A),t(A,tt),t(I,et),t(I,L),t(L,M),t(a,st),t(a,R),t(R,U),t(U,at),t(R,lt),t(R,j),t(j,P),W(c,q,p),W(c,H,p),t(H,g),t(g,ot),nt||(ct=Dt(g,"click",_[3]),nt=!0)},p(c,p){p&2&&e!==(e=c[1].apiUsers.toLocaleString()+"")&&F(S,e),p&2&&B!==(B=c[1].viewCount.toLocaleString()+"")&&F(K,B),p&2&&N!==(N=c[1].totalSubmissions.toLocaleString()+"")&&F(M,N),p&2&&O!==(O=Tt(c[1].minutesSaved,!0)+"")&&F(P,O),p&1&&V!==(V=c[0]===G.WORKING)&&(g.disabled=V)},d(c){c&&o(d),c&&o(q),c&&o(H),nt=!1,ct()}}}function Ot(_){let d,a,s,h,u,v,l=_[1]&&Ct(_);return u=new Nt({props:{status:_[0]}}),{c(){d=E(),a=n("main"),s=n("div"),l&&l.c(),h=E(),It(u.$$.fragment),this.h()},l(e){Rt('[data-svelte="svelte-15xz8eh"]',document.head).forEach(o),d=C(e),a=r(e,"MAIN",{});var f=i(a);s=r(f,"DIV",{class:!0});var m=i(s);l&&l.l(m),h=C(m),yt(u.$$.fragment,m),m.forEach(o),f.forEach(o),this.h()},h(){document.title="Stats | SponsorBlockControl",k(s,"class","container")},m(e,S){W(e,d,S),W(e,a,S),t(a,s),l&&l.m(s,null),t(s,h),At(u,s,null),v=!0},p(e,[S]){e[1]?l?l.p(e,S):(l=Ct(e),l.c(),l.m(s,h)):l&&(l.d(1),l=null);const f={};S&1&&(f.status=e[0]),u.$set(f)},i(e){v||(Lt(u.$$.fragment,e),v=!0)},o(e){Ut(u.$$.fragment,e),v=!1},d(e){e&&o(d),e&&o(a),l&&l.d(),jt(u)}}}const Wt=6e5;function Gt(_,d,a){let s,h;bt(_,it,f=>a(4,s=f)),bt(_,Bt,f=>a(5,h=f));let u=G.IDLE,v={apiUsers:0,userCount:0,viewCount:0,totalSubmissions:0,minutesSaved:0};async function l(){a(0,u=G.WORKING);const f=await fetch(`${h.sponsorBlockApi}/api/getTotalStats`).then(m=>m.json());return a(0,u=G.SUCCESS),f}async function e(){a(1,v=await l()),Et(it,s.totalstats=v,s),Et(it,s.totalstats_time=Date.now(),s)}return Ht(async()=>{"totalstats"in s&&s.totalstats_time+Wt>Date.now()?a(1,v=s.totalstats):await e()}),[u,v,e,async f=>{await e()}]}class Vt extends kt{constructor(d){super();gt(this,d,Gt,Ot,wt,{})}}export{Vt as default};
