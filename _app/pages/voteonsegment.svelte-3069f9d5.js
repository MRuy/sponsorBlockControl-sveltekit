import{S as oe,i as le,s as re,k as G,e as f,t as w,w as ie,R as ue,d as i,m as k,c as _,a as h,h as A,x as de,b as E,g as ae,G as t,a1 as ne,y as fe,J as z,q as _e,o as ce,B as pe,W as me,L as he}from"../chunks/vendor-029251f6.js";import{C as be}from"../chunks/config-b3d4a71f.js";import{i as Ie}from"../chunks/utils-3b98a7b3.js";import{a as ve,S as a}from"../chunks/Status-95729226.js";import"../chunks/userInfo-a6af26e4.js";function Ue(s){let S,o,u,l,r,W,I,c,v,V,L,p,n,b,D,d,U,F,j,J,N,M,y,H,O,Q,P,X,R,g,Y,Z;return R=new ve({props:{status:s[1]}}),{c(){S=G(),o=f("main"),u=f("div"),l=f("fieldset"),r=f("legend"),W=w("Vote on segment"),I=G(),c=f("div"),v=f("label"),V=w("Segment UUID:"),L=f("br"),p=G(),n=f("input"),D=G(),d=f("div"),U=f("button"),F=w("Undo Vote"),J=G(),N=f("button"),M=w("Downvote"),H=G(),O=f("button"),Q=w("Upvote"),X=G(),ie(R.$$.fragment),this.h()},l(e){ue('[data-svelte="svelte-1dn2k8k"]',document.head).forEach(i),S=k(e),o=_(e,"MAIN",{});var B=h(o);u=_(B,"DIV",{class:!0});var q=h(u);l=_(q,"FIELDSET",{});var K=h(l);r=_(K,"LEGEND",{});var $=h(r);W=A($,"Vote on segment"),$.forEach(i),I=k(K),c=_(K,"DIV",{});var C=h(c);v=_(C,"LABEL",{for:!0});var x=h(v);V=A(x,"Segment UUID:"),x.forEach(i),L=_(C,"BR",{}),p=k(C),n=_(C,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),C.forEach(i),D=k(K),d=_(K,"DIV",{class:!0});var T=h(d);U=_(T,"BUTTON",{});var ee=h(U);F=A(ee,"Undo Vote"),ee.forEach(i),J=k(T),N=_(T,"BUTTON",{});var te=h(N);M=A(te,"Downvote"),te.forEach(i),H=k(T),O=_(T,"BUTTON",{});var se=h(O);Q=A(se,"Upvote"),se.forEach(i),T.forEach(i),K.forEach(i),X=k(q),de(R.$$.fragment,q),q.forEach(i),B.forEach(i),this.h()},h(){document.title="Vote on segment | SponsorBlockControl",E(v,"for","uuid"),E(n,"id","uuid"),E(n,"type","text"),E(n,"size","64"),E(n,"pattern","[a-f0-9]{64}"),E(n,"placeholder","Segment UUID ..."),n.disabled=b=s[1]===a.WORKING,U.disabled=j=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,N.disabled=y=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,O.disabled=P=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,E(d,"class","actions"),E(u,"class","container")},m(e,m){ae(e,S,m),ae(e,o,m),t(o,u),t(u,l),t(l,r),t(r,W),t(l,I),t(l,c),t(c,v),t(v,V),t(c,L),t(c,p),t(c,n),ne(n,s[0]),t(l,D),t(l,d),t(d,U),t(U,F),t(d,J),t(d,N),t(N,M),t(d,H),t(d,O),t(O,Q),t(u,X),fe(R,u,null),g=!0,Y||(Z=[z(n,"input",s[4]),z(U,"click",s[5]),z(N,"click",s[6]),z(O,"click",s[7])],Y=!0)},p(e,[m]){(!g||m&2&&b!==(b=e[1]===a.WORKING))&&(n.disabled=b),m&1&&n.value!==e[0]&&ne(n,e[0]),(!g||m&6&&j!==(j=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(U.disabled=j),(!g||m&6&&y!==(y=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(N.disabled=y),(!g||m&6&&P!==(P=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(O.disabled=P);const B={};m&2&&(B.status=e[1]),R.$set(B)},i(e){g||(_e(R.$$.fragment,e),g=!0)},o(e){ce(R.$$.fragment,e),g=!1},d(e){e&&i(S),e&&i(o),pe(R),Y=!1,me(Z)}}}function Ne(s,S,o){let u;he(s,be,p=>o(8,u=p));let l=a.IDLE,r="",W=!1;async function I(p,n=0){o(1,l=a.WORKING);const b=new URLSearchParams;b.set("UUID",p),b.set("userID",u.privateUUID),b.set("type",n.toString());const D=await fetch(`${u.sponsorBlockApi}/api/voteOnSponsorTime?${b}`,{method:"POST"}).then(d=>d.status);D===200&&(o(1,l=a.SUCCESS),o(0,r="")),D===400&&o(1,l=a.ERROR_INVALID),D===405&&o(1,l=a.DUPLICATE)}function c(){r=this.value,o(0,r)}const v=p=>{I(r,20)},V=p=>{I(r,0)},L=p=>{I(r,1)};return s.$$.update=()=>{s.$$.dirty&1&&o(2,W=Ie(r))},[r,l,W,I,c,v,V,L]}class De extends oe{constructor(S){super();le(this,S,Ne,Ue,re,{})}}export{De as default};
