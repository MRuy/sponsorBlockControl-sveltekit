import{S as oe,i as le,s as re,k as G,e as _,t as A,j as ie,P as ue,d as i,n as k,c,a as h,g as j,m as de,b as R,f as ae,E as t,a0 as ne,o as _e,H as z,x as ce,u as fe,v as pe,U as me,J as he}from"../chunks/vendor-9fc4b0a7.js";import{C as be}from"../chunks/stores-1663c3e2.js";import{i as Ie}from"../chunks/utils-dd30e544.js";import{a as ve,S as a}from"../chunks/Status-10cd6735.js";function Ue(s){let g,o,u,l,r,K,I,f,v,V,C,p,n,b,D,d,U,F,w,H,N,J,P,M,S,Q,y,X,E,O,Y,Z;return E=new ve({props:{status:s[1]}}),{c(){g=G(),o=_("main"),u=_("div"),l=_("fieldset"),r=_("legend"),K=A("Vote on segment"),I=G(),f=_("div"),v=_("label"),V=A("Segment UUID:"),C=_("br"),p=G(),n=_("input"),D=G(),d=_("div"),U=_("button"),F=A("Undo Vote"),H=G(),N=_("button"),J=A("Downvote"),M=G(),S=_("button"),Q=A("Upvote"),X=G(),ie(E.$$.fragment),this.h()},l(e){ue('[data-svelte="svelte-1dn2k8k"]',document.head).forEach(i),g=k(e),o=c(e,"MAIN",{});var L=h(o);u=c(L,"DIV",{class:!0});var q=h(u);l=c(q,"FIELDSET",{});var W=h(l);r=c(W,"LEGEND",{});var $=h(r);K=j($,"Vote on segment"),$.forEach(i),I=k(W),f=c(W,"DIV",{});var B=h(f);v=c(B,"LABEL",{for:!0});var x=h(v);V=j(x,"Segment UUID:"),x.forEach(i),C=c(B,"BR",{}),p=k(B),n=c(B,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),B.forEach(i),D=k(W),d=c(W,"DIV",{class:!0});var T=h(d);U=c(T,"BUTTON",{});var ee=h(U);F=j(ee,"Undo Vote"),ee.forEach(i),H=k(T),N=c(T,"BUTTON",{});var te=h(N);J=j(te,"Downvote"),te.forEach(i),M=k(T),S=c(T,"BUTTON",{});var se=h(S);Q=j(se,"Upvote"),se.forEach(i),T.forEach(i),W.forEach(i),X=k(q),de(E.$$.fragment,q),q.forEach(i),L.forEach(i),this.h()},h(){document.title="Vote on segment | SponsorBlockControl",R(v,"for","uuid"),R(n,"id","uuid"),R(n,"type","text"),R(n,"size","64"),R(n,"pattern","[a-f0-9]{64}"),R(n,"placeholder","Segment UUID ..."),n.disabled=b=s[1]===a.WORKING,U.disabled=w=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,N.disabled=P=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,S.disabled=y=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,R(d,"class","actions"),R(u,"class","container")},m(e,m){ae(e,g,m),ae(e,o,m),t(o,u),t(u,l),t(l,r),t(r,K),t(l,I),t(l,f),t(f,v),t(v,V),t(f,C),t(f,p),t(f,n),ne(n,s[0]),t(l,D),t(l,d),t(d,U),t(U,F),t(d,H),t(d,N),t(N,J),t(d,M),t(d,S),t(S,Q),t(u,X),_e(E,u,null),O=!0,Y||(Z=[z(n,"input",s[4]),z(U,"click",s[5]),z(N,"click",s[6]),z(S,"click",s[7])],Y=!0)},p(e,[m]){(!O||m&2&&b!==(b=e[1]===a.WORKING))&&(n.disabled=b),m&1&&n.value!==e[0]&&ne(n,e[0]),(!O||m&6&&w!==(w=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(U.disabled=w),(!O||m&6&&P!==(P=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(N.disabled=P),(!O||m&6&&y!==(y=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(S.disabled=y);const L={};m&2&&(L.status=e[1]),E.$set(L)},i(e){O||(ce(E.$$.fragment,e),O=!0)},o(e){fe(E.$$.fragment,e),O=!1},d(e){e&&i(g),e&&i(o),pe(E),Y=!1,me(Z)}}}function Ne(s,g,o){let u;he(s,be,p=>o(8,u=p));let l=a.IDLE,r="",K=!1;async function I(p,n=0){o(1,l=a.WORKING);const b=new URLSearchParams;b.set("UUID",p),b.set("userID",u.privateUUID),b.set("type",n.toString());const D=await fetch(`${u.sponsorBlockApi}/api/voteOnSponsorTime?${b}`,{method:"POST"}).then(d=>d.status);D===200&&(o(1,l=a.SUCCESS),o(0,r="")),D===400&&o(1,l=a.ERROR_INVALID),D===405&&o(1,l=a.DUPLICATE)}function f(){r=this.value,o(0,r)}const v=p=>{I(r,20)},V=p=>{I(r,0)},C=p=>{I(r,1)};return s.$$.update=()=>{s.$$.dirty&1&&o(2,K=Ie(r))},[r,l,K,I,f,v,V,C]}class ge extends oe{constructor(g){super();le(this,g,Ne,Ue,re,{})}}export{ge as default};
