import{S as oe,i as le,s as re,k,e as f,t as j,j as ie,P as ue,d as i,n as G,c,a as h,g as A,m as de,b as R,f as ae,E as t,a0 as ne,o as fe,H as z,x as ce,u as _e,v as pe,U as me,J as he}from"../chunks/vendor-9fba9fd8.js";import{C as be}from"../chunks/config-c3a6b1a1.js";import{i as Ie}from"../chunks/utils-5593b12d.js";import{a as ve,S as a}from"../chunks/Status-de6d2c9d.js";import"../chunks/userInfo-65a70c4e.js";function Ue(s){let S,o,u,l,r,K,I,_,v,V,C,p,n,b,D,d,U,F,w,H,N,J,P,M,E,Q,y,X,O,g,Y,Z;return O=new ve({props:{status:s[1]}}),{c(){S=k(),o=f("main"),u=f("div"),l=f("fieldset"),r=f("legend"),K=j("Vote on segment"),I=k(),_=f("div"),v=f("label"),V=j("Segment UUID:"),C=f("br"),p=k(),n=f("input"),D=k(),d=f("div"),U=f("button"),F=j("Undo Vote"),H=k(),N=f("button"),J=j("Downvote"),M=k(),E=f("button"),Q=j("Upvote"),X=k(),ie(O.$$.fragment),this.h()},l(e){ue('[data-svelte="svelte-1dn2k8k"]',document.head).forEach(i),S=G(e),o=c(e,"MAIN",{});var L=h(o);u=c(L,"DIV",{class:!0});var q=h(u);l=c(q,"FIELDSET",{});var W=h(l);r=c(W,"LEGEND",{});var $=h(r);K=A($,"Vote on segment"),$.forEach(i),I=G(W),_=c(W,"DIV",{});var B=h(_);v=c(B,"LABEL",{for:!0});var x=h(v);V=A(x,"Segment UUID:"),x.forEach(i),C=c(B,"BR",{}),p=G(B),n=c(B,"INPUT",{id:!0,type:!0,size:!0,pattern:!0,placeholder:!0}),B.forEach(i),D=G(W),d=c(W,"DIV",{class:!0});var T=h(d);U=c(T,"BUTTON",{});var ee=h(U);F=A(ee,"Undo Vote"),ee.forEach(i),H=G(T),N=c(T,"BUTTON",{});var te=h(N);J=A(te,"Downvote"),te.forEach(i),M=G(T),E=c(T,"BUTTON",{});var se=h(E);Q=A(se,"Upvote"),se.forEach(i),T.forEach(i),W.forEach(i),X=G(q),de(O.$$.fragment,q),q.forEach(i),L.forEach(i),this.h()},h(){document.title="Vote on segment | SponsorBlockControl",R(v,"for","uuid"),R(n,"id","uuid"),R(n,"type","text"),R(n,"size","64"),R(n,"pattern","[a-f0-9]{64}"),R(n,"placeholder","Segment UUID ..."),n.disabled=b=s[1]===a.WORKING,U.disabled=w=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,N.disabled=P=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,E.disabled=y=s[1]===a.WORKING||!s[2]||s[1]===a.WORKING,R(d,"class","actions"),R(u,"class","container")},m(e,m){ae(e,S,m),ae(e,o,m),t(o,u),t(u,l),t(l,r),t(r,K),t(l,I),t(l,_),t(_,v),t(v,V),t(_,C),t(_,p),t(_,n),ne(n,s[0]),t(l,D),t(l,d),t(d,U),t(U,F),t(d,H),t(d,N),t(N,J),t(d,M),t(d,E),t(E,Q),t(u,X),fe(O,u,null),g=!0,Y||(Z=[z(n,"input",s[4]),z(U,"click",s[5]),z(N,"click",s[6]),z(E,"click",s[7])],Y=!0)},p(e,[m]){(!g||m&2&&b!==(b=e[1]===a.WORKING))&&(n.disabled=b),m&1&&n.value!==e[0]&&ne(n,e[0]),(!g||m&6&&w!==(w=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(U.disabled=w),(!g||m&6&&P!==(P=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(N.disabled=P),(!g||m&6&&y!==(y=e[1]===a.WORKING||!e[2]||e[1]===a.WORKING))&&(E.disabled=y);const L={};m&2&&(L.status=e[1]),O.$set(L)},i(e){g||(ce(O.$$.fragment,e),g=!0)},o(e){_e(O.$$.fragment,e),g=!1},d(e){e&&i(S),e&&i(o),pe(O),Y=!1,me(Z)}}}function Ne(s,S,o){let u;he(s,be,p=>o(8,u=p));let l=a.IDLE,r="",K=!1;async function I(p,n=0){o(1,l=a.WORKING);const b=new URLSearchParams;b.set("UUID",p),b.set("userID",u.privateUUID),b.set("type",n.toString());const D=await fetch(`${u.sponsorBlockApi}/api/voteOnSponsorTime?${b}`,{method:"POST"}).then(d=>d.status);D===200&&(o(1,l=a.SUCCESS),o(0,r="")),D===400&&o(1,l=a.ERROR_INVALID),D===405&&o(1,l=a.DUPLICATE)}function _(){r=this.value,o(0,r)}const v=p=>{I(r,20)},V=p=>{I(r,0)},C=p=>{I(r,1)};return s.$$.update=()=>{s.$$.dirty&1&&o(2,K=Ie(r))},[r,l,K,I,_,v,V,C]}class De extends oe{constructor(S){super();le(this,S,Ne,Ue,re,{})}}export{De as default};
