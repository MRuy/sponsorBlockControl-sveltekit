import{S as de,i as fe,s as _e,k as S,e as n,t as V,j as pe,P as he,d as o,n as w,c as l,a as f,g as j,m as me,b as u,G as ie,f as ce,E as e,a0 as M,o as be,H as G,x as ve,u as Ue,v as Ee,U as Ie,J as De}from"../chunks/vendor-9fc4b0a7.js";import{C as ge}from"../chunks/stores-1663c3e2.js";import{a as Re}from"../chunks/utils-dd30e544.js";import{a as ke,S as T}from"../chunks/Status-8cfdcd76.js";function Se(i){let y,s,_,c,v,U,h,r,m,D,W,z,K,a,C,d,g,X,Z,Q,p,Y,R,E,x,P,$,I,ee,q,te,k,A,se,ae;return k=new ke({props:{status:i[3]}}),{c(){y=S(),s=n("main"),_=n("div"),c=n("fieldset"),v=n("legend"),U=V("Warn user:"),h=S(),r=n("div"),m=n("div"),D=n("label"),W=V("User UUID:"),z=n("br"),K=S(),a=n("input"),C=S(),d=n("div"),g=n("label"),X=V("Warn Reason:"),Z=n("br"),Q=S(),p=n("textarea"),Y=S(),R=n("div"),E=n("button"),x=V("Unwarn"),$=S(),I=n("button"),ee=V("Warn"),te=S(),pe(k.$$.fragment),this.h()},l(t){he('[data-svelte="svelte-1exmmzl"]',document.head).forEach(o),y=w(t),s=l(t,"MAIN",{});var L=f(s);_=l(L,"DIV",{class:!0});var H=f(_);c=l(H,"FIELDSET",{});var J=f(c);v=l(J,"LEGEND",{});var re=f(v);U=j(re,"Warn user:"),re.forEach(o),h=w(J),r=l(J,"DIV",{class:!0});var N=f(r);m=l(N,"DIV",{});var O=f(m);D=l(O,"LABEL",{for:!0});var ne=f(D);W=j(ne,"User UUID:"),ne.forEach(o),z=l(O,"BR",{}),K=w(O),a=l(O,"INPUT",{id:!0,type:!0,size:!0,placeholder:!0}),O.forEach(o),C=w(N),d=l(N,"DIV",{});var B=f(d);g=l(B,"LABEL",{for:!0});var oe=f(g);X=j(oe,"Warn Reason:"),oe.forEach(o),Z=l(B,"BR",{}),Q=w(B),p=l(B,"TEXTAREA",{id:!0,cols:!0,rows:!0,placeholder:!0}),f(p).forEach(o),B.forEach(o),Y=w(N),R=l(N,"DIV",{class:!0});var F=f(R);E=l(F,"BUTTON",{type:!0});var le=f(E);x=j(le,"Unwarn"),le.forEach(o),$=w(F),I=l(F,"BUTTON",{type:!0});var ue=f(I);ee=j(ue,"Warn"),ue.forEach(o),F.forEach(o),N.forEach(o),J.forEach(o),te=w(H),me(k.$$.fragment,H),H.forEach(o),L.forEach(o),this.h()},h(){document.title="Warn user | SponsorBlockControl",u(D,"for","uuid"),u(a,"id","uuid"),u(a,"type","text"),u(a,"size","64"),u(a,"placeholder","User UUID..."),u(g,"for","reason"),u(p,"id","reason"),u(p,"cols","80"),u(p,"rows","3"),u(p,"placeholder","Reason..."),u(E,"type","button"),E.disabled=P=!i[1],u(I,"type","button"),I.disabled=q=!i[1],u(R,"class","actions"),u(r,"class","form svelte-fndrlu"),ie(r,"working",i[3]===T.WORKING),u(_,"class","container")},m(t,b){ce(t,y,b),ce(t,s,b),e(s,_),e(_,c),e(c,v),e(v,U),e(c,h),e(c,r),e(r,m),e(m,D),e(D,W),e(m,z),e(m,K),e(m,a),M(a,i[0]),e(r,C),e(r,d),e(d,g),e(g,X),e(d,Z),e(d,Q),e(d,p),M(p,i[2]),e(r,Y),e(r,R),e(R,E),e(E,x),e(R,$),e(R,I),e(I,ee),e(_,te),be(k,_,null),A=!0,se||(ae=[G(a,"input",i[5]),G(a,"input",i[6]),G(p,"input",i[7]),G(E,"click",i[8]),G(I,"click",i[9])],se=!0)},p(t,[b]){b&1&&a.value!==t[0]&&M(a,t[0]),b&4&&M(p,t[2]),(!A||b&2&&P!==(P=!t[1]))&&(E.disabled=P),(!A||b&2&&q!==(q=!t[1]))&&(I.disabled=q),b&8&&ie(r,"working",t[3]===T.WORKING);const L={};b&8&&(L.status=t[3]),k.$set(L)},i(t){A||(ve(k.$$.fragment,t),A=!0)},o(t){Ue(k.$$.fragment,t),A=!1},d(t){t&&o(y),t&&o(s),Ee(k),se=!1,Ie(ae)}}}function we(i,y,s){let _;De(i,ge,a=>s(10,_=a));let c="",v=!1,U="",h=T.IDLE;async function r(a="warn"){s(3,h=T.WORKING);const C={issuerUserID:_.privateUUID,userID:c,reason:U,enabled:a==="warn"},d=await fetch(`${_.sponsorBlockApi}/api/warnUser`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}).then(function(g){return g.status});d===200&&(s(3,h=T.SUCCESS),s(0,c=""),s(1,v=!1),s(2,U="")),d===400&&s(3,h=T.ERROR_INVALID),d===403&&s(3,h=T.ERROR_UNAUTHORIZED),d===409&&s(3,h=T.DUPLICATE)}function m(){c=this.value,s(0,c)}const D=a=>{s(1,v=Re(c))};function W(){U=this.value,s(2,U)}return[c,v,U,h,r,m,D,W,a=>{r("unwarn")},a=>{r("warn")}]}class We extends de{constructor(y){super();fe(this,y,we,Se,_e,{})}}export{We as default};
